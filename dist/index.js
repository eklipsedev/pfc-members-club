"use strict";(()=>{var Nf=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},GI=function(n){let e=[],t=0,r=0;for(;t<n.length;){let s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){let i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){let i=n[t++],o=n[t++],a=n[t++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let i=n[t++],o=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},xf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){let i=n[s],o=s+1<n.length,a=o?n[s+1]:0,c=s+2<n.length,u=c?n[s+2]:0,l=i>>2,h=(i&3)<<4|a>>4,d=(a&15)<<2|u>>6,f=u&63;c||(f=64,o||(d=64)),r.push(t[l],t[h],t[d],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Nf(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):GI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){let i=t[n.charAt(s++)],a=s<n.length?t[n.charAt(s)]:0;++s;let u=s<n.length?t[n.charAt(s)]:64;++s;let h=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||a==null||u==null||h==null)throw new zc;let d=i<<2|a>>4;if(r.push(d),u!==64){let f=a<<4&240|u>>2;if(r.push(f),h!==64){let _=u<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},zc=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},$I=function(n){let e=Nf(n);return xf.encodeByteArray(e,!0)},hs=function(n){return $I(n).replace(/\./g,"")},$c=function(n){try{return xf.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function KI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var HI=()=>KI().__FIREBASE_DEFAULTS__,WI=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},QI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&$c(n[1]);return e&&JSON.parse(e)},Wi=()=>{try{return HI()||WI()||QI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Kc=n=>{var e,t;return(t=(e=Wi())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},mr=n=>{let e=Kc(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Hc=()=>{var n;return(n=Wi())===null||n===void 0?void 0:n.config},Wc=n=>{var e;return(e=Wi())===null||e===void 0?void 0:e[`_${n}`]};var Hi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Qi(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},n),a="";return[hs(JSON.stringify(t)),hs(JSON.stringify(o)),a].join(".")}function Y(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Of(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Y())}function YI(){var n;let e=(n=Wi())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Lf(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Vf(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Mf(){let n=Y();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Qc(){return!YI()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yi(){try{return typeof indexedDB=="object"}catch{return!1}}function Uf(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}var JI="FirebaseError",me=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=JI,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,St.prototype.create)}},St=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?XI(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new me(s,a,r)}};function XI(n,e){return n.replace(ZI,(t,r)=>{let s=e[r];return s!=null?String(s):`<${r}?>`})}var ZI=/\{\$([^}]+)}/g;function Ff(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Rt(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let s of t){if(!r.includes(s))return!1;let i=n[s],o=e[s];if(Df(i)&&Df(o)){if(!Rt(i,o))return!1}else if(i!==o)return!1}for(let s of r)if(!t.includes(s))return!1;return!0}function Df(n){return n!==null&&typeof n=="object"}function pr(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function gr(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function _r(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function qf(n,e){let t=new Gc(n,e);return t.subscribe.bind(t)}var Gc=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");ev(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=jc),s.error===void 0&&(s.error=jc),s.complete===void 0&&(s.complete=jc);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ev(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function jc(){}var UR=4*60*60*1e3;function M(n){return n&&n._delegate?n._delegate:n}var Ee=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var bn="[DEFAULT]";var Yc=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Hi;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),s=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nv(e))try{this.getOrInitializeService({instanceIdentifier:bn})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let s=this.normalizeInstanceIdentifier(t);try{let i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=bn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bn){return this.instances.has(e)}getOptions(e=bn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[i,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,t){var r;let s=this.normalizeInstanceIdentifier(t),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);let o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tv(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bn){return this.component?this.component.multipleInstances?e:bn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function tv(n){return n===bn?void 0:n}function nv(n){return n.instantiationMode==="EAGER"}var Ji=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Yc(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var rv=[],U;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(U||(U={}));var sv={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},iv=U.INFO,ov={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},av=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),s=ov[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},jt=class{constructor(e){this.name=e,this._logLevel=iv,this._logHandler=av,this._userLogHandler=null,rv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in U))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...e),this._logHandler(this,U.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...e),this._logHandler(this,U.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,U.INFO,...e),this._logHandler(this,U.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,U.WARN,...e),this._logHandler(this,U.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...e),this._logHandler(this,U.ERROR,...e)}};var cv=(n,e)=>e.some(t=>n instanceof t),Bf,jf;function uv(){return Bf||(Bf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lv(){return jf||(jf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var zf=new WeakMap,Xc=new WeakMap,Gf=new WeakMap,Jc=new WeakMap,eu=new WeakMap;function hv(n){let e=new Promise((t,r)=>{let s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(it(n.result)),s()},o=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&zf.set(t,n)}).catch(()=>{}),eu.set(e,n),e}function dv(n){if(Xc.has(n))return;let e=new Promise((t,r)=>{let s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),s()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});Xc.set(n,e)}var Zc={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Xc.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Gf.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return it(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function $f(n){Zc=n(Zc)}function fv(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Xi(this),e,...t);return Gf.set(r,e.sort?e.sort():[e]),it(r)}:lv().includes(n)?function(...e){return n.apply(Xi(this),e),it(zf.get(this))}:function(...e){return it(n.apply(Xi(this),e))}}function mv(n){return typeof n=="function"?fv(n):(n instanceof IDBTransaction&&dv(n),cv(n,uv())?new Proxy(n,Zc):n)}function it(n){if(n instanceof IDBRequest)return hv(n);if(Jc.has(n))return Jc.get(n);let e=mv(n);return e!==n&&(Jc.set(n,e),eu.set(e,n)),e}var Xi=n=>eu.get(n);function Hf(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){let o=indexedDB.open(n,e),a=it(o);return r&&o.addEventListener("upgradeneeded",c=>{r(it(o.result),c.oldVersion,c.newVersion,it(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var pv=["get","getKey","getAll","getAllKeys","count"],gv=["put","add","delete","clear"],tu=new Map;function Kf(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tu.get(e))return tu.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,s=gv.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||pv.includes(t)))return;let i=async function(o,...a){let c=this.transaction(o,s?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),s&&c.done]))[0]};return tu.set(e,i),i}$f(n=>({...n,get:(e,t,r)=>Kf(e,t)||n.get(e,t,r),has:(e,t)=>!!Kf(e,t)||n.has(e,t)}));var ru=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_v(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function _v(n){let e=n.getComponent();return e?.type==="VERSION"}var su="@firebase/app",Wf="0.9.26";var Sn=new jt("@firebase/app"),yv="@firebase/app-compat",wv="@firebase/analytics-compat",Iv="@firebase/analytics",vv="@firebase/app-check-compat",Ev="@firebase/app-check",Tv="@firebase/auth",Av="@firebase/auth-compat",bv="@firebase/database",Sv="@firebase/database-compat",Rv="@firebase/functions",Cv="@firebase/functions-compat",Pv="@firebase/installations",kv="@firebase/installations-compat",Dv="@firebase/messaging",Nv="@firebase/messaging-compat",xv="@firebase/performance",Ov="@firebase/performance-compat",Lv="@firebase/remote-config",Vv="@firebase/remote-config-compat",Mv="@firebase/storage",Uv="@firebase/storage-compat",Fv="@firebase/firestore",qv="@firebase/firestore-compat",Bv="firebase",jv="10.7.2";var iu="[DEFAULT]",zv={[su]:"fire-core",[yv]:"fire-core-compat",[Iv]:"fire-analytics",[wv]:"fire-analytics-compat",[Ev]:"fire-app-check",[vv]:"fire-app-check-compat",[Tv]:"fire-auth",[Av]:"fire-auth-compat",[bv]:"fire-rtdb",[Sv]:"fire-rtdb-compat",[Rv]:"fire-fn",[Cv]:"fire-fn-compat",[Pv]:"fire-iid",[kv]:"fire-iid-compat",[Dv]:"fire-fcm",[Nv]:"fire-fcm-compat",[xv]:"fire-perf",[Ov]:"fire-perf-compat",[Lv]:"fire-rc",[Vv]:"fire-rc-compat",[Mv]:"fire-gcs",[Uv]:"fire-gcs-compat",[Fv]:"fire-fst",[qv]:"fire-fst-compat","fire-js":"fire-js",[Bv]:"fire-js-all"};var Zi=new Map,ou=new Map;function Gv(n,e){try{n.container.addComponent(e)}catch(t){Sn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ze(n){let e=n.name;if(ou.has(e))return Sn.debug(`There were multiple attempts to register component ${e}.`),!1;ou.set(e,n);for(let t of Zi.values())Gv(t,n);return!0}function ot(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}var $v={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},zt=new St("app","Firebase",$v);var au=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ee("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zt.create("app-deleted",{appName:this._name})}};var at=jv;function lu(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:iu,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw zt.create("bad-app-name",{appName:String(s)});if(t||(t=Hc()),!t)throw zt.create("no-options");let i=Zi.get(s);if(i){if(Rt(t,i.options)&&Rt(r,i.config))return i;throw zt.create("duplicate-app",{appName:s})}let o=new Ji(s);for(let c of ou.values())o.addComponent(c);let a=new au(t,r,o);return Zi.set(s,a),a}function Gt(n=iu){let e=Zi.get(n);if(!e&&n===iu&&Hc())return lu();if(!e)throw zt.create("no-app",{appName:n});return e}function pe(n,e,t){var r;let s=(r=zv[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);let i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sn.warn(a.join(" "));return}ze(new Ee(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}var Kv="firebase-heartbeat-database",Hv=1,ds="firebase-heartbeat-store",nu=null;function Xf(){return nu||(nu=Hf(Kv,Hv,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ds)}catch(t){console.warn(t)}}}}).catch(n=>{throw zt.create("idb-open",{originalErrorMessage:n.message})})),nu}async function Wv(n){try{return await(await Xf()).transaction(ds).objectStore(ds).get(Zf(n))}catch(e){if(e instanceof me)Sn.warn(e.message);else{let t=zt.create("idb-get",{originalErrorMessage:e?.message});Sn.warn(t.message)}}}async function Qf(n,e){try{let r=(await Xf()).transaction(ds,"readwrite");await r.objectStore(ds).put(e,Zf(n)),await r.done}catch(t){if(t instanceof me)Sn.warn(t.message);else{let r=zt.create("idb-set",{originalErrorMessage:t?.message});Sn.warn(r.message)}}}function Zf(n){return`${n.name}!${n.options.appId}`}var Qv=1024,Yv=30*24*60*60*1e3,cu=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new uu(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;let s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Yf();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=Yv}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Yf(),{heartbeatsToSend:r,unsentEntries:s}=Jv(this._heartbeatsCache.heartbeats),i=hs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}};function Yf(){return new Date().toISOString().substring(0,10)}function Jv(n,e=Qv){let t=[],r=n.slice();for(let s of n){let i=t.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Jf(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Jf(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var uu=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yi()?Uf().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await Wv(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let s=await this.read();return Qf(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let s=await this.read();return Qf(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}};function Jf(n){return hs(JSON.stringify({version:2,heartbeats:n})).length}function Xv(n){ze(new Ee("platform-logger",e=>new ru(e),"PRIVATE")),ze(new Ee("heartbeat",e=>new cu(e),"PRIVATE")),pe(su,Wf,n),pe(su,Wf,"esm2017"),pe("fire-js","")}Xv("");var Zv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Je={},v,Nu=Nu||{},N=Zv||self;function mo(n){var e=typeof n;return e=e!="object"?e:n?Array.isArray(n)?"array":e:"null",e=="array"||e=="object"&&typeof n.length=="number"}function Ss(n){var e=typeof n;return e=="object"&&n!=null||e=="function"}function eE(n){return Object.prototype.hasOwnProperty.call(n,hu)&&n[hu]||(n[hu]=++tE)}var hu="closure_uid_"+(1e9*Math.random()>>>0),tE=0;function nE(n,e,t){return n.call.apply(n.bind,arguments)}function rE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Te(n,e,t){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Te=nE:Te=rE,Te.apply(null,arguments)}function eo(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function he(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function $t(){this.s=this.s,this.o=this.o}var sE=0;$t.prototype.s=!1;$t.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),sE!=0)&&eE(this)};$t.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var dm=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if(typeof n=="string")return typeof e!="string"||e.length!=1?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function xu(n){let e=n.length;if(0<e){let t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function em(n,e){for(let t=1;t<arguments.length;t++){let r=arguments[t];if(mo(r)){let s=n.length||0,i=r.length||0;n.length=s+i;for(let o=0;o<i;o++)n[s+o]=r[o]}else n.push(r)}}function Ae(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var iE=function(){if(!N.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{let t=()=>{};N.addEventListener("test",t,e),N.removeEventListener("test",t,e)}catch{}return n}();function ys(n){return/^[\s\xa0]*$/.test(n)}function po(){var n=N.navigator;return n&&(n=n.userAgent)?n:""}function ct(n){return po().indexOf(n)!=-1}function Ou(n){return Ou[" "](n),n}Ou[" "]=function(){};function oE(n,e){var t=WE;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}var aE=ct("Opera"),vr=ct("Trident")||ct("MSIE"),fm=ct("Edge"),gu=fm||vr,mm=ct("Gecko")&&!(po().toLowerCase().indexOf("webkit")!=-1&&!ct("Edge"))&&!(ct("Trident")||ct("MSIE"))&&!ct("Edge"),cE=po().toLowerCase().indexOf("webkit")!=-1&&!ct("Edge");function pm(){var n=N.document;return n?n.documentMode:void 0}var _u;e:{if(to="",no=function(){var n=po();if(mm)return/rv:([^\);]+)(\)|;)/.exec(n);if(fm)return/Edge\/([\d\.]+)/.exec(n);if(vr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(cE)return/WebKit\/(\S+)/.exec(n);if(aE)return/(?:Version)[ \/]?(\S+)/.exec(n)}(),no&&(to=no?no[1]:""),vr&&(ro=pm(),ro!=null&&ro>parseFloat(to))){_u=String(ro);break e}_u=to}var to,no,ro,yu;N.document&&vr?(du=pm(),yu=du||parseInt(_u,10)||void 0):yu=void 0;var du,uE=yu;function ws(n,e){if(Ae.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(mm){e:{try{Ou(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else t=="mouseover"?e=n.fromElement:t=="mouseout"&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:lE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ws.$.h.call(this)}}he(ws,Ae);var lE={2:"touch",3:"pen",4:"mouse"};ws.prototype.h=function(){ws.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Rs="closure_listenable_"+(1e6*Math.random()|0),hE=0;function dE(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++hE,this.fa=this.ia=!1}function go(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Lu(n,e,t){for(let r in n)e.call(t,n[r],r,n)}function fE(n,e){for(let t in n)e.call(void 0,n[t],t,n)}function gm(n){let e={};for(let t in n)e[t]=n[t];return e}var tm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _m(n,e){let t,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(t in r)n[t]=r[t];for(let i=0;i<tm.length;i++)t=tm[i],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function _o(n){this.src=n,this.g={},this.h=0}_o.prototype.add=function(n,e,t,r,s){var i=n.toString();n=this.g[i],n||(n=this.g[i]=[],this.h++);var o=Iu(n,e,r,s);return-1<o?(e=n[o],t||(e.ia=!1)):(e=new dE(e,this.src,i,!!r,s),e.ia=t,n.push(e)),e};function wu(n,e){var t=e.type;if(t in n.g){var r=n.g[t],s=dm(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(go(e),n.g[t].length==0&&(delete n.g[t],n.h--))}}function Iu(n,e,t,r){for(var s=0;s<n.length;++s){var i=n[s];if(!i.fa&&i.listener==e&&i.capture==!!t&&i.la==r)return s}return-1}var Vu="closure_lm_"+(1e6*Math.random()|0),fu={};function ym(n,e,t,r,s){if(r&&r.once)return Im(n,e,t,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)ym(n,e[i],t,r,s);return null}return t=Fu(t),n&&n[Rs]?n.O(e,t,Ss(r)?!!r.capture:!!r,s):wm(n,e,t,!1,r,s)}function wm(n,e,t,r,s,i){if(!e)throw Error("Invalid event type");var o=Ss(s)?!!s.capture:!!s,a=Uu(n);if(a||(n[Vu]=a=new _o(n)),t=a.add(e,t,r,o,i),t.proxy)return t;if(r=mE(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)iE||(s=o),s===void 0&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(Em(e.toString()),r);else if(n.addListener&&n.removeListener)n.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return t}function mE(){function n(t){return e.call(n.src,n.listener,t)}let e=pE;return n}function Im(n,e,t,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)Im(n,e[i],t,r,s);return null}return t=Fu(t),n&&n[Rs]?n.P(e,t,Ss(r)?!!r.capture:!!r,s):wm(n,e,t,!0,r,s)}function vm(n,e,t,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)vm(n,e[i],t,r,s);else r=Ss(r)?!!r.capture:!!r,t=Fu(t),n&&n[Rs]?(n=n.i,e=String(e).toString(),e in n.g&&(i=n.g[e],t=Iu(i,t,r,s),-1<t&&(go(i[t]),Array.prototype.splice.call(i,t,1),i.length==0&&(delete n.g[e],n.h--)))):n&&(n=Uu(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Iu(e,t,r,s)),(t=-1<n?e[n]:null)&&Mu(t))}function Mu(n){if(typeof n!="number"&&n&&!n.fa){var e=n.src;if(e&&e[Rs])wu(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Em(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Uu(e))?(wu(t,n),t.h==0&&(t.src=null,e[Vu]=null)):go(n)}}}function Em(n){return n in fu?fu[n]:fu[n]="on"+n}function pE(n,e){if(n.fa)n=!0;else{e=new ws(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Mu(n),n=t.call(r,e)}return n}function Uu(n){return n=n[Vu],n instanceof _o?n:null}var mu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fu(n){return typeof n=="function"?n:(n[mu]||(n[mu]=function(e){return n.handleEvent(e)}),n[mu])}function le(){$t.call(this),this.i=new _o(this),this.S=this,this.J=null}he(le,$t);le.prototype[Rs]=!0;le.prototype.removeEventListener=function(n,e,t,r){vm(this,n,e,t,r)};function _e(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,typeof e=="string")e=new Ae(e,n);else if(e instanceof Ae)e.target=e.target||n;else{var s=e;e=new Ae(r,n),_m(e,s)}if(s=!0,t)for(var i=t.length-1;0<=i;i--){var o=e.g=t[i];s=so(o,r,!0,e)&&s}if(o=e.g=n,s=so(o,r,!0,e)&&s,s=so(o,r,!1,e)&&s,t)for(i=0;i<t.length;i++)o=e.g=t[i],s=so(o,r,!1,e)&&s}le.prototype.N=function(){if(le.$.N.call(this),this.i){var n=this.i,e;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)go(t[r]);delete n.g[e],n.h--}}this.J=null};le.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)};le.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};function so(n,e,t,r){if(e=n.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==t){var a=o.listener,c=o.la||o.src;o.ia&&wu(n.i,o),s=a.call(c,r)!==!1&&s}}return s&&!r.defaultPrevented}var qu=N.JSON.stringify,vu=class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function gE(){var n=Bu;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Eu=class{constructor(){this.h=this.g=null}add(e,t){let r=Tm.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Tm=new vu(()=>new Tu,n=>n.reset()),Tu=class{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}};function _E(n){var e=1;n=n.split(":");let t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function yE(n){N.setTimeout(()=>{throw n},0)}var Is,vs=!1,Bu=new Eu,Am=()=>{let n=N.Promise.resolve(void 0);Is=()=>{n.then(wE)}},wE=()=>{for(var n;n=gE();){try{n.h.call(n.g)}catch(t){yE(t)}var e=Tm;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}vs=!1};function yo(n,e){le.call(this),this.h=n||1,this.g=e||N,this.j=Te(this.qb,this),this.l=Date.now()}he(yo,le);v=yo.prototype;v.ga=!1;v.T=null;v.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),_e(this,"tick"),this.ga&&(ju(this),this.start()))}};v.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function ju(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}v.N=function(){yo.$.N.call(this),ju(this),delete this.g};function zu(n,e,t){if(typeof n=="function")t&&(n=Te(n,t));else if(n&&typeof n.handleEvent=="function")n=Te(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:N.setTimeout(n,e||0)}function bm(n){n.g=zu(()=>{n.g=null,n.i&&(n.i=!1,bm(n))},n.j);let e=n.h;n.h=null,n.m.apply(null,e)}var Au=class extends $t{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:bm(this)}N(){super.N(),this.g&&(N.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Es(n){$t.call(this),this.h=n,this.g={}}he(Es,$t);var nm=[];function Sm(n,e,t,r){Array.isArray(t)||(t&&(nm[0]=t.toString()),t=nm);for(var s=0;s<t.length;s++){var i=ym(e,t[s],r||n.handleEvent,!1,n.h||n);if(!i)break;n.g[i.key]=i}}function Rm(n){Lu(n.g,function(e,t){this.g.hasOwnProperty(t)&&Mu(e)},n),n.g={}}Es.prototype.N=function(){Es.$.N.call(this),Rm(this)};Es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function wo(){this.g=!0}wo.prototype.Ea=function(){this.g=!1};function IE(n,e,t,r,s,i){n.info(function(){if(n.g)if(i)for(var o="",a=i.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&h[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+t+`
`+o})}function vE(n,e,t,r,s,i,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+t+`
`+i+" "+o})}function wr(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+TE(n,t)+(r?" "+r:"")})}function EE(n,e){n.info(function(){return"TIMEOUT: "+e})}wo.prototype.info=function(){};function TE(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t){for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return qu(t)}catch{return e}}var kn={},rm=null;function Io(){return rm=rm||new le}kn.Ta="serverreachability";function Cm(n){Ae.call(this,kn.Ta,n)}he(Cm,Ae);function Ts(n){let e=Io();_e(e,new Cm(e))}kn.STAT_EVENT="statevent";function Pm(n,e){Ae.call(this,kn.STAT_EVENT,n),this.stat=e}he(Pm,Ae);function De(n){let e=Io();_e(e,new Pm(e,n))}kn.Ua="timingevent";function km(n,e){Ae.call(this,kn.Ua,n),this.size=e}he(km,Ae);function Cs(n,e){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return N.setTimeout(function(){n()},e)}var vo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Dm={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Gu(){}Gu.prototype.h=null;function sm(n){return n.h||(n.h=n.i())}function Nm(){}var Ps={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function $u(){Ae.call(this,"d")}he($u,Ae);function Ku(){Ae.call(this,"c")}he(Ku,Ae);var bu;function Eo(){}he(Eo,Gu);Eo.prototype.g=function(){return new XMLHttpRequest};Eo.prototype.i=function(){return{}};bu=new Eo;function ks(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Es(this),this.P=AE,n=gu?125:void 0,this.V=new yo(n),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new xm}function xm(){this.i=null,this.g="",this.h=!1}var AE=45e3,Om={},Su={};v=ks.prototype;v.setTimeout=function(n){this.P=n};function Ru(n,e,t){n.L=1,n.A=Ao(Pt(e)),n.u=t,n.S=!0,Lm(n,null)}function Lm(n,e){n.G=Date.now(),Ds(n),n.B=Pt(n.A);var t=n.B,r=n.W;Array.isArray(r)||(r=[String(r)]),zm(t.i,"t",r),n.o=0,t=n.l.J,n.h=new xm,n.g=lp(n.l,t?e:null,!n.u),0<n.O&&(n.M=new Au(Te(n.Pa,n,n.g),n.O)),Sm(n.U,n.g,"readystatechange",n.nb),e=n.I?gm(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),Ts(),IE(n.j,n.v,n.B,n.m,n.W,n.u)}v.nb=function(n){n=n.target;let e=this.M;e&&ut(n)==3?e.l():this.Pa(n)};v.Pa=function(n){try{if(n==this.g)e:{let l=ut(this.g);var e=this.g.Ia();let h=this.g.da();if(!(3>l)&&(l!=3||gu||this.g&&(this.h.h||this.g.ja()||cm(this.g)))){this.J||l!=4||e==7||(e==8||0>=h?Ts(3):Ts(2)),To(this);var t=this.g.da();this.ca=t;t:if(Vm(this)){var r=cm(this.g);n="";var s=r.length,i=ut(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rn(this),_s(this);var o="";break t}this.h.i=new N.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.length=0,this.h.g+=n,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=t==200,vE(this.j,this.v,this.B,this.m,this.W,l,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ys(a)){var u=a;break t}}u=null}if(t=u)wr(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cu(this,t);else{this.i=!1,this.s=3,De(12),Rn(this),_s(this);break e}}this.S?(Mm(this,l,o),gu&&this.i&&l==3&&(Sm(this.U,this.V,"tick",this.mb),this.V.start())):(wr(this.j,this.m,o,null),Cu(this,o)),l==4&&Rn(this),this.i&&!this.J&&(l==4?op(this.l,this):(this.i=!1,Ds(this)))}else $E(this.g),t==400&&0<o.indexOf("Unknown SID")?(this.s=3,De(12)):(this.s=0,De(13)),Rn(this),_s(this)}}}catch{}finally{}};function Vm(n){return n.g?n.v=="GET"&&n.L!=2&&n.l.Ha:!1}function Mm(n,e,t){let r=!0,s;for(;!n.J&&n.o<t.length;)if(s=bE(n,t),s==Su){e==4&&(n.s=4,De(14),r=!1),wr(n.j,n.m,null,"[Incomplete Response]");break}else if(s==Om){n.s=4,De(15),wr(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}else wr(n.j,n.m,s,null),Cu(n,s);Vm(n)&&n.o!=0&&(n.h.g=n.h.g.slice(n.o),n.o=0),e!=4||t.length!=0||n.h.h||(n.s=1,De(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,e=n.l,e.g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Xu(e),e.M=!0,De(11))):(wr(n.j,n.m,t,"[Invalid Chunked Response]"),Rn(n),_s(n))}v.mb=function(){if(this.g){var n=ut(this.g),e=this.g.ja();this.o<e.length&&(To(this),Mm(this,n,e),this.i&&n!=4&&Ds(this))}};function bE(n,e){var t=n.o,r=e.indexOf(`
`,t);return r==-1?Su:(t=Number(e.substring(t,r)),isNaN(t)?Om:(r+=1,r+t>e.length?Su:(e=e.slice(r,r+t),n.o=r+t,e)))}v.cancel=function(){this.J=!0,Rn(this)};function Ds(n){n.Y=Date.now()+n.P,Um(n,n.P)}function Um(n,e){if(n.C!=null)throw Error("WatchDog timer not null");n.C=Cs(Te(n.lb,n),e)}function To(n){n.C&&(N.clearTimeout(n.C),n.C=null)}v.lb=function(){this.C=null;let n=Date.now();0<=n-this.Y?(EE(this.j,this.B),this.L!=2&&(Ts(),De(17)),Rn(this),this.s=2,_s(this)):Um(this,this.Y-n)};function _s(n){n.l.H==0||n.J||op(n.l,n)}function Rn(n){To(n);var e=n.M;e&&typeof e.sa=="function"&&e.sa(),n.M=null,ju(n.V),Rm(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Cu(n,e){try{var t=n.l;if(t.H!=0&&(t.g==n||Pu(t.i,n))){if(!n.K&&Pu(t.i,n)&&t.H==3){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!t.u){if(t.g)if(t.g.G+3e3<n.G)uo(t),Ro(t);else break e;Ju(t),De(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&t.A==0&&!t.v&&(t.v=Cs(Te(t.ib,t),6e3));if(1>=Km(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Cn(t,11)}else if((n.K||t.g==n)&&uo(t),!ys(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let u=s[e];if(t.V=u[0],u=u[1],t.H==2)if(u[0]=="c"){t.K=u[1],t.pa=u[2];let l=u[3];l!=null&&(t.ra=l,t.l.info("VER="+t.ra));let h=u[4];h!=null&&(t.Ga=h,t.l.info("SVER="+t.Ga));let d=u[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,t.L=r,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;let f=n.g;if(f){let _=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var i=r.i;i.g||_.indexOf("spdy")==-1&&_.indexOf("quic")==-1&&_.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Hu(i,i.h),i.h=null))}if(r.F){let y=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.Da=y,H(r.I,r.F,y))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms")),r=t;var o=n;if(r.wa=up(r,r.J?r.pa:null,r.Y),o.K){Hm(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(To(a),Ds(a)),r.g=o}else sp(r);0<t.j.length&&Co(t)}else u[0]!="stop"&&u[0]!="close"||Cn(t,7);else t.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Cn(t,7):Yu(t):u[0]!="noop"&&t.h&&t.h.Aa(u),t.A=0)}}Ts(4)}catch{}}function SE(n){if(n.Z&&typeof n.Z=="function")return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if(typeof n=="string")return n.split("");if(mo(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}e=[],t=0;for(r in n)e[t++]=n[r];return e}function RE(n){if(n.ta&&typeof n.ta=="function")return n.ta();if(!n.Z||typeof n.Z!="function"){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(mo(n)||typeof n=="string"){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(let r in n)e[t++]=r;return e}}}function Fm(n,e){if(n.forEach&&typeof n.forEach=="function")n.forEach(e,void 0);else if(mo(n)||typeof n=="string")Array.prototype.forEach.call(n,e,void 0);else for(var t=RE(n),r=SE(n),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],t&&t[i],n)}var qm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function CE(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var i=n[t].substring(0,r);s=n[t].substring(r+1)}else i=n[t];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Pn(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Pn){this.h=n.h,ao(this,n.j),this.s=n.s,this.g=n.g,co(this,n.m),this.l=n.l;var e=n.i,t=new As;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),im(this,t),this.o=n.o}else n&&(e=String(n).match(qm))?(this.h=!1,ao(this,e[1]||"",!0),this.s=ps(e[2]||""),this.g=ps(e[3]||"",!0),co(this,e[4]),this.l=ps(e[5]||"",!0),im(this,e[6]||"",!0),this.o=ps(e[7]||"")):(this.h=!1,this.i=new As(null,this.h))}Pn.prototype.toString=function(){var n=[],e=this.j;e&&n.push(gs(e,om,!0),":");var t=this.g;return(t||e=="file")&&(n.push("//"),(e=this.s)&&n.push(gs(e,om,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.m,t!=null&&n.push(":",String(t))),(t=this.l)&&(this.g&&t.charAt(0)!="/"&&n.push("/"),n.push(gs(t,t.charAt(0)=="/"?DE:kE,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",gs(t,xE)),n.join("")};function Pt(n){return new Pn(n)}function ao(n,e,t){n.j=t?ps(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function co(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function im(n,e,t){e instanceof As?(n.i=e,OE(n.i,n.h)):(t||(e=gs(e,NE)),n.i=new As(e,n.h))}function H(n,e,t){n.i.set(e,t)}function Ao(n){return H(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ps(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function gs(n,e,t){return typeof n=="string"?(n=encodeURI(n).replace(e,PE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function PE(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var om=/[#\/\?@]/g,kE=/[#\?:]/g,DE=/[#\?]/g,NE=/[#\?@]/g,xE=/#/g;function As(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Kt(n){n.g||(n.g=new Map,n.h=0,n.i&&CE(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}v=As.prototype;v.add=function(n,e){Kt(this),this.i=null,n=Er(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this};function Bm(n,e){Kt(n),e=Er(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function jm(n,e){return Kt(n),e=Er(n,e),n.g.has(e)}v.forEach=function(n,e){Kt(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)};v.ta=function(){Kt(this);let n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){let s=n[r];for(let i=0;i<s.length;i++)t.push(e[r])}return t};v.Z=function(n){Kt(this);let e=[];if(typeof n=="string")jm(this,n)&&(e=e.concat(this.g.get(Er(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e};v.set=function(n,e){return Kt(this),this.i=null,n=Er(this,n),jm(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this};v.get=function(n,e){return n?(n=this.Z(n),0<n.length?String(n[0]):e):e};function zm(n,e,t){Bm(n,e),0<t.length&&(n.i=null,n.g.set(Er(n,e),xu(t)),n.h+=t.length)}v.toString=function(){if(this.i)return this.i;if(!this.g)return"";let n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];let i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),n.push(s)}}return this.i=n.join("&")};function Er(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function OE(n,e){e&&!n.j&&(Kt(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(Bm(this,r),zm(this,s,t))},n)),n.j=e}var LE=class{constructor(n,e){this.g=n,this.map=e}};function Gm(n){this.l=n||VE,N.PerformanceNavigationTiming?(n=N.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(N.g&&N.g.Ka&&N.g.Ka()&&N.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var VE=10;function $m(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function Km(n){return n.h?1:n.g?n.g.size:0}function Pu(n,e){return n.h?n.h==e:n.g?n.g.has(e):!1}function Hu(n,e){n.g?n.g.add(e):n.h=e}function Hm(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}Gm.prototype.cancel=function(){if(this.i=Wm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let n of this.g.values())n.cancel();this.g.clear()}};function Wm(n){if(n.h!=null)return n.i.concat(n.h.F);if(n.g!=null&&n.g.size!==0){let e=n.i;for(let t of n.g.values())e=e.concat(t.F);return e}return xu(n.i)}var ME=class{stringify(n){return N.JSON.stringify(n,void 0)}parse(n){return N.JSON.parse(n,void 0)}};function UE(){this.g=new ME}function FE(n,e,t){let r=t||"";try{Fm(n,function(s,i){let o=s;Ss(s)&&(o=qu(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function qE(n,e){let t=new wo;if(N.Image){let r=new Image;r.onload=eo(io,t,r,"TestLoadImage: loaded",!0,e),r.onerror=eo(io,t,r,"TestLoadImage: error",!1,e),r.onabort=eo(io,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=eo(io,t,r,"TestLoadImage: timeout",!1,e),N.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}function io(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Ns(n){this.l=n.ec||null,this.j=n.ob||!1}he(Ns,Gu);Ns.prototype.g=function(){return new bo(this.l,this.j)};Ns.prototype.i=function(n){return function(){return n}}({});function bo(n,e){le.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Wu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}he(bo,le);var Wu=0;v=bo.prototype;v.open=function(n,e){if(this.readyState!=Wu)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,bs(this)};v.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||N).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};v.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xs(this)),this.readyState=Wu};v.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,bs(this)),this.g&&(this.readyState=3,bs(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof N.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Qm(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))};function Qm(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}v.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?xs(this):bs(this),this.readyState==3&&Qm(this)}};v.Za=function(n){this.g&&(this.response=this.responseText=n,xs(this))};v.Ya=function(n){this.g&&(this.response=n,xs(this))};v.ka=function(){this.g&&xs(this)};function xs(n){n.readyState=4,n.l=null,n.j=null,n.A=null,bs(n)}v.setRequestHeader=function(n,e){this.v.append(n,e)};v.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""};v.getAllResponseHeaders=function(){if(!this.h)return"";let n=[],e=this.h.entries();for(var t=e.next();!t.done;)t=t.value,n.push(t[0]+": "+t[1]),t=e.next();return n.join(`\r
`)};function bs(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});var BE=N.JSON.parse;function J(n){le.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ym,this.L=this.M=!1}he(J,le);var Ym="",jE=/^https?$/i,zE=["POST","PUT"];v=J.prototype;v.Oa=function(n){this.M=n};v.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():bu.g(),this.C=this.u?sm(this.u):sm(bu),this.g.onreadystatechange=Te(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(i){am(this,i);return}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let i of r.keys())t.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(t.keys()).find(i=>i.toLowerCase()=="content-type"),s=N.FormData&&n instanceof N.FormData,!(0<=dm(zE,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[i,o]of t)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Zm(this),0<this.B&&((this.L=GE(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Te(this.ua,this)):this.A=zu(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(i){am(this,i)}};function GE(n){return vr&&typeof n.timeout=="number"&&n.ontimeout!==void 0}v.ua=function(){typeof Nu<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_e(this,"timeout"),this.abort(8))};function am(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Jm(n),So(n)}function Jm(n){n.F||(n.F=!0,_e(n,"complete"),_e(n,"error"))}v.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,_e(this,"complete"),_e(this,"abort"),So(this))};v.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),So(this,!0)),J.$.N.call(this)};v.La=function(){this.s||(this.G||this.v||this.l?Xm(this):this.kb())};v.kb=function(){Xm(this)};function Xm(n){if(n.h&&typeof Nu<"u"&&(!n.C[1]||ut(n)!=4||n.da()!=2)){if(n.v&&ut(n)==4)zu(n.La,0,n);else if(_e(n,"readystatechange"),ut(n)==4){n.h=!1;try{let o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=o===0){var s=String(n.I).match(qm)[1]||null;!s&&N.self&&N.self.location&&(s=N.self.location.protocol.slice(0,-1)),r=!jE.test(s?s.toLowerCase():"")}t=r}if(t)_e(n,"complete"),_e(n,"success");else{n.m=6;try{var i=2<ut(n)?n.g.statusText:""}catch{i=""}n.j=i+" ["+n.da()+"]",Jm(n)}}finally{So(n)}}}}function So(n,e){if(n.g){Zm(n);let t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||_e(n,"ready");try{t.onreadystatechange=r}catch{}}}function Zm(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(N.clearTimeout(n.A),n.A=null)}v.isActive=function(){return!!this.g};function ut(n){return n.g?n.g.readyState:0}v.da=function(){try{return 2<ut(this)?this.g.status:-1}catch{return-1}};v.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};v.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&e.indexOf(n)==0&&(e=e.substring(n.length)),BE(e)}};function cm(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Ym:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function $E(n){let e={};n=(n.g&&2<=ut(n)&&n.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<n.length;r++){if(ys(n[r]))continue;var t=_E(n[r]);let s=t[0];if(t=t[1],typeof t!="string")continue;t=t.trim();let i=e[s]||[];e[s]=i,i.push(t)}fE(e,function(r){return r.join(", ")})}v.Ia=function(){return this.m};v.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function ep(n){let e="";return Lu(n,function(t,r){e+=r,e+=":",e+=t,e+=`\r
`}),e}function Qu(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=ep(t),typeof n=="string"?t!=null&&encodeURIComponent(String(t)):H(n,e,t))}function fs(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function tp(n){this.Ga=0,this.j=[],this.l=new wo,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=fs("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=fs("baseRetryDelayMs",5e3,n),this.hb=fs("retryDelaySeedMs",1e4,n),this.eb=fs("forwardChannelMaxRetries",2,n),this.xa=fs("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Gm(n&&n.concurrentRequestLimit),this.Ja=new UE,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}v=tp.prototype;v.ra=8;v.H=1;function Yu(n){if(np(n),n.H==3){var e=n.W++,t=Pt(n.I);if(H(t,"SID",n.K),H(t,"RID",e),H(t,"TYPE","terminate"),Os(n,t),e=new ks(n,n.l,e),e.L=2,e.A=Ao(Pt(t)),t=!1,N.navigator&&N.navigator.sendBeacon)try{t=N.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&N.Image&&(new Image().src=e.A,t=!0),t||(e.g=lp(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Ds(e)}cp(n)}function Ro(n){n.g&&(Xu(n),n.g.cancel(),n.g=null)}function np(n){Ro(n),n.u&&(N.clearTimeout(n.u),n.u=null),uo(n),n.i.cancel(),n.m&&(typeof n.m=="number"&&N.clearTimeout(n.m),n.m=null)}function Co(n){if(!$m(n.i)&&!n.m){n.m=!0;var e=n.Na;Is||Am(),vs||(Is(),vs=!0),Bu.add(e,n),n.C=0}}function KE(n,e){return Km(n.i)>=n.i.j-(n.m?1:0)?!1:n.m?(n.j=e.F.concat(n.j),!0):n.H==1||n.H==2||n.C>=(n.cb?0:n.eb)?!1:(n.m=Cs(Te(n.Na,n,e),ap(n,n.C)),n.C++,!0)}v.Na=function(n){if(this.m)if(this.m=null,this.H==1){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;let s=new ks(this,this.l,n),i=this.s;if(this.U&&(i?(i=gm(i),_m(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){t:{var r=this.j[t];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=t;break e}if(e===4096||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=rp(this,s,e),t=Pt(this.I),H(t,"RID",n),H(t,"CVER",22),this.F&&H(t,"X-HTTP-Session-Id",this.F),Os(this,t),i&&(this.O?e="headers="+encodeURIComponent(String(ep(i)))+"&"+e:this.o&&Qu(t,this.o,i)),Hu(this.i,s),this.bb&&H(t,"TYPE","init"),this.P?(H(t,"$req",e),H(t,"SID","null"),s.aa=!0,Ru(s,t,null)):Ru(s,t,e),this.H=2}}else this.H==3&&(n?um(this,n):this.j.length==0||$m(this.i)||um(this))};function um(n,e){var t;e?t=e.m:t=n.W++;let r=Pt(n.I);H(r,"SID",n.K),H(r,"RID",t),H(r,"AID",n.V),Os(n,r),n.o&&n.s&&Qu(r,n.o,n.s),t=new ks(n,n.l,t,n.C+1),n.o===null&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=rp(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Hu(n.i,t),Ru(t,r,e)}function Os(n,e){n.na&&Lu(n.na,function(t,r){H(e,r,t)}),n.h&&Fm({},function(t,r){H(e,r,t)})}function rp(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Te(n.h.Va,n.h,n):null;e:{var s=n.j;let i=-1;for(;;){let o=["count="+t];i==-1?0<t?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let c=0;c<t;c++){let u=s[c].g,l=s[c].map;if(u-=i,0>u)i=Math.max(0,s[c].g-100),a=!1;else try{FE(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function sp(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Is||Am(),vs||(Is(),vs=!0),Bu.add(e,n),n.A=0}}function Ju(n){return n.g||n.u||3<=n.A?!1:(n.ba++,n.u=Cs(Te(n.Ma,n),ap(n,n.A)),n.A++,!0)}v.Ma=function(){if(this.u=null,ip(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Cs(Te(this.jb,this),n)}};v.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,De(10),Ro(this),ip(this))};function Xu(n){n.B!=null&&(N.clearTimeout(n.B),n.B=null)}function ip(n){n.g=new ks(n,n.l,"rpc",n.ba),n.o===null&&(n.g.I=n.s),n.g.O=0;var e=Pt(n.wa);H(e,"RID","rpc"),H(e,"SID",n.K),H(e,"AID",n.V),H(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&H(e,"TO",n.qa),H(e,"TYPE","xmlhttp"),Os(n,e),n.o&&n.s&&Qu(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=Ao(Pt(e)),t.u=null,t.S=!0,Lm(t,n)}v.ib=function(){this.v!=null&&(this.v=null,Ro(this),Ju(this),De(19))};function uo(n){n.v!=null&&(N.clearTimeout(n.v),n.v=null)}function op(n,e){var t=null;if(n.g==e){uo(n),Xu(n),n.g=null;var r=2}else if(Pu(n.i,e))t=e.F,Hm(n.i,e),r=1;else return;if(n.H!=0){if(e.i)if(r==1){t=e.u?e.u.length:0,e=Date.now()-e.G;var s=n.C;r=Io(),_e(r,new km(r,t)),Co(n)}else sp(n);else if(s=e.s,s==3||s==0&&0<e.ca||!(r==1&&KE(n,e)||r==2&&Ju(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:Cn(n,5);break;case 4:Cn(n,10);break;case 3:Cn(n,6);break;default:Cn(n,2)}}}function ap(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Cn(n,e){if(n.l.info("Error code "+e),e==2){var t=null;n.h&&(t=null);var r=Te(n.pb,n);t||(t=new Pn("//www.google.com/images/cleardot.gif"),N.location&&N.location.protocol=="http"||ao(t,"https"),Ao(t)),qE(t.toString(),r)}else De(2);n.H=0,n.h&&n.h.za(e),cp(n),np(n)}v.pb=function(n){n?(this.l.info("Successfully pinged google.com"),De(2)):(this.l.info("Failed to ping google.com"),De(1))};function cp(n){if(n.H=0,n.ma=[],n.h){let e=Wm(n.i);(e.length!=0||n.j.length!=0)&&(em(n.ma,e),em(n.ma,n.j),n.i.i.length=0,xu(n.j),n.j.length=0),n.h.ya()}}function up(n,e,t){var r=t instanceof Pn?Pt(t):new Pn(t);if(r.g!="")e&&(r.g=e+"."+r.g),co(r,r.m);else{var s=N.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new Pn(null);r&&ao(i,r),e&&(i.g=e),s&&co(i,s),t&&(i.l=t),r=i}return t=n.F,e=n.Da,t&&e&&H(r,t,e),H(r,"VER",n.ra),Os(n,r),r}function lp(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n.Ha&&!n.va?new J(new Ns({ob:t})):new J(n.va),e.Oa(n.J),e}v.isActive=function(){return!!this.h&&this.h.isActive(this)};function hp(){}v=hp.prototype;v.Ba=function(){};v.Aa=function(){};v.za=function(){};v.ya=function(){};v.isActive=function(){return!0};v.Va=function(){};function lo(){if(vr&&!(10<=Number(uE)))throw Error("Environmental error: no available transport.")}lo.prototype.g=function(n,e){return new Ue(n,e)};function Ue(n,e){le.call(this),this.g=new tp(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!ys(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ys(e)&&(this.g.F=e,n=this.h,n!==null&&e in n&&(n=this.h,e in n&&delete n[e])),this.j=new Tr(this)}he(Ue,le);Ue.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;De(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=up(n,null,n.Y),Co(n)};Ue.prototype.close=function(){Yu(this.g)};Ue.prototype.u=function(n){var e=this.g;if(typeof n=="string"){var t={};t.__data__=n,n=t}else this.v&&(t={},t.__data__=qu(n),n=t);e.j.push(new LE(e.fb++,n)),e.H==3&&Co(e)};Ue.prototype.N=function(){this.g.h=null,delete this.j,Yu(this.g),delete this.g,Ue.$.N.call(this)};function dp(n){$u.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(let t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=e!==null&&n in e?e[n]:void 0),this.data=e}else this.data=n}he(dp,$u);function fp(){Ku.call(this),this.status=1}he(fp,Ku);function Tr(n){this.g=n}he(Tr,hp);Tr.prototype.Ba=function(){_e(this.g,"a")};Tr.prototype.Aa=function(n){_e(this.g,new dp(n))};Tr.prototype.za=function(n){_e(this.g,new fp)};Tr.prototype.ya=function(){_e(this.g,"b")};function HE(){this.blockSize=-1}function Ye(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}he(Ye,HE);Ye.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function pu(n,e,t){t||(t=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;e=n.g[0],t=n.g[1],s=n.g[2];var i=n.g[3],o=e+(i^t&(s^i))+r[0]+3614090360&4294967295;e=t+(o<<7&4294967295|o>>>25),o=i+(s^e&(t^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(t^i&(e^t))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=t+(e^s&(i^e))+r[3]+3250441966&4294967295,t=s+(o<<22&4294967295|o>>>10),o=e+(i^t&(s^i))+r[4]+4118548399&4294967295,e=t+(o<<7&4294967295|o>>>25),o=i+(s^e&(t^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(t^i&(e^t))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=t+(e^s&(i^e))+r[7]+4249261313&4294967295,t=s+(o<<22&4294967295|o>>>10),o=e+(i^t&(s^i))+r[8]+1770035416&4294967295,e=t+(o<<7&4294967295|o>>>25),o=i+(s^e&(t^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(t^i&(e^t))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=t+(e^s&(i^e))+r[11]+2304563134&4294967295,t=s+(o<<22&4294967295|o>>>10),o=e+(i^t&(s^i))+r[12]+1804603682&4294967295,e=t+(o<<7&4294967295|o>>>25),o=i+(s^e&(t^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(t^i&(e^t))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=t+(e^s&(i^e))+r[15]+1236535329&4294967295,t=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(t^s))+r[1]+4129170786&4294967295,e=t+(o<<5&4294967295|o>>>27),o=i+(t^s&(e^t))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^t&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=t+(i^e&(s^i))+r[0]+3921069994&4294967295,t=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(t^s))+r[5]+3593408605&4294967295,e=t+(o<<5&4294967295|o>>>27),o=i+(t^s&(e^t))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^t&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=t+(i^e&(s^i))+r[4]+3889429448&4294967295,t=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(t^s))+r[9]+568446438&4294967295,e=t+(o<<5&4294967295|o>>>27),o=i+(t^s&(e^t))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^t&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=t+(i^e&(s^i))+r[8]+1163531501&4294967295,t=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(t^s))+r[13]+2850285829&4294967295,e=t+(o<<5&4294967295|o>>>27),o=i+(t^s&(e^t))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^t&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=t+(i^e&(s^i))+r[12]+2368359562&4294967295,t=s+(o<<20&4294967295|o>>>12),o=e+(t^s^i)+r[5]+4294588738&4294967295,e=t+(o<<4&4294967295|o>>>28),o=i+(e^t^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^t)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=t+(s^i^e)+r[14]+4259657740&4294967295,t=s+(o<<23&4294967295|o>>>9),o=e+(t^s^i)+r[1]+2763975236&4294967295,e=t+(o<<4&4294967295|o>>>28),o=i+(e^t^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^t)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=t+(s^i^e)+r[10]+3200236656&4294967295,t=s+(o<<23&4294967295|o>>>9),o=e+(t^s^i)+r[13]+681279174&4294967295,e=t+(o<<4&4294967295|o>>>28),o=i+(e^t^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^t)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=t+(s^i^e)+r[6]+76029189&4294967295,t=s+(o<<23&4294967295|o>>>9),o=e+(t^s^i)+r[9]+3654602809&4294967295,e=t+(o<<4&4294967295|o>>>28),o=i+(e^t^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^t)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=t+(s^i^e)+r[2]+3299628645&4294967295,t=s+(o<<23&4294967295|o>>>9),o=e+(s^(t|~i))+r[0]+4096336452&4294967295,e=t+(o<<6&4294967295|o>>>26),o=i+(t^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~t))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=t+(i^(s|~e))+r[5]+4237533241&4294967295,t=s+(o<<21&4294967295|o>>>11),o=e+(s^(t|~i))+r[12]+1700485571&4294967295,e=t+(o<<6&4294967295|o>>>26),o=i+(t^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~t))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=t+(i^(s|~e))+r[1]+2240044497&4294967295,t=s+(o<<21&4294967295|o>>>11),o=e+(s^(t|~i))+r[8]+1873313359&4294967295,e=t+(o<<6&4294967295|o>>>26),o=i+(t^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~t))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=t+(i^(s|~e))+r[13]+1309151649&4294967295,t=s+(o<<21&4294967295|o>>>11),o=e+(s^(t|~i))+r[4]+4149444226&4294967295,e=t+(o<<6&4294967295|o>>>26),o=i+(t^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~t))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=t+(i^(s|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+i&4294967295}Ye.prototype.j=function(n,e){e===void 0&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=t;)pu(this,n,i),i+=this.blockSize;if(typeof n=="string"){for(;i<e;)if(r[s++]=n.charCodeAt(i++),s==this.blockSize){pu(this,r),s=0;break}}else for(;i<e;)if(r[s++]=n[i++],s==this.blockSize){pu(this,r),s=0;break}}this.h=s,this.i+=e};Ye.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=t&255,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};function j(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var i=n[s]|0;r&&i==e||(t[s]=i,r=!1)}this.g=t}var WE={};function Zu(n){return-128<=n&&128>n?oE(n,function(e){return new j([e|0],0>e?-1:0)}):new j([n|0],0>n?-1:0)}function lt(n){if(isNaN(n)||!isFinite(n))return Ir;if(0>n)return ge(lt(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=ku;return new j(e,0)}function mp(n,e){if(n.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(n.charAt(0)=="-")return ge(mp(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=lt(Math.pow(e,8)),r=Ir,s=0;s<n.length;s+=8){var i=Math.min(8,n.length-s),o=parseInt(n.substring(s,s+i),e);8>i?(i=lt(Math.pow(e,i)),r=r.R(i).add(lt(o))):(r=r.R(t),r=r.add(lt(o)))}return r}var ku=4294967296,Ir=Zu(0),Du=Zu(1),lm=Zu(16777216);v=j.prototype;v.ea=function(){if(Ge(this))return-ge(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:ku+r)*e,e*=ku}return n};v.toString=function(n){if(n=n||10,2>n||36<n)throw Error("radix out of range: "+n);if(Ct(this))return"0";if(Ge(this))return"-"+ge(this).toString(n);for(var e=lt(Math.pow(n,6)),t=this,r="";;){var s=fo(t,e).g;t=ho(t,s.R(e));var i=((0<t.g.length?t.g[0]:t.h)>>>0).toString(n);if(t=s,Ct(t))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};v.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h};function Ct(n){if(n.h!=0)return!1;for(var e=0;e<n.g.length;e++)if(n.g[e]!=0)return!1;return!0}function Ge(n){return n.h==-1}v.X=function(n){return n=ho(this,n),Ge(n)?-1:Ct(n)?0:1};function ge(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new j(t,~n.h).add(Du)}v.abs=function(){return Ge(this)?ge(this):this};v.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(n.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,t[s]=o<<16|i}return new j(t,t[t.length-1]&-2147483648?-1:0)};function ho(n,e){return n.add(ge(e))}v.R=function(n){if(Ct(this)||Ct(n))return Ir;if(Ge(this))return Ge(n)?ge(this).R(ge(n)):ge(ge(this).R(n));if(Ge(n))return ge(this.R(ge(n)));if(0>this.X(lm)&&0>n.X(lm))return lt(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=n.D(s)>>>16,c=n.D(s)&65535;t[2*r+2*s]+=o*c,oo(t,2*r+2*s),t[2*r+2*s+1]+=i*c,oo(t,2*r+2*s+1),t[2*r+2*s+1]+=o*a,oo(t,2*r+2*s+1),t[2*r+2*s+2]+=i*a,oo(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new j(t,0)};function oo(n,e){for(;(n[e]&65535)!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function ms(n,e){this.g=n,this.h=e}function fo(n,e){if(Ct(e))throw Error("division by zero");if(Ct(n))return new ms(Ir,Ir);if(Ge(n))return e=fo(ge(n),e),new ms(ge(e.g),ge(e.h));if(Ge(e))return e=fo(n,ge(e)),new ms(ge(e.g),e.h);if(30<n.g.length){if(Ge(n)||Ge(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Du,r=e;0>=r.X(n);)t=hm(t),r=hm(r);var s=yr(t,1),i=yr(r,1);for(r=yr(r,2),t=yr(t,2);!Ct(r);){var o=i.add(r);0>=o.X(n)&&(s=s.add(t),i=o),r=yr(r,1),t=yr(t,1)}return e=ho(n,s.R(e)),new ms(s,e)}for(s=Ir;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=Math.ceil(Math.log(t)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=lt(t),o=i.R(e);Ge(o)||0<o.X(n);)t-=r,i=lt(t),o=i.R(e);Ct(i)&&(i=Du),s=s.add(i),n=ho(n,o)}return new ms(s,n)}v.gb=function(n){return fo(this,n).h};v.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new j(t,this.h&n.h)};v.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new j(t,this.h|n.h)};v.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new j(t,this.h^n.h)};function hm(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new j(t,n.h)}function yr(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],i=0;i<r;i++)s[i]=0<e?n.D(i+t)>>>e|n.D(i+t+1)<<32-e:n.D(i+t);return new j(s,n.h)}lo.prototype.createWebChannel=lo.prototype.g;Ue.prototype.send=Ue.prototype.u;Ue.prototype.open=Ue.prototype.m;Ue.prototype.close=Ue.prototype.close;vo.NO_ERROR=0;vo.TIMEOUT=8;vo.HTTP_ERROR=6;Dm.COMPLETE="complete";Nm.EventType=Ps;Ps.OPEN="a";Ps.CLOSE="b";Ps.ERROR="c";Ps.MESSAGE="d";le.prototype.listen=le.prototype.O;J.prototype.listenOnce=J.prototype.P;J.prototype.getLastError=J.prototype.Sa;J.prototype.getLastErrorCode=J.prototype.Ia;J.prototype.getStatus=J.prototype.da;J.prototype.getResponseJson=J.prototype.Wa;J.prototype.getResponseText=J.prototype.ja;J.prototype.send=J.prototype.ha;J.prototype.setWithCredentials=J.prototype.Oa;Ye.prototype.digest=Ye.prototype.l;Ye.prototype.reset=Ye.prototype.reset;Ye.prototype.update=Ye.prototype.j;j.prototype.add=j.prototype.add;j.prototype.multiply=j.prototype.R;j.prototype.modulo=j.prototype.gb;j.prototype.compare=j.prototype.X;j.prototype.toNumber=j.prototype.ea;j.prototype.toString=j.prototype.toString;j.prototype.getBits=j.prototype.D;j.fromNumber=lt;j.fromString=mp;var pp=Je.createWebChannelTransport=function(){return new lo},gp=Je.getStatEventTarget=function(){return Io()},Po=Je.ErrorCode=vo,_p=Je.EventType=Dm,yp=Je.Event=kn,el=Je.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},tC=Je.FetchXmlHttpFactory=Ns,Ls=Je.WebChannel=Nm,wp=Je.XhrIo=J,Ip=Je.Md5=Ye,Dn=Je.Integer=j;var vp="@firebase/firestore";var oe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};oe.UNAUTHENTICATED=new oe(null),oe.GOOGLE_CREDENTIALS=new oe("google-credentials-uid"),oe.FIRST_PARTY=new oe("first-party-uid"),oe.MOCK_USER=new oe("mock-user");var es="10.7.2";var qn=new jt("@firebase/firestore");function Cr(){return qn.logLevel}function w(n,...e){if(qn.logLevel<=U.DEBUG){let t=e.map(nd);qn.debug(`Firestore (${es}): ${n}`,...t)}}function Ne(n,...e){if(qn.logLevel<=U.ERROR){let t=e.map(nd);qn.error(`Firestore (${es}): ${n}`,...t)}}function Mr(n,...e){if(qn.logLevel<=U.WARN){let t=e.map(nd);qn.warn(`Firestore (${es}): ${n}`,...t)}}function nd(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function S(n="Unexpected state"){let e=`FIRESTORE (${es}) INTERNAL ASSERTION FAILED: `+n;throw Ne(e),new Error(e)}function R(n,e){n||S()}function D(n,e){return n}var p={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},I=class extends me{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Me=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Fo=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},il=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(oe.UNAUTHENTICATED))}shutdown(){}},ol=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},al=class{constructor(e){this.t=e,this.currentUser=oe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,s=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),i=new Me;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Me,e.enqueueRetryable(()=>s(this.currentUser))};let o=()=>{let c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{w("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(w("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Me)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(w("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(R(typeof r.accessToken=="string"),new Fo(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return R(e===null||typeof e=="string"),new oe(e)}},cl=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=oe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ul=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new cl(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(oe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ll=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},hl=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=i=>{i.error!=null&&w("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);let o=i.token!==this.R;return this.R=i.token,w("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};let s=i=>{w("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){let i=this.A.getImmediate({optional:!0});i?s(i):w("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(R(typeof t.token=="string"),this.R=t.token,new ll(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function QE(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var qo=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let s=QE(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%e.length))}return r}};function x(n,e){return n<e?-1:n>e?1:0}function Ur(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function wg(n){return n+"\0"}var te=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new I(p.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new I(p.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new I(p.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new I(p.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?x(this.nanoseconds,e.nanoseconds):x(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var k=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new te(0,0))}static max(){return new n(new te(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Bo=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&S(),r===void 0?r=e.length-t:r>e.length-t&&S(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let s=0;s<r;s++){let i=e.get(s),o=t.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},B=class n extends Bo{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new I(p.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new n(t)}static emptyPath(){return new n([])}},YE=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ae=class n extends Bo{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return YE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",s=0,i=()=>{if(r.length===0)throw new I(p.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;s<e.length;){let a=e[s];if(a==="\\"){if(s+1===e.length)throw new I(p.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new I(p.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new I(p.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var E=class n{constructor(e){this.path=e}static fromPath(e){return new n(B.fromString(e))}static fromName(e){return new n(B.fromString(e).popFirst(5))}static empty(){return new n(B.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&B.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return B.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new B(e.slice()))}};var Fr=class{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}};function dl(n){return n.fields.find(e=>e.kind===2)}function xn(n){return n.fields.filter(e=>e.kind!==2)}Fr.UNKNOWN_ID=-1;var xr=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Ks=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,He.min())}};function JE(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=k.fromTimestamp(r===1e9?new te(t+1,0):new te(t,r));return new He(s,E.empty(),e)}function Ig(n){return new He(n.readTime,n.key,-1)}var He=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(k.min(),E.empty(),-1)}static max(){return new n(k.max(),E.empty(),-1)}};function rd(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=E.comparator(n.documentKey,e.documentKey),t!==0?t:x(n.largestBatchId,e.largestBatchId))}var vg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",jo=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Xn(n){if(n.code!==p.FAILED_PRECONDITION||n.message!==vg)throw n;w("LocalStore","Unexpectedly lost primary lease")}var m=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&S(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&t()},c=>r(c))}),o=!0,i===s&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(s=>s?n.resolve(s):r());return t}static forEach(e,t){let r=[];return e.forEach((s,i)=>{r.push(t.call(this,s,i))}),this.waitFor(r)}static mapArray(e,t){return new n((r,s)=>{let i=e.length,o=new Array(i),a=0;for(let c=0;c<i;c++){let u=c;t(e[u]).next(l=>{o[u]=l,++a,a===i&&r(o)},l=>s(l))}})}static doWhile(e,t){return new n((r,s)=>{let i=()=>{e()===!0?t().next(()=>{i()},s):r()};i()})}};var zo=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Me,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Fn(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let s=sd(r.target.error);this.V.reject(new Fn(e,s))}}static open(e,t,r,s){try{return new n(t,e.transaction(s,r))}catch(i){throw new Fn(t,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(w("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new ml(t)}},Bn=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Y())===12.2&&Ne("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return w("SimpleDb","Removing database:",e),On(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Yi())return!1;if(n.C())return!0;let e=Y(),t=n.S(e),r=0<t&&t<10,s=n.v(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(w("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{let s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{let o=i.target.result;t(o)},s.onblocked=()=>{r(new Fn(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{let o=i.target.error;o.name==="VersionError"?r(new I(p.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new I(p.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Fn(e,o))},s.onupgradeneeded=i=>{w("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);let o=i.target.result;this.p.N(o,s.transaction,i.oldVersion,this.version).next(()=>{w("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=t=>this.B(t)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){let i=t==="readonly",o=0;for(;;){++o;try{this.db=await this.O(e);let a=zo.open(this.db,e,i?"readonly":"readwrite",r),c=s(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),m.reject(u))).toPromise();return c.catch(()=>{}),await a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&o<3;if(w("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}},fl=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return On(this.k.delete())}},Fn=class extends I{constructor(e,t){super(p.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function un(n){return n.name==="IndexedDbTransactionError"}var ml=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(w("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(w("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),On(r)}add(e){return w("SimpleDb","ADD",this.store.name,e,e),On(this.store.add(e))}get(e){return On(this.store.get(e)).next(t=>(t===void 0&&(t=null),w("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return w("SimpleDb","DELETE",this.store.name,e),On(this.store.delete(e))}count(){return w("SimpleDb","COUNT",this.store.name),On(this.store.count())}W(e,t){let r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){let i=s.getAll(r.range);return new m((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{let i=this.cursor(r),o=[];return this.G(i,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new m((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}H(e,t){w("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.J=!1;let s=this.cursor(r);return this.G(s,(i,o,a)=>a.delete())}Y(e,t){let r;t?r=e:(r={},t=e);let s=this.cursor(r);return this.G(s,t)}Z(e){let t=this.cursor({});return new m((r,s)=>{t.onerror=i=>{let o=sd(i.target.error);s(o)},t.onsuccess=i=>{let o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,t){let r=[];return new m((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void s();let c=new fl(a),u=t(a.primaryKey,a.value,c);if(u instanceof m){let l=u.catch(h=>(c.done(),m.reject(h)));r.push(l)}c.isDone?s():c.$===null?a.continue():a.continue(c.$)}}).next(()=>m.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function On(n){return new m((e,t)=>{n.onsuccess=r=>{let s=r.target.result;e(s)},n.onerror=r=>{let s=sd(r.target.error);t(s)}})}var Ep=!1;function sd(n){let e=Bn.S(Y());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new I("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ep||(Ep=!0,setTimeout(()=>{throw r},0)),r}}return n}var pl=class{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){w("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{w("IndexBackfiller",`Documents written: ${await this.X.te()}`)}catch(t){un(t)?w("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await Xn(t)}await this.ee(6e4)})}},gl=class{constructor(e,t){this.localStore=e,this.persistence=t}async te(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.ne(t,e))}ne(e,t){let r=new Set,s=t,i=!0;return m.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return w("IndexBackfiller",`Processing collection: ${o}`),this.re(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>t-s)}re(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(i=>{let o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(s,i)).next(a=>(w("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}ie(e,t){let r=e;return t.changes.forEach((s,i)=>{let o=Ig(i);rd(o,r)>0&&(r=o)}),new He(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Ve=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.se(r),this.oe=r=>t.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.oe&&this.oe(e),e}};Ve._e=-1;function di(n){return n==null}function Hs(n){return n===0&&1/n==-1/0}function XE(n){return typeof n=="number"&&Number.isInteger(n)&&!Hs(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function xe(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Tp(e)),e=ZE(n.get(t),e);return Tp(e)}function ZE(n,e){let t=e,r=n.length;for(let s=0;s<r;s++){let i=n.charAt(s);switch(i){case"\0":t+="";break;case"":t+="";break;default:t+=i}}return t}function Tp(n){return n+""}function ht(n){let e=n.length;if(R(e>=2),e===2)return R(n.charAt(0)===""&&n.charAt(1)===""),B.emptyPath();let t=e-2,r=[],s="";for(let i=0;i<e;){let o=n.indexOf("",i);switch((o<0||o>t)&&S(),n.charAt(o+1)){case"":let a=n.substring(i,o),c;s.length===0?c=a:(s+=a,c=s,s=""),r.push(c);break;case"":s+=n.substring(i,o),s+="\0";break;case"":s+=n.substring(i,o+1);break;default:S()}i=o+2}return new B(r)}var Ap=["userId","batchId"];function Oo(n,e){return[n,xe(e)]}function Eg(n,e,t){return[n,xe(e),t]}var eT={},tT=["prefixPath","collectionGroup","readTime","documentId"],nT=["prefixPath","collectionGroup","documentId"],rT=["collectionGroup","readTime","prefixPath","documentId"],sT=["canonicalId","targetId"],iT=["targetId","path"],oT=["path","targetId"],aT=["collectionId","parent"],cT=["indexId","uid"],uT=["uid","sequenceNumber"],lT=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hT=["indexId","uid","orderedDocumentKey"],dT=["userId","collectionPath","documentId"],fT=["userId","collectionPath","largestBatchId"],mT=["userId","collectionGroup","largestBatchId"],Tg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pT=[...Tg,"documentOverlays"],Ag=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bg=Ag,gT=[...bg,"indexConfiguration","indexState","indexEntries"];var Ws=class extends jo{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}};function fe(n,e){let t=D(n);return Bn.M(t.ae,e)}function bp(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zn(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Sg(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Q=class n{constructor(e,t){this.comparator=e,this.root=t||ft.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nr(this.root,e,this.comparator,!0)}},Nr=class{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ft=class n{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??n.RED,this.left=s??n.EMPTY,this.right=i??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new n(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this,i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return n.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw S();let e=this.left.check();if(e!==this.right.check())throw S();return e+(this.isRed()?0:1)}};ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1;ft.EMPTY=new class{constructor(){this.size=0}get key(){throw S()}get value(){throw S()}get color(){throw S()}get left(){throw S()}get right(){throw S()}copy(e,t,r,s,i){return this}insert(e,t,r){return new ft(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var $=class n{constructor(e){this.comparator=e,this.data=new Q(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Go(this.data.getIterator())}getIteratorFrom(e){return new Go(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Go=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Ar(n){return n.hasNext()?n.getNext():void 0}var Fe=class n{constructor(e){this.fields=e,e.sort(ae.comparator)}static empty(){return new n([])}unionWith(e){let t=new $(ae.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ur(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var $o=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ce=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new $o("Invalid base64 string: "+i):i}}(e);return new n(t)}static fromUint8Array(e){let t=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return x(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ce.EMPTY_BYTE_STRING=new Ce("");var _T=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function en(n){if(R(!!n),typeof n=="string"){let e=0,t=_T.exec(n);if(R(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:X(n.seconds),nanos:X(n.nanos)}}function X(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function tn(n){return typeof n=="string"?Ce.fromBase64String(n):Ce.fromUint8Array(n)}function Na(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function id(n){let e=n.mapValue.fields.__previous_value__;return Na(e)?id(e):e}function Qs(n){let e=en(n.mapValue.fields.__local_write_time__.timestampValue);return new te(e.seconds,e.nanos)}var _l=class{constructor(e,t,r,s,i,o,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},qr=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Jt={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Lo={nullValue:"NULL_VALUE"};function jn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Na(n)?4:Rg(n)?9007199254740991:10:S()}function mt(n,e){if(n===e)return!0;let t=jn(n);if(t!==jn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qs(n).isEqual(Qs(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;let o=en(s.timestampValue),a=en(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,i){return tn(s.bytesValue).isEqual(tn(i.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,i){return X(s.geoPointValue.latitude)===X(i.geoPointValue.latitude)&&X(s.geoPointValue.longitude)===X(i.geoPointValue.longitude)}(n,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return X(s.integerValue)===X(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){let o=X(s.doubleValue),a=X(i.doubleValue);return o===a?Hs(o)===Hs(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Ur(n.arrayValue.values||[],e.arrayValue.values||[],mt);case 10:return function(s,i){let o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(bp(o)!==bp(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!mt(o[c],a[c])))return!1;return!0}(n,e);default:return S()}}function Ys(n,e){return(n.values||[]).find(t=>mt(t,e))!==void 0}function nn(n,e){if(n===e)return 0;let t=jn(n),r=jn(e);if(t!==r)return x(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return x(n.booleanValue,e.booleanValue);case 2:return function(i,o){let a=X(i.integerValue||i.doubleValue),c=X(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return Sp(n.timestampValue,e.timestampValue);case 4:return Sp(Qs(n),Qs(e));case 5:return x(n.stringValue,e.stringValue);case 6:return function(i,o){let a=tn(i),c=tn(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){let a=i.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=x(a[u],c[u]);if(l!==0)return l}return x(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){let a=x(X(i.latitude),X(o.latitude));return a!==0?a:x(X(i.longitude),X(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){let a=i.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=nn(a[u],c[u]);if(l)return l}return x(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Jt.mapValue&&o===Jt.mapValue)return 0;if(i===Jt.mapValue)return 1;if(o===Jt.mapValue)return-1;let a=i.fields||{},c=Object.keys(a),u=o.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let h=0;h<c.length&&h<l.length;++h){let d=x(c[h],l[h]);if(d!==0)return d;let f=nn(a[c[h]],u[l[h]]);if(f!==0)return f}return x(c.length,l.length)}(n.mapValue,e.mapValue);default:throw S()}}function Sp(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return x(n,e);let t=en(n),r=en(e),s=x(t.seconds,r.seconds);return s!==0?s:x(t.nanos,r.nanos)}function Br(n){return yl(n)}function yl(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=en(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return tn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return E.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(let i of t.values||[])s?s=!1:r+=",",r+=yl(i);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),s="{",i=!0;for(let o of r)i?i=!1:s+=",",s+=`${o}:${yl(t.fields[o])}`;return s+"}"}(n.mapValue):S()}function zn(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function wl(n){return!!n&&"integerValue"in n}function Js(n){return!!n&&"arrayValue"in n}function Rp(n){return!!n&&"nullValue"in n}function Cp(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vo(n){return!!n&&"mapValue"in n}function zs(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Zn(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=zs(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zs(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Rg(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function yT(n){return"nullValue"in n?Lo:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?zn(qr.empty(),E.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:S()}function wT(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?zn(qr.empty(),E.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Jt:S()}function Pp(n,e){let t=nn(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function kp(n,e){let t=nn(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Se=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Vo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zs(t)}setAll(e){let t=ae.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,s),r={},s=[],t=a.popLast()}o?r[a.lastSegment()]=zs(o):s.push(a.lastSegment())});let i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){let t=this.field(e.popLast());Vo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Vo(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Zn(t,(s,i)=>e[s]=i);for(let s of r)delete e[s]}clone(){return new n(zs(this.value))}};function Cg(n){let e=[];return Zn(n.fields,(t,r)=>{let s=new ae([t]);if(Vo(r)){let i=Cg(r.mapValue).fields;if(i.length===0)e.push(s);else for(let o of i)e.push(s.child(o))}else e.push(s)}),new Fe(e)}var ce=class n{constructor(e,t,r,s,i,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,k.min(),k.min(),k.min(),Se.empty(),0)}static newFoundDocument(e,t,r,s){return new n(e,1,t,k.min(),r,s,0)}static newNoDocument(e,t){return new n(e,2,t,k.min(),k.min(),Se.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,k.min(),k.min(),Se.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(k.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Se.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Se.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=k.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var pt=class{constructor(e,t){this.position=e,this.inclusive=t}};function Dp(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){let i=e[s],o=n.position[s];if(i.field.isKeyField()?r=E.comparator(E.fromName(o.referenceValue),t.key):r=nn(o,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Np(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mt(n.position[t],e.position[t]))return!1;return!0}var Gn=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function IT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ko=class{},F=class n extends Ko{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new El(e,t,r):t==="array-contains"?new bl(e,r):t==="in"?new Ho(e,r):t==="not-in"?new Sl(e,r):t==="array-contains-any"?new Rl(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Tl(e,r):new Al(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(nn(t,this.value)):t!==null&&jn(this.value)===jn(t)&&this.matchesComparison(nn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return S()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},z=class n extends Ko{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new n(e,t)}matches(e){return jr(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function jr(n){return n.op==="and"}function Il(n){return n.op==="or"}function od(n){return Pg(n)&&jr(n)}function Pg(n){for(let e of n.filters)if(e instanceof z)return!1;return!0}function vl(n){if(n instanceof F)return n.field.canonicalString()+n.op.toString()+Br(n.value);if(od(n))return n.filters.map(e=>vl(e)).join(",");{let e=n.filters.map(t=>vl(t)).join(",");return`${n.op}(${e})`}}function kg(n,e){return n instanceof F?function(r,s){return s instanceof F&&r.op===s.op&&r.field.isEqual(s.field)&&mt(r.value,s.value)}(n,e):n instanceof z?function(r,s){return s instanceof z&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&kg(o,s.filters[a]),!0):!1}(n,e):void S()}function Dg(n,e){let t=n.filters.concat(e);return z.create(t,n.op)}function Ng(n){return n instanceof F?function(t){return`${t.field.canonicalString()} ${t.op} ${Br(t.value)}`}(n):n instanceof z?function(t){return t.op.toString()+" {"+t.getFilters().map(Ng).join(" ,")+"}"}(n):"Filter"}var El=class extends F{constructor(e,t,r){super(e,t,r),this.key=E.fromName(r.referenceValue)}matches(e){let t=E.comparator(e.key,this.key);return this.matchesComparison(t)}},Tl=class extends F{constructor(e,t){super(e,"in",t),this.keys=xg("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Al=class extends F{constructor(e,t){super(e,"not-in",t),this.keys=xg("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function xg(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>E.fromName(r.referenceValue))}var bl=class extends F{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Js(t)&&Ys(t.arrayValue,this.value)}},Ho=class extends F{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Ys(this.value.arrayValue,t)}},Sl=class extends F{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ys(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Ys(this.value.arrayValue,t)}},Rl=class extends F{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Js(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ys(this.value.arrayValue,r))}};var Cl=class{constructor(e,t=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}};function Pl(n,e=null,t=[],r=[],s=null,i=null,o=null){return new Cl(n,e,t,r,s,i,o)}function $n(n){let e=D(n);if(e.ce===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>vl(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),di(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Br(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Br(r)).join(",")),e.ce=t}return e.ce}function fi(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!IT(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!kg(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Np(n.startAt,e.startAt)&&Np(n.endAt,e.endAt)}function Wo(n){return E.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Qo(n,e){return n.filters.filter(t=>t instanceof F&&t.field.isEqual(e))}function xp(n,e,t){let r=Lo,s=!0;for(let i of Qo(n,e)){let o=Lo,a=!0;switch(i.op){case"<":case"<=":o=yT(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Lo}Pp({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){let o=t.position[i];Pp({value:r,inclusive:s},{value:o,inclusive:t.inclusive})<0&&(r=o,s=t.inclusive);break}}return{value:r,inclusive:s}}function Op(n,e,t){let r=Jt,s=!0;for(let i of Qo(n,e)){let o=Jt,a=!0;switch(i.op){case">=":case">":o=wT(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=Jt}kp({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){let o=t.position[i];kp({value:r,inclusive:s},{value:o,inclusive:t.inclusive})>0&&(r=o,s=t.inclusive);break}}return{value:r,inclusive:s}}var Nt=class{constructor(e,t=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function vT(n,e,t,r,s,i,o,a){return new Nt(n,e,t,r,s,i,o,a)}function xa(n){return new Nt(n)}function Lp(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ad(n){return n.collectionGroup!==null}function Or(n){let e=D(n);if(e.le===null){e.le=[];let t=new Set;for(let i of e.explicitOrderBy)e.le.push(i),t.add(i.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new $(ae.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.le.push(new Gn(i,r))}),t.has(ae.keyField().canonicalString())||e.le.push(new Gn(ae.keyField(),r))}return e.le}function Ke(n){let e=D(n);return e.he||(e.he=Og(e,Or(n))),e.he}function Og(n,e){if(n.limitType==="F")return Pl(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{let i=s.dir==="desc"?"asc":"desc";return new Gn(s.field,i)});let t=n.endAt?new pt(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new pt(n.startAt.position,n.startAt.inclusive):null;return Pl(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function kl(n,e){let t=n.filters.concat([e]);return new Nt(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Yo(n,e,t){return new Nt(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Oa(n,e){return fi(Ke(n),Ke(e))&&n.limitType===e.limitType}function Lg(n){return`${$n(Ke(n))}|lt:${n.limitType}`}function Pr(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>Ng(s)).join(", ")}]`),di(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Br(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Br(s)).join(",")),`Target(${r})`}(Ke(n))}; limitType=${n.limitType})`}function mi(n,e){return e.isFoundDocument()&&function(r,s){let i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):E.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(n,e)&&function(r,s){for(let i of Or(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(n,e)&&function(r,s){for(let i of r.filters)if(!i.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(o,a,c){let u=Dp(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,Or(r),s)||r.endAt&&!function(o,a,c){let u=Dp(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,Or(r),s))}(n,e)}function ET(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Vg(n){return(e,t)=>{let r=!1;for(let s of Or(n)){let i=TT(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function TT(n,e,t){let r=n.field.isKeyField()?E.comparator(e.key,t.key):function(i,o,a){let c=o.data.field(i),u=a.data.field(i);return c!==null&&u!==null?nn(c,u):S()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return S()}}var gt=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Zn(this.inner,(t,r)=>{for(let[s,i]of r)e(s,i)})}isEmpty(){return Sg(this.inner)}size(){return this.innerSize}};var AT=new Q(E.comparator);function qe(){return AT}var Mg=new Q(E.comparator);function Bs(...n){let e=Mg;for(let t of n)e=e.insert(t.key,t);return e}function Ug(n){let e=Mg;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function dt(){return Gs()}function Fg(){return Gs()}function Gs(){return new gt(n=>n.toString(),(n,e)=>n.isEqual(e))}var bT=new Q(E.comparator),ST=new $(E.comparator);function V(...n){let e=ST;for(let t of n)e=e.add(t);return e}var RT=new $(x);function CT(){return RT}function qg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hs(e)?"-0":e}}function Bg(n){return{integerValue:""+n}}function PT(n,e){return XE(e)?Bg(e):qg(n,e)}var zr=class{constructor(){this._=void 0}};function kT(n,e,t){return n instanceof rn?function(s,i){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Na(i)&&(i=id(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof xt?zg(n,e):n instanceof sn?Gg(n,e):function(s,i){let o=jg(s,i),a=Vp(o)+Vp(s.Ie);return wl(o)&&wl(s.Ie)?Bg(a):qg(s.serializer,a)}(n,e)}function DT(n,e,t){return n instanceof xt?zg(n,e):n instanceof sn?Gg(n,e):t}function jg(n,e){return n instanceof Kn?function(r){return wl(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}var rn=class extends zr{},xt=class extends zr{constructor(e){super(),this.elements=e}};function zg(n,e){let t=$g(e);for(let r of n.elements)t.some(s=>mt(s,r))||t.push(r);return{arrayValue:{values:t}}}var sn=class extends zr{constructor(e){super(),this.elements=e}};function Gg(n,e){let t=$g(e);for(let r of n.elements)t=t.filter(s=>!mt(s,r));return{arrayValue:{values:t}}}var Kn=class extends zr{constructor(e,t){super(),this.serializer=e,this.Ie=t}};function Vp(n){return X(n.integerValue||n.doubleValue)}function $g(n){return Js(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Xs=class{constructor(e,t){this.field=e,this.transform=t}};function NT(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof xt&&s instanceof xt||r instanceof sn&&s instanceof sn?Ur(r.elements,s.elements,mt):r instanceof Kn&&s instanceof Kn?mt(r.Ie,s.Ie):r instanceof rn&&s instanceof rn}(n.transform,e.transform)}var Dl=class{constructor(e,t){this.version=e,this.transformResults=t}},Re=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Mo(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Gr=class{};function Kg(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new $r(n.key,Re.none()):new on(n.key,n.data,Re.none());{let t=n.data,r=Se.empty(),s=new $(ae.comparator);for(let i of e.fields)if(!s.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Xe(n.key,r,new Fe(s.toArray()),Re.none())}}function xT(n,e,t){n instanceof on?function(s,i,o){let a=s.value.clone(),c=Up(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Xe?function(s,i,o){if(!Mo(s.precondition,i))return void i.convertToUnknownDocument(o.version);let a=Up(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Hg(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function $s(n,e,t,r){return n instanceof on?function(i,o,a,c){if(!Mo(i.precondition,o))return a;let u=i.value.clone(),l=Fp(i.fieldTransforms,c,o);return u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Xe?function(i,o,a,c){if(!Mo(i.precondition,o))return a;let u=Fp(i.fieldTransforms,c,o),l=o.data;return l.setAll(Hg(i)),l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(n,e,t,r):function(i,o,a){return Mo(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function OT(n,e){let t=null;for(let r of n.fieldTransforms){let s=e.data.field(r.field),i=jg(r.transform,s||null);i!=null&&(t===null&&(t=Se.empty()),t.set(r.field,i))}return t||null}function Mp(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ur(r,s,(i,o)=>NT(i,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var on=class extends Gr{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}},Xe=class extends Gr{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function Hg(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Up(n,e,t){let r=new Map;R(n.length===t.length);for(let s=0;s<t.length;s++){let i=n[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,DT(o,a,t[s]))}return r}function Fp(n,e,t){let r=new Map;for(let s of n){let i=s.transform,o=t.data.field(s.field);r.set(s.field,kT(i,o,e))}return r}var $r=class extends Gr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Zs=class extends Gr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ei=class{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){let i=this.mutations[s];i.key.isEqual(e.key)&&xT(i,e,r[s])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=$s(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=$s(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Fg();return this.mutations.forEach(s=>{let i=e.get(s.key),o=i.overlayedDocument,a=this.applyToLocalView(o,i.mutatedFields);a=t.has(s.key)?null:a;let c=Kg(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(k.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),V())}isEqual(e){return this.batchId===e.batchId&&Ur(this.mutations,e.mutations,(t,r)=>Mp(t,r))&&Ur(this.baseMutations,e.baseMutations,(t,r)=>Mp(t,r))}},Nl=class n{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){R(e.mutations.length===r.length);let s=function(){return bT}(),i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new n(e,t,r,s)}};var ti=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var xl=class{constructor(e,t,r){this.alias=e,this.aggregateType=t,this.fieldPath=r}};var Ol=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ne,q;function Wg(n){switch(n){default:return S();case p.CANCELLED:case p.UNKNOWN:case p.DEADLINE_EXCEEDED:case p.RESOURCE_EXHAUSTED:case p.INTERNAL:case p.UNAVAILABLE:case p.UNAUTHENTICATED:return!1;case p.INVALID_ARGUMENT:case p.NOT_FOUND:case p.ALREADY_EXISTS:case p.PERMISSION_DENIED:case p.FAILED_PRECONDITION:case p.ABORTED:case p.OUT_OF_RANGE:case p.UNIMPLEMENTED:case p.DATA_LOSS:return!0}}function Qg(n){if(n===void 0)return Ne("GRPC error has no .code"),p.UNKNOWN;switch(n){case ne.OK:return p.OK;case ne.CANCELLED:return p.CANCELLED;case ne.UNKNOWN:return p.UNKNOWN;case ne.DEADLINE_EXCEEDED:return p.DEADLINE_EXCEEDED;case ne.RESOURCE_EXHAUSTED:return p.RESOURCE_EXHAUSTED;case ne.INTERNAL:return p.INTERNAL;case ne.UNAVAILABLE:return p.UNAVAILABLE;case ne.UNAUTHENTICATED:return p.UNAUTHENTICATED;case ne.INVALID_ARGUMENT:return p.INVALID_ARGUMENT;case ne.NOT_FOUND:return p.NOT_FOUND;case ne.ALREADY_EXISTS:return p.ALREADY_EXISTS;case ne.PERMISSION_DENIED:return p.PERMISSION_DENIED;case ne.FAILED_PRECONDITION:return p.FAILED_PRECONDITION;case ne.ABORTED:return p.ABORTED;case ne.OUT_OF_RANGE:return p.OUT_OF_RANGE;case ne.UNIMPLEMENTED:return p.UNIMPLEMENTED;case ne.DATA_LOSS:return p.DATA_LOSS;default:return S()}}(q=ne||(ne={}))[q.OK=0]="OK",q[q.CANCELLED=1]="CANCELLED",q[q.UNKNOWN=2]="UNKNOWN",q[q.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",q[q.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",q[q.NOT_FOUND=5]="NOT_FOUND",q[q.ALREADY_EXISTS=6]="ALREADY_EXISTS",q[q.PERMISSION_DENIED=7]="PERMISSION_DENIED",q[q.UNAUTHENTICATED=16]="UNAUTHENTICATED",q[q.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",q[q.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",q[q.ABORTED=10]="ABORTED",q[q.OUT_OF_RANGE=11]="OUT_OF_RANGE",q[q.UNIMPLEMENTED=12]="UNIMPLEMENTED",q[q.INTERNAL=13]="INTERNAL",q[q.UNAVAILABLE=14]="UNAVAILABLE",q[q.DATA_LOSS=15]="DATA_LOSS";var qp=null;function LT(){return new TextEncoder}var VT=new Dn([4294967295,4294967295],0);function Bp(n){let e=LT().encode(n),t=new Ip;return t.update(e),new Uint8Array(t.digest())}function jp(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Dn([t,r],0),new Dn([s,i],0)]}var Ll=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Un(`Invalid padding: ${t}`);if(r<0)throw new Un(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Un(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Un(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=Dn.fromNumber(this.Te)}de(e,t,r){let s=e.add(t.multiply(Dn.fromNumber(r)));return s.compare(VT)===1&&(s=new Dn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let t=Bp(e),[r,s]=jp(t);for(let i=0;i<this.hashCount;i++){let o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(e,t,r){let s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new n(i,s,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let t=Bp(e),[r,s]=jp(t);for(let i=0;i<this.hashCount;i++){let o=this.de(r,s,i);this.Re(o)}}Re(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Un=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Jo=class n{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let s=new Map;return s.set(e,ni.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(k.min(),s,new Q(x),qe(),V())}},ni=class n{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,V(),V(),V())}};var Lr=class{constructor(e,t,r,s){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=s}},Xo=class{constructor(e,t){this.targetId=e,this.fe=t}},Zo=class{constructor(e,t,r=Ce.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}},ea=class{constructor(){this.ge=0,this.pe=Gp(),this.ye=Ce.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=V(),t=V(),r=V();return this.pe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:S()}}),new ni(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=Gp()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,R(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},Vl=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=qe(),this.Qe=zp(),this.Ke=new Q(x)}$e(e){for(let t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(let t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{let r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:S()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,s)=>{this.je(s)&&t(s)})}Je(e){let t=e.targetId,r=e.fe.count,s=this.Ye(t);if(s){let i=s.target;if(Wo(i))if(r===0){let o=new E(i.path);this.We(t,o,ce.newNoDocument(o,k.min()))}else R(r===1);else{let o=this.Ze(t);if(o!==r){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,u)}qp?.tt(function(l,h,d,f,_){var y,g,T,C,b,A;let L={localCacheCount:l,existenceFilterCount:h.count,databaseId:d.database,projectId:d.projectId},O=h.unchangedNames;return O&&(L.bloomFilter={applied:_===0,hashCount:(y=O?.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(C=(T=(g=O?.bits)===null||g===void 0?void 0:g.bitmap)===null||T===void 0?void 0:T.length)!==null&&C!==void 0?C:0,padding:(A=(b=O?.bits)===null||b===void 0?void 0:b.padding)!==null&&A!==void 0?A:0,mightContain:K=>{var ue;return(ue=f?.mightContain(K))!==null&&ue!==void 0&&ue}}),L}(o,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let t=e.fe.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t,o,a;try{o=tn(r).toUint8Array()}catch(c){if(c instanceof $o)return Mr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Ll(o,s,i)}catch(c){return Mr(c instanceof Un?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){let r=this.Le.getRemoteKeysForTarget(t),s=0;return r.forEach(i=>{let o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.We(t,i,null),s++)}),s}it(e){let t=new Map;this.ke.forEach((i,o)=>{let a=this.Ye(o);if(a){if(i.current&&Wo(a.target)){let c=new E(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,ce.newNoDocument(c,e))}i.De&&(t.set(o,i.ve()),i.Fe())}});let r=V();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(e));let s=new Jo(e,t,this.Ke,this.qe,r);return this.qe=qe(),this.Qe=zp(),this.Ke=new Q(x),s}Ue(e,t){if(!this.je(e))return;let r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;let s=this.ze(e);this.st(e,t)?s.Me(t,1):s.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new ea,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new $(x),this.Qe=this.Qe.insert(e,t)),t}je(e){let t=this.Ye(e)!==null;return t||w("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){let t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new ea),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function zp(){return new Q(E.comparator)}function Gp(){return new Q(E.comparator)}var MT=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),UT=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),FT=(()=>({and:"AND",or:"OR"}))(),Ml=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Ul(n,e){return n.useProto3Json||di(e)?e:{value:e}}function Kr(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Yg(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function qT(n,e){return Kr(n,e.toTimestamp())}function de(n){return R(!!n),k.fromTimestamp(function(t){let r=en(t);return new te(r.seconds,r.nanos)}(n))}function cd(n,e){return Fl(n,e).canonicalString()}function Fl(n,e){let t=function(s){return new B(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Jg(n){let e=B.fromString(n);return R(i_(e)),e}function ri(n,e){return cd(n.databaseId,e.path)}function Dt(n,e){let t=Jg(e);if(t.get(1)!==n.databaseId.projectId)throw new I(p.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new I(p.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new E(e_(t))}function Xg(n,e){return cd(n.databaseId,e)}function Zg(n){let e=Jg(n);return e.length===4?B.emptyPath():e_(e)}function ql(n){return new B(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function e_(n){return R(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function $p(n,e,t){return{name:ri(n,e),fields:t.value.mapValue.fields}}function BT(n,e,t){let r=Dt(n,e.name),s=de(e.updateTime),i=e.createTime?de(e.createTime):k.min(),o=new Se({mapValue:{fields:e.fields}}),a=ce.newFoundDocument(r,s,i,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function jT(n,e){return"found"in e?function(r,s){R(!!s.found),s.found.name,s.found.updateTime;let i=Dt(r,s.found.name),o=de(s.found.updateTime),a=s.found.createTime?de(s.found.createTime):k.min(),c=new Se({mapValue:{fields:s.found.fields}});return ce.newFoundDocument(i,o,a,c)}(n,e):"missing"in e?function(r,s){R(!!s.missing),R(!!s.readTime);let i=Dt(r,s.missing),o=de(s.readTime);return ce.newNoDocument(i,o)}(n,e):S()}function zT(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:S()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,l){return u.useProto3Json?(R(l===void 0||typeof l=="string"),Ce.fromBase64String(l||"")):(R(l===void 0||l instanceof Uint8Array),Ce.fromUint8Array(l||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let l=u.code===void 0?p.UNKNOWN:Qg(u.code);return new I(l,u.message||"")}(o);t=new Zo(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let s=Dt(n,r.document.name),i=de(r.document.updateTime),o=r.document.createTime?de(r.document.createTime):k.min(),a=new Se({mapValue:{fields:r.document.fields}}),c=ce.newFoundDocument(s,i,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];t=new Lr(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let s=Dt(n,r.document),i=r.readTime?de(r.readTime):k.min(),o=ce.newNoDocument(s,i),a=r.removedTargetIds||[];t=new Lr([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let s=Dt(n,r.document),i=r.removedTargetIds||[];t=new Lr([],i,s,null)}else{if(!("filter"in e))return S();{e.filter;let r=e.filter;r.targetId;let{count:s=0,unchangedNames:i}=r,o=new Ol(s,i),a=r.targetId;t=new Xo(a,o)}}return t}function si(n,e){let t;if(e instanceof on)t={update:$p(n,e.key,e.value)};else if(e instanceof $r)t={delete:ri(n,e.key)};else if(e instanceof Xe)t={update:$p(n,e.key,e.data),updateMask:QT(e.fieldMask)};else{if(!(e instanceof Zs))return S();t={verify:ri(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){let a=o.transform;if(a instanceof rn)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof xt)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof sn)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Kn)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw S()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:qT(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:S()}(n,e.precondition)),t}function Bl(n,e){let t=e.currentDocument?function(i){return i.updateTime!==void 0?Re.updateTime(de(i.updateTime)):i.exists!==void 0?Re.exists(i.exists):Re.none()}(e.currentDocument):Re.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let c=null;if("setToServerValue"in a)R(a.setToServerValue==="REQUEST_TIME"),c=new rn;else if("appendMissingElements"in a){let l=a.appendMissingElements.values||[];c=new xt(l)}else if("removeAllFromArray"in a){let l=a.removeAllFromArray.values||[];c=new sn(l)}else"increment"in a?c=new Kn(o,a.increment):S();let u=ae.fromServerFormat(a.fieldPath);return new Xs(u,c)}(n,s)):[];if(e.update){e.update.name;let s=Dt(n,e.update.name),i=new Se({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let u=c.fieldPaths||[];return new Fe(u.map(l=>ae.fromServerFormat(l)))}(e.updateMask);return new Xe(s,i,o,t,r)}return new on(s,i,t,r)}if(e.delete){let s=Dt(n,e.delete);return new $r(s,t)}if(e.verify){let s=Dt(n,e.verify);return new Zs(s,t)}return S()}function GT(n,e){return n&&n.length>0?(R(e!==void 0),n.map(t=>function(s,i){let o=s.updateTime?de(s.updateTime):de(i);return o.isEqual(k.min())&&(o=de(i)),new Dl(o,s.transformResults||[])}(t,e))):[]}function t_(n,e){return{documents:[Xg(n,e.path)]}}function ud(n,e){let t={structuredQuery:{}},r=e.path,s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Xg(n,s);let i=function(u){if(u.length!==0)return s_(z.create(u,"and"))}(e.filters);i&&(t.structuredQuery.where=i);let o=function(u){if(u.length!==0)return u.map(l=>function(d){return{field:Qt(d.field),direction:KT(d.dir)}}(l))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=Ul(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ut:t,parent:s}}function n_(n){let e=Zg(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,s=null;if(r>0){R(r===1);let l=t.from[0];l.allDescendants?s=l.collectionId:e=e.child(l.collectionId)}let i=[];t.where&&(i=function(h){let d=r_(h);return d instanceof z&&od(d)?d.getFilters():[d]}(t.where));let o=[];t.orderBy&&(o=function(h){return h.map(d=>function(_){return new Gn(kr(_.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(d))}(t.orderBy));let a=null;t.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,di(d)?null:d}(t.limit));let c=null;t.startAt&&(c=function(h){let d=!!h.before,f=h.values||[];return new pt(f,d)}(t.startAt));let u=null;return t.endAt&&(u=function(h){let d=!h.before,f=h.values||[];return new pt(f,d)}(t.endAt)),vT(e,s,o,i,a,"F",c,u)}function $T(n,e){let t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return S()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function r_(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=kr(t.unaryFilter.field);return F.create(r,"==",{doubleValue:NaN});case"IS_NULL":let s=kr(t.unaryFilter.field);return F.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let i=kr(t.unaryFilter.field);return F.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=kr(t.unaryFilter.field);return F.create(o,"!=",{nullValue:"NULL_VALUE"});default:return S()}}(n):n.fieldFilter!==void 0?function(t){return F.create(kr(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return S()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return z.create(t.compositeFilter.filters.map(r=>r_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return S()}}(t.compositeFilter.op))}(n):S()}function KT(n){return MT[n]}function HT(n){return UT[n]}function WT(n){return FT[n]}function Qt(n){return{fieldPath:n.canonicalString()}}function kr(n){return ae.fromServerFormat(n.fieldPath)}function s_(n){return n instanceof F?function(t){if(t.op==="=="){if(Cp(t.value))return{unaryFilter:{field:Qt(t.field),op:"IS_NAN"}};if(Rp(t.value))return{unaryFilter:{field:Qt(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Cp(t.value))return{unaryFilter:{field:Qt(t.field),op:"IS_NOT_NAN"}};if(Rp(t.value))return{unaryFilter:{field:Qt(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qt(t.field),op:HT(t.op),value:t.value}}}(n):n instanceof z?function(t){let r=t.getFilters().map(s=>s_(s));return r.length===1?r[0]:{compositeFilter:{op:WT(t.op),filters:r}}}(n):S()}function QT(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function i_(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Hr=class n{constructor(e,t,r,s,i=k.min(),o=k.min(),a=Ce.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ta=class{constructor(e){this.ct=e}};function YT(n,e){let t;if(e.document)t=BT(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=E.fromSegments(e.noDocument.path),s=Wn(e.noDocument.readTime);t=ce.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return S();{let r=E.fromSegments(e.unknownDocument.path),s=Wn(e.unknownDocument.version);t=ce.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(s){let i=new te(s[0],s[1]);return k.fromTimestamp(i)}(e.readTime)),t}function Kp(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:na(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:ri(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Kr(i,o.version.toTimestamp()),createTime:Kr(i,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Hn(e.version)};else{if(!e.isUnknownDocument())return S();r.unknownDocument={path:t.path.toArray(),version:Hn(e.version)}}return r}function na(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Hn(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wn(n){let e=new te(n.seconds,n.nanoseconds);return k.fromTimestamp(e)}function Ln(n,e){let t=(e.baseMutations||[]).map(i=>Bl(n.ct,i));for(let i=0;i<e.mutations.length-1;++i){let o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){let a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}let r=e.mutations.map(i=>Bl(n.ct,i)),s=te.fromMillis(e.localWriteTimeMs);return new ei(e.batchId,s,t,r)}function js(n){let e=Wn(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Wn(n.lastLimboFreeSnapshotVersion):k.min(),r;return r=function(i){return i.documents!==void 0}(n.query)?function(i){return R(i.documents.length===1),Ke(xa(Zg(i.documents[0])))}(n.query):function(i){return Ke(n_(i))}(n.query),new Hr(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ce.fromBase64String(n.resumeToken))}function o_(n,e){let t=Hn(e.snapshotVersion),r=Hn(e.lastLimboFreeSnapshotVersion),s;s=Wo(e.target)?t_(n.ct,e.target):ud(n.ct,e.target).ut;let i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$n(e.target),readTime:t,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function a_(n){let e=n_({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Yo(e,e.limit,"L"):e}function tl(n,e){return new ti(e.largestBatchId,Bl(n.ct,e.overlayMutation))}function Hp(n,e){let t=e.path.lastSegment();return[n,xe(e.path.popLast()),t]}function Wp(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Hn(r.readTime),documentKey:xe(r.documentKey.path),largestBatchId:r.largestBatchId}}var jl=class{getBundleMetadata(e,t){return Qp(e).get(t).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Wn(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,t){return Qp(e).put(function(s){return{bundleId:s.id,createTime:Hn(de(s.createTime)),version:s.version}}(t))}getNamedQuery(e,t){return Yp(e).get(t).next(r=>{if(r)return function(i){return{name:i.name,query:a_(i.bundledQuery),readTime:Wn(i.readTime)}}(r)})}saveNamedQuery(e,t){return Yp(e).put(function(s){return{name:s.name,readTime:Hn(de(s.readTime)),bundledQuery:s.bundledQuery}}(t))}};function Qp(n){return fe(n,"bundles")}function Yp(n){return fe(n,"namedQueries")}var ra=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Vs(e).get(Hp(this.userId,t)).next(r=>r?tl(this.serializer,r):null)}getOverlays(e,t){let r=dt();return m.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,t,r){let s=[];return r.forEach((i,o)=>{let a=new ti(t,o);s.push(this.ht(e,a))}),m.waitFor(s)}removeOverlaysForBatchId(e,t,r){let s=new Set;t.forEach(o=>s.add(xe(o.getCollectionPath())));let i=[];return s.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Vs(e).H("collectionPathOverlayIndex",a))}),m.waitFor(i)}getOverlaysForCollection(e,t,r){let s=dt(),i=xe(t),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Vs(e).W("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let u=tl(this.serializer,c);s.set(u.getKey(),u)}return s})}getOverlaysForCollectionGroup(e,t,r,s){let i=dt(),o,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Vs(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,u,l)=>{let h=tl(this.serializer,u);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):l.done()}).next(()=>i)}ht(e,t){return Vs(e).put(function(s,i,o){let[a,c,u]=Hp(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:si(s.ct,o.mutation)}}(this.serializer,this.userId,t))}};function Vs(n){return fe(n,"documentOverlays")}var kt=class{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(X(e.integerValue));else if("doubleValue"in e){let r=X(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),Hs(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),typeof r=="string"?t.At(r):(t.At(`${r.seconds||""}`),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(tn(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?Rg(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):S()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){let r=e.fields||{};this.Et(t,55);for(let s of Object.keys(r))this.Rt(s,t),this.It(r[s],t)}wt(e,t){let r=e.values||[];this.Et(t,50);for(let s of r)this.It(s,t)}gt(e,t){this.Et(t,37),E.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}};kt.bt=new kt;function JT(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Jp(n){let e=64-function(r){let s=0;for(let i=0;i<8;++i){let o=JT(255&r[i]);if(s+=o,o!==8)break}return s}(n);return Math.ceil(e/8)}var zl=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let s=t.codePointAt(0);this.Ct(240|s>>>18),this.Ct(128|63&s>>>12),this.Ct(128|63&s>>>6),this.Ct(128|63&s)}}this.vt()}Nt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let s=t.codePointAt(0);this.Mt(240|s>>>18),this.Mt(128|63&s>>>12),this.Mt(128|63&s>>>6),this.Mt(128|63&s)}}this.xt()}Bt(e){let t=this.Lt(e),r=Jp(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}qt(e){let t=this.Lt(e),r=Jp(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){let t=function(i){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ct(e){let t=255&e;t===0?(this.Kt(0),this.Kt(255)):t===255?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}},Gl=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}},$l=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},Vn=class{constructor(){this.Gt=new zl,this.zt=new Gl(this.Gt),this.jt=new $l(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Mn=class n{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Jt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Ht(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=Xp(n.arrayValue,e.arrayValue),t!==0?t:(t=Xp(n.directionalValue,e.directionalValue),t!==0?t:E.comparator(n.documentKey,e.documentKey)))}function Xp(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var sa=class{constructor(e){this.Yt=new $((t,r)=>ae.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let t of e.filters){let r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(R(e.collectionGroup===this.collectionId),this.en)return!1;let t=dl(e);if(t!==void 0&&!this.nn(t))return!1;let r=xn(e),s=new Set,i=0,o=0;for(;i<r.length&&this.nn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!s.has(a.field.canonicalString())){let c=r[i];if(!this.rn(a,c)||!this.sn(this.Zt[o++],c))return!1}++i}for(;i<r.length;++i){let a=r[i];if(o>=this.Zt.length||!this.sn(this.Zt[o++],a))return!1}return!0}on(){if(this.en)return null;let e=new $(ae.comparator),t=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new xr(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new xr(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new xr(r.field,r.dir==="asc"?0:1)));return new Fr(Fr.UNKNOWN_ID,this.collectionId,t,Ks.empty())}nn(e){for(let t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function c_(n){var e,t;if(R(n instanceof F||n instanceof z),n instanceof F){if(n instanceof Ho){let s=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(i=>F.create(n.field,"==",i)))||[];return z.create(s,"or")}return n}let r=n.filters.map(s=>c_(s));return z.create(r,n.op)}function XT(n){if(n.getFilters().length===0)return[];let e=Wl(c_(n));return R(u_(e)),Kl(e)||Hl(e)?[e]:e.getFilters()}function Kl(n){return n instanceof F}function Hl(n){return n instanceof z&&od(n)}function u_(n){return Kl(n)||Hl(n)||function(t){if(t instanceof z&&Il(t)){for(let r of t.getFilters())if(!Kl(r)&&!Hl(r))return!1;return!0}return!1}(n)}function Wl(n){if(R(n instanceof F||n instanceof z),n instanceof F)return n;if(n.filters.length===1)return Wl(n.filters[0]);let e=n.filters.map(r=>Wl(r)),t=z.create(e,n.op);return t=ia(t),u_(t)?t:(R(t instanceof z),R(jr(t)),R(t.filters.length>1),t.filters.reduce((r,s)=>ld(r,s)))}function ld(n,e){let t;return R(n instanceof F||n instanceof z),R(e instanceof F||e instanceof z),t=n instanceof F?e instanceof F?function(s,i){return z.create([s,i],"and")}(n,e):Zp(n,e):e instanceof F?Zp(e,n):function(s,i){if(R(s.filters.length>0&&i.filters.length>0),jr(s)&&jr(i))return Dg(s,i.getFilters());let o=Il(s)?s:i,a=Il(s)?i:s,c=o.filters.map(u=>ld(u,a));return z.create(c,"or")}(n,e),ia(t)}function Zp(n,e){if(jr(e))return Dg(e,n.getFilters());{let t=e.filters.map(r=>ld(n,r));return z.create(t,"or")}}function ia(n){if(R(n instanceof F||n instanceof z),n instanceof F)return n;let e=n.getFilters();if(e.length===1)return ia(e[0]);if(Pg(n))return n;let t=e.map(s=>ia(s)),r=[];return t.forEach(s=>{s instanceof F?r.push(s):s instanceof z&&(s.op===n.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:z.create(r,n.op)}var Ql=class{constructor(){this._n=new ii}addToCollectionParentIndex(e,t){return this._n.add(t),m.resolve()}getCollectionParents(e,t){return m.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return m.resolve()}deleteFieldIndex(e,t){return m.resolve()}deleteAllFieldIndexes(e){return m.resolve()}createTargetIndexes(e,t){return m.resolve()}getDocumentsMatchingTarget(e,t){return m.resolve(null)}getIndexType(e,t){return m.resolve(0)}getFieldIndexes(e,t){return m.resolve([])}getNextCollectionGroupToUpdate(e){return m.resolve(null)}getMinOffset(e,t){return m.resolve(He.min())}getMinOffsetFromCollectionGroup(e,t){return m.resolve(He.min())}updateCollectionGroup(e,t,r){return m.resolve()}updateIndexEntries(e,t){return m.resolve()}},ii=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new $(B.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){let t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new $(B.comparator)).toArray()}};var ko=new Uint8Array(0),Yl=class{constructor(e,t){this.databaseId=t,this.an=new ii,this.un=new gt(r=>$n(r),(r,s)=>fi(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){let r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});let i={collectionId:r,parent:xe(s)};return eg(e).put(i)}return m.resolve()}getCollectionParents(e,t){let r=[],s=IDBKeyRange.bound([t,""],[wg(t),""],!1,!0);return eg(e).W(s).next(i=>{for(let o of i){if(o.collectionId!==t)break;r.push(ht(o.parent))}return r})}addFieldIndex(e,t){let r=Ms(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete s.indexId;let i=r.add(s);if(t.indexState){let o=Sr(e);return i.next(a=>{o.put(Wp(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){let r=Ms(e),s=Sr(e),i=br(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Ms(e),r=br(e),s=Sr(e);return t.H().next(()=>r.H()).next(()=>s.H())}createTargetIndexes(e,t){return m.forEach(this.cn(t),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){let i=new sa(r).on();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,t){let r=br(e),s=!0,i=new Map;return m.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=V(),a=[];return m.forEach(i,(c,u)=>{w("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(A=>`${A.fieldPath}:${A.kind}`).join(",")}`}(c)} to execute ${$n(t)}`);let l=function(b,A){let L=dl(A);if(L===void 0)return null;for(let O of Qo(b,L.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null}(u,c),h=function(b,A){let L=new Map;for(let O of xn(A))for(let K of Qo(b,O.fieldPath))switch(K.op){case"==":case"in":L.set(O.fieldPath.canonicalString(),K.value);break;case"not-in":case"!=":return L.set(O.fieldPath.canonicalString(),K.value),Array.from(L.values())}return null}(u,c),d=function(b,A){let L=[],O=!0;for(let K of xn(A)){let ue=K.kind===0?xp(b,K.fieldPath,b.startAt):Op(b,K.fieldPath,b.startAt);L.push(ue.value),O&&(O=ue.inclusive)}return new pt(L,O)}(u,c),f=function(b,A){let L=[],O=!0;for(let K of xn(A)){let ue=K.kind===0?Op(b,K.fieldPath,b.endAt):xp(b,K.fieldPath,b.endAt);L.push(ue.value),O&&(O=ue.inclusive)}return new pt(L,O)}(u,c),_=this.hn(c,u,d),y=this.hn(c,u,f),g=this.Pn(c,u,h),T=this.In(c.indexId,l,_,d.inclusive,y,f.inclusive,g);return m.forEach(T,C=>r.j(C,t.limit).next(b=>{b.forEach(A=>{let L=E.fromSegments(A.documentKey);o.has(L)||(o=o.add(L),a.push(L))})}))}).next(()=>a)}return m.resolve(null)})}cn(e){let t=this.un.get(e);return t||(e.filters.length===0?t=[e]:t=XT(z.create(e.filters,"and")).map(r=>Pl(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,s,i,o,a){let c=(t!=null?t.length:1)*Math.max(r.length,i.length),u=c/(t!=null?t.length:1),l=[];for(let h=0;h<c;++h){let d=t?this.Tn(t[h/u]):ko,f=this.En(e,d,r[h%u],s),_=this.dn(e,d,i[h%u],o),y=a.map(g=>this.En(e,d,g,!0));l.push(...this.createRange(f,_,y))}return l}En(e,t,r,s){let i=new Mn(e,E.empty(),t,r);return s?i:i.Jt()}dn(e,t,r,s){let i=new Mn(e,E.empty(),t,r);return s?i.Jt():i}ln(e,t){let r=new sa(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(let a of i)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2,s=this.cn(t);return m.forEach(s,i=>this.ln(e,i).next(o=>{o?r!==0&&o.fields.length<function(c){let u=new $(ae.comparator),l=!1;for(let h of c.filters)for(let d of h.getFlattenedFilters())d.field.isKeyField()||(d.op==="array-contains"||d.op==="array-contains-any"?l=!0:u=u.add(d.field));for(let h of c.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(l?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&s.length>1&&r===2?1:r)}An(e,t){let r=new Vn;for(let s of xn(e)){let i=t.data.field(s.fieldPath);if(i==null)return null;let o=r.Ht(s.kind);kt.bt.Pt(i,o)}return r.Wt()}Tn(e){let t=new Vn;return kt.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){let r=new Vn;return kt.bt.Pt(zn(this.databaseId,t),r.Ht(function(i){let o=xn(i);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(r===null)return[];let s=[];s.push(new Vn);let i=0;for(let o of xn(e)){let a=r[i++];for(let c of s)if(this.Vn(t,o.fieldPath)&&Js(a))s=this.mn(s,o,a);else{let u=c.Ht(o.kind);kt.bt.Pt(a,u)}}return this.fn(s)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){let s=[...e],i=[];for(let o of r.arrayValue.values||[])for(let a of s){let c=new Vn;c.seed(a.Wt()),kt.bt.Pt(o,c.Ht(t.kind)),i.push(c)}return i}Vn(e,t){return!!e.filters.find(r=>r instanceof F&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Ms(e),s=Sr(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(i=>{let o=[];return m.forEach(i,a=>s.get([a.indexId,this.uid]).next(c=>{o.push(function(l,h){let d=h?new Ks(h.sequenceNumber,new He(Wn(h.readTime),new E(ht(h.documentKey)),h.largestBatchId)):Ks.empty(),f=l.fields.map(([_,y])=>new xr(ae.fromServerFormat(_),y));return new Fr(l.indexId,l.collectionGroup,f,d)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,s)=>{let i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:x(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let s=Ms(e),i=Sr(e);return this.gn(e).next(o=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>m.forEach(a,c=>i.put(Wp(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){let r=new Map;return m.forEach(t,(s,i)=>{let o=r.get(s.collectionGroup);return(o?m.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),m.forEach(a,c=>this.pn(e,s,c).next(u=>{let l=this.yn(i,c);return u.isEqual(l)?m.resolve():this.wn(e,i,c,u,l)}))))})}Sn(e,t,r,s){return br(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,s){return br(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){let s=br(e),i=new $(Ht);return s.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{i=i.add(new Mn(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>i)}yn(e,t){let r=new $(Ht),s=this.An(t,e);if(s==null)return r;let i=dl(t);if(i!=null){let o=e.data.field(i.fieldPath);if(Js(o))for(let a of o.arrayValue.values||[])r=r.add(new Mn(t.indexId,e.key,this.Tn(a),s))}else r=r.add(new Mn(t.indexId,e.key,ko,s));return r}wn(e,t,r,s,i){w("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let o=[];return function(c,u,l,h,d){let f=c.getIterator(),_=u.getIterator(),y=Ar(f),g=Ar(_);for(;y||g;){let T=!1,C=!1;if(y&&g){let b=l(y,g);b<0?C=!0:b>0&&(T=!0)}else y!=null?C=!0:T=!0;T?(h(g),g=Ar(_)):C?(d(y),y=Ar(f)):(y=Ar(f),g=Ar(_))}}(s,i,Ht,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),m.waitFor(o)}gn(e){let t=1;return Sr(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Ht(o,a)).filter((o,a,c)=>!a||Ht(o,c[a-1])!==0);let s=[];s.push(e);for(let o of r){let a=Ht(o,e),c=Ht(o,t);if(a===0)s[0]=e.Jt();else if(a>0&&c<0)s.push(o),s.push(o.Jt());else if(c>0)break}s.push(t);let i=[];for(let o=0;o<s.length;o+=2){if(this.Dn(s[o],s[o+1]))return[];let a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,ko,[]],c=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,ko,[]];i.push(IDBKeyRange.bound(a,c))}return i}Dn(e,t){return Ht(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(tg)}getMinOffset(e,t){return m.mapArray(this.cn(t),r=>this.ln(e,r).next(s=>s||S())).next(tg)}};function eg(n){return fe(n,"collectionParents")}function br(n){return fe(n,"indexEntries")}function Ms(n){return fe(n,"indexConfiguration")}function Sr(n){return fe(n,"indexState")}function tg(n){R(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let s=n[r].indexState.offset;rd(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new He(e.readTime,e.documentKey,t)}var ng={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$e=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function l_(n,e,t){let r=n.store("mutations"),s=n.store("documentMutations"),i=[],o=IDBKeyRange.only(t.batchId),a=0,c=r.Y({range:o},(l,h,d)=>(a++,d.delete()));i.push(c.next(()=>{R(a===1)}));let u=[];for(let l of t.mutations){let h=Eg(e,l.key.path,t.batchId);i.push(s.delete(h)),u.push(l.key)}return m.waitFor(i).next(()=>u)}function oa(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw S();e=n.noDocument}return JSON.stringify(e).length}$e.DEFAULT_COLLECTION_PERCENTILE=10,$e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$e.DEFAULT=new $e(41943040,$e.DEFAULT_COLLECTION_PERCENTILE,$e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$e.DISABLED=new $e(-1,0,0);var aa=class n{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Cn={}}static lt(e,t,r,s){R(e.uid!=="");let i=e.isAuthenticated()?e.uid:"";return new n(i,t,r,s)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wt(e).Y({index:"userMutationsIndex",range:r},(s,i,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,s){let i=Dr(e),o=Wt(e);return o.add({}).next(a=>{R(typeof a=="number");let c=new ei(a,t,r,s),u=function(f,_,y){let g=y.baseMutations.map(C=>si(f.ct,C)),T=y.mutations.map(C=>si(f.ct,C));return{userId:_,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:g,mutations:T}}(this.serializer,this.userId,c),l=[],h=new $((d,f)=>x(d.canonicalString(),f.canonicalString()));for(let d of s){let f=Eg(this.userId,d.key.path,a);h=h.add(d.key.path.popLast()),l.push(o.put(u)),l.push(i.put(f,eT))}return h.forEach(d=>{l.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),m.waitFor(l).next(()=>c)})}lookupMutationBatch(e,t){return Wt(e).get(t).next(r=>r?(R(r.userId===this.userId),Ln(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?m.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let s=r.keys();return this.Cn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]),i=null;return Wt(e).Y({index:"userMutationsIndex",range:s},(o,a,c)=>{a.userId===this.userId&&(R(a.batchId>=r),i=Ln(this.serializer,a)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Wt(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wt(e).W("userMutationsIndex",t).next(r=>r.map(s=>Ln(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Oo(this.userId,t.path),s=IDBKeyRange.lowerBound(r),i=[];return Dr(e).Y({range:s},(o,a,c)=>{let[u,l,h]=o,d=ht(l);if(u===this.userId&&t.path.isEqual(d))return Wt(e).get(h).next(f=>{if(!f)throw S();R(f.userId===this.userId),i.push(Ln(this.serializer,f))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $(x),s=[];return t.forEach(i=>{let o=Oo(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=Dr(e).Y({range:a},(u,l,h)=>{let[d,f,_]=u,y=ht(f);d===this.userId&&i.path.isEqual(y)?r=r.add(_):h.done()});s.push(c)}),m.waitFor(s).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,s=r.length+1,i=Oo(this.userId,r),o=IDBKeyRange.lowerBound(i),a=new $(x);return Dr(e).Y({range:o},(c,u,l)=>{let[h,d,f]=c,_=ht(d);h===this.userId&&r.isPrefixOf(_)?_.length===s&&(a=a.add(f)):l.done()}).next(()=>this.Fn(e,a))}Fn(e,t){let r=[],s=[];return t.forEach(i=>{s.push(Wt(e).get(i).next(o=>{if(o===null)throw S();R(o.userId===this.userId),r.push(Ln(this.serializer,o))}))}),m.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return l_(e.ae,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),m.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return m.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return Dr(e).Y({range:r},(i,o,a)=>{if(i[0]===this.userId){let c=ht(i[1]);s.push(c)}else a.done()}).next(()=>{R(s.length===0)})})}containsKey(e,t){return h_(e,this.userId,t)}xn(e){return d_(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function h_(n,e,t){let r=Oo(e,t.path),s=r[1],i=IDBKeyRange.lowerBound(r),o=!1;return Dr(n).Y({range:i,J:!0},(a,c,u)=>{let[l,h,d]=a;l===e&&h===s&&(o=!0),u.done()}).next(()=>o)}function Wt(n){return fe(n,"mutations")}function Dr(n){return fe(n,"documentMutations")}function d_(n){return fe(n,"mutationQueues")}var Wr=class n{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new n(0)}static Bn(){return new n(-1)}};var Jl=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next(t=>{let r=new Wr(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(t=>k.fromTimestamp(new te(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Ln(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.kn(e,s)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Rr(e).delete(t.targetId)).next(()=>this.Ln(e)).next(r=>(R(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let s=0,i=[];return Rr(e).Y((o,a)=>{let c=js(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(e,c)))}).next(()=>m.waitFor(i)).next(()=>s)}forEachTarget(e,t){return Rr(e).Y((r,s)=>{let i=js(s);t(i)})}Ln(e){return rg(e).get("targetGlobalKey").next(t=>(R(t!==null),t))}kn(e,t){return rg(e).put("targetGlobalKey",t)}qn(e,t){return Rr(e).put(o_(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(t=>t.targetCount)}getTargetData(e,t){let r=$n(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),i=null;return Rr(e).Y({range:s,index:"queryTargetsIndex"},(o,a,c)=>{let u=js(a);fi(t,u.target)&&(i=u,c.done())}).next(()=>i)}addMatchingKeys(e,t,r){let s=[],i=Yt(e);return t.forEach(o=>{let a=xe(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),m.waitFor(s)}removeMatchingKeys(e,t,r){let s=Yt(e);return m.forEach(t,i=>{let o=xe(i.path);return m.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,t){let r=Yt(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Yt(e),i=V();return s.Y({range:r,J:!0},(o,a,c)=>{let u=ht(o[1]),l=new E(u);i=i.add(l)}).next(()=>i)}containsKey(e,t){let r=xe(t.path),s=IDBKeyRange.bound([r],[wg(r)],!1,!0),i=0;return Yt(e).Y({index:"documentTargetsIndex",J:!0,range:s},([o,a],c,u)=>{o!==0&&(i++,u.done())}).next(()=>i>0)}_t(e,t){return Rr(e).get(t).next(r=>r?js(r):null)}};function Rr(n){return fe(n,"targets")}function rg(n){return fe(n,"targetGlobal")}function Yt(n){return fe(n,"targetDocuments")}function sg([n,e],[t,r]){let s=x(n,t);return s===0?x(e,r):s}var Xl=class{constructor(e){this.Kn=e,this.buffer=new $(sg),this.$n=0}Un(){return++this.$n}Wn(e){let t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();sg(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Zl=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){w("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){un(t)?w("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Xn(t)}await this.zn(3e5)})}},eh=class{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return m.resolve(Ve._e);let r=new Xl(t);return this.jn.forEachTarget(e,s=>r.Wn(s.sequenceNumber)).next(()=>this.jn.Jn(e,s=>r.Wn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(w("LruGarbageCollector","Garbage collection skipped; disabled"),m.resolve(ng)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(w("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ng):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,s,i,o,a,c,u,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(w("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(i=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),Cr()<=U.DEBUG&&w("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-l}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-l}ms`),m.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}};function ZT(n,e){return new eh(n,e)}var th=class{constructor(e,t){this.db=e,this.garbageCollector=ZT(this,t)}Hn(e){let t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,s)=>t(s))}addReference(e,t,r){return Do(e,r)}removeReference(e,t,r){return Do(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Do(e,t)}er(e,t){return function(s,i){let o=!1;return d_(s).Z(a=>h_(s,a,i).next(c=>(c&&(o=!0),m.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[],i=0;return this.Xn(e,(o,a)=>{if(a<=t){let c=this.er(e,o).next(u=>{if(!u)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,k.min()),Yt(e).delete(function(h){return[0,xe(h.path)]}(o))))});s.push(c)}}).next(()=>m.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Do(e,t)}Xn(e,t){let r=Yt(e),s,i=Ve._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:u})=>{o===0?(i!==Ve._e&&t(new E(ht(s)),i),i=u,s=c):i=Ve._e}).next(()=>{i!==Ve._e&&t(new E(ht(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Do(n,e){return Yt(n).put(function(r,s){return{targetId:0,path:xe(r.path),sequenceNumber:s}}(e,n.currentSequenceNumber))}var ca=class{constructor(){this.changes=new gt(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ce.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?m.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var nh=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Nn(e).put(r)}removeEntry(e,t,r){return Nn(e).delete(function(i,o){let a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],na(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=ce.newInvalidDocument(t);return Nn(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Us(t))},(s,i)=>{r=this.nr(t,i)}).next(()=>r)}rr(e,t){let r={size:0,document:ce.newInvalidDocument(t)};return Nn(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Us(t))},(s,i)=>{r={document:this.nr(t,i),size:oa(i)}}).next(()=>r)}getEntries(e,t){let r=qe();return this.ir(e,t,(s,i)=>{let o=this.nr(s,i);r=r.insert(s,o)}).next(()=>r)}sr(e,t){let r=qe(),s=new Q(E.comparator);return this.ir(e,t,(i,o)=>{let a=this.nr(i,o);r=r.insert(i,a),s=s.insert(i,oa(o))}).next(()=>({documents:r,_r:s}))}ir(e,t,r){if(t.isEmpty())return m.resolve();let s=new $(ag);t.forEach(c=>s=s.add(c));let i=IDBKeyRange.bound(Us(s.first()),Us(s.last())),o=s.getIterator(),a=o.getNext();return Nn(e).Y({index:"documentKeyIndex",range:i},(c,u,l)=>{let h=E.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&ag(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?l.U(Us(a)):l.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,s,i){let o=t.path,a=[o.popLast().toArray(),o.lastSegment(),na(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Nn(e).W(IDBKeyRange.bound(a,c,!0)).next(u=>{i?.incrementDocumentReadCount(u.length);let l=qe();for(let h of u){let d=this.nr(E.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);d.isFoundDocument()&&(mi(t,d)||s.has(d.key))&&(l=l.insert(d.key,d))}return l})}getAllFromCollectionGroup(e,t,r,s){let i=qe(),o=og(t,r),a=og(t,He.max());return Nn(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,u,l)=>{let h=this.nr(E.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(h.key,h),i.size===s&&l.done()}).next(()=>i)}newChangeBuffer(e){return new rh(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ig(e).get("remoteDocumentGlobalKey").next(t=>(R(!!t),t))}tr(e,t){return ig(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){let r=YT(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(k.min())))return r}return ce.newInvalidDocument(e)}};function f_(n){return new nh(n)}var rh=class extends ca{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new gt(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){let t=[],r=0,s=new $((i,o)=>x(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{let a=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,a.readTime)),o.isValidDocument()){let c=Kp(this.ar.serializer,o);s=s.add(i.path.popLast());let u=oa(c);r+=u-a.size,t.push(this.ar.addEntry(e,i,c))}else if(r-=a.size,this.trackRemovals){let c=Kp(this.ar.serializer,o.convertToNoDocument(k.min()));t.push(this.ar.addEntry(e,i,c))}}),s.forEach(i=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,i))}),t.push(this.ar.updateMetadata(e,r)),m.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:s})=>(s.forEach((i,o)=>{this.ur.set(i,{size:o,readTime:r.get(i).readTime})}),r))}};function ig(n){return fe(n,"remoteDocumentGlobal")}function Nn(n){return fe(n,"remoteDocumentsV14")}function Us(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function og(n,e){let t=e.documentKey.path.toArray();return[n,na(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ag(n,e){let t=n.path.toArray(),r=e.path.toArray(),s=0;for(let i=0;i<t.length-2&&i<r.length-2;++i)if(s=x(t[i],r[i]),s)return s;return s=x(t.length,r.length),s||(s=x(t[t.length-2],r[r.length-2]),s||x(t[t.length-1],r[r.length-1]))}var sh=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var ua=class{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&$s(r.mutation,s,Fe.empty(),te.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,V()).next(()=>r))}getLocalViewOfDocuments(e,t,r=V()){let s=dt();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(i=>{let o=Bs();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=dt();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,V()))}populateOverlays(e,t,r){let s=[];return r.forEach(i=>{t.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,s){let i=qe(),o=Gs(),a=function(){return Gs()}();return t.forEach((c,u)=>{let l=r.get(u.key);s.has(u.key)&&(l===void 0||l.mutation instanceof Xe)?i=i.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),$s(l.mutation,u,l.mutation.getFieldMask(),te.now())):o.set(u.key,Fe.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,l)=>o.set(u,l)),t.forEach((u,l)=>{var h;return a.set(u,new sh(l,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Gs(),s=new Q((o,a)=>o-a),i=V();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let l=r.get(c)||Fe.empty();l=a.applyToLocalView(u,l),r.set(c,l);let h=(s.get(a.batchId)||V()).add(c);s=s.insert(a.batchId,h)})}).next(()=>{let o=[],a=s.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,h=Fg();l.forEach(d=>{if(!i.has(d)){let f=Kg(t.get(d),r.get(d));f!==null&&h.set(d,f),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return m.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(o){return E.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ad(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(i=>{let o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):m.resolve(dt()),a=-1,c=i;return o.next(u=>m.forEach(u,(l,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(l)?m.resolve():this.remoteDocumentCache.getEntry(e,l).next(d=>{c=c.insert(l,d)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,V())).next(l=>({batchId:a,changes:Ug(l)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new E(t)).next(r=>{let s=Bs();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){let i=t.collectionGroup,o=Bs();return this.indexManager.getCollectionParents(e,i).next(a=>m.forEach(a,c=>{let u=function(h,d){return new Nt(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(l=>{l.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s))).next(o=>{i.forEach((c,u)=>{let l=u.getKey();o.get(l)===null&&(o=o.insert(l,ce.newInvalidDocument(l)))});let a=Bs();return o.forEach((c,u)=>{let l=i.get(c);l!==void 0&&$s(l.mutation,u,Fe.empty(),te.now()),mi(t,u)&&(a=a.insert(c,u))}),a})}};var ih=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return m.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:de(s.createTime)}}(t)),m.resolve()}getNamedQuery(e,t){return m.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(s){return{name:s.name,query:a_(s.bundledQuery),readTime:de(s.readTime)}}(t)),m.resolve()}};var oh=class{constructor(){this.overlays=new Q(E.comparator),this.hr=new Map}getOverlay(e,t){return m.resolve(this.overlays.get(t))}getOverlays(e,t){let r=dt();return m.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,i)=>{this.ht(e,t,i)}),m.resolve()}removeOverlaysForBatchId(e,t,r){let s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),m.resolve()}getOverlaysForCollection(e,t,r){let s=dt(),i=t.length+1,o=new E(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return m.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new Q((u,l)=>u-l),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let l=i.get(u.largestBatchId);l===null&&(l=dt(),i=i.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=dt(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=s)););return m.resolve(a)}ht(e,t,r){let s=this.overlays.get(r.key);if(s!==null){let o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ti(t,r));let i=this.hr.get(t);i===void 0&&(i=V(),this.hr.set(t,i)),this.hr.set(t,i.add(r.key))}};var oi=class{constructor(){this.Pr=new $(re.Ir),this.Tr=new $(re.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){let r=new re(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new re(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){let t=new E(new B([])),r=new re(t,e),s=new re(t,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let t=new E(new B([])),r=new re(t,e),s=new re(t,e+1),i=V();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){let t=new re(e,0),r=this.Pr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},re=class{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return E.comparator(e.key,t.key)||x(e.pr,t.pr)}static Er(e,t){return x(e.pr,t.pr)||E.comparator(e.key,t.key)}};var ah=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new $(re.Ir)}checkEmpty(e){return m.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){let i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new ei(i,t,r,s);this.mutationQueue.push(o);for(let a of s)this.wr=this.wr.add(new re(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return m.resolve(o)}lookupMutationBatch(e,t){return m.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,s=this.br(r),i=s<0?0:s;return m.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return m.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return m.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new re(t,0),s=new re(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{let a=this.Sr(o.pr);i.push(a)}),m.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $(x);return t.forEach(s=>{let i=new re(s,0),o=new re(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),m.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,s=r.length+1,i=r;E.isDocumentKey(i)||(i=i.child(""));let o=new re(new E(i),0),a=new $(x);return this.wr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(c.pr)),!0)},o),m.resolve(this.Dr(a))}Dr(e){let t=[];return e.forEach(r=>{let s=this.Sr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){R(this.Cr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return m.forEach(t.mutations,s=>{let i=new re(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){let r=new re(t,0),s=this.wr.firstAfterOrEqual(r);return m.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,m.resolve()}Cr(e,t){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var ch=class{constructor(e){this.vr=e,this.docs=function(){return new Q(E.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return m.resolve(r?r.document.mutableCopy():ce.newInvalidDocument(t))}getEntries(e,t){let r=qe();return t.forEach(s=>{let i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ce.newInvalidDocument(s))}),m.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=qe(),o=t.path,a=new E(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||rd(Ig(l),r)<=0||(s.has(l.key)||mi(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return m.resolve(i)}getAllFromCollectionGroup(e,t,r,s){S()}Fr(e,t){return m.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new uh(this)}getSize(e){return m.resolve(this.size)}},uh=class extends ca{constructor(e){super(),this.ar=e}applyChanges(e){let t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),m.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}};var lh=class{constructor(e){this.persistence=e,this.Mr=new gt(t=>$n(t),fi),this.lastRemoteSnapshotVersion=k.min(),this.highestTargetId=0,this.Or=0,this.Nr=new oi,this.targetCount=0,this.Br=Wr.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,s)=>t(s)),m.resolve()}getLastRemoteSnapshotVersion(e){return m.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return m.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),m.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),m.resolve()}qn(e){this.Mr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Br=new Wr(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,m.resolve()}updateTargetData(e,t){return this.qn(t),m.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,m.resolve()}removeTargets(e,t,r){let s=0,i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),m.waitFor(i).next(()=>s)}getTargetCount(e){return m.resolve(this.targetCount)}getTargetData(e,t){let r=this.Mr.get(t)||null;return m.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),m.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);let s=this.persistence.referenceDelegate,i=[];return s&&t.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),m.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),m.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Nr.gr(t);return m.resolve(r)}containsKey(e,t){return m.resolve(this.Nr.containsKey(t))}};var la=class{constructor(e,t){this.Lr={},this.overlays={},this.kr=new Ve(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new lh(this),this.indexManager=new Ql,this.remoteDocumentCache=function(s){return new ch(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new ta(t),this.$r=new ih(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Lr[e.toKey()];return r||(r=new ah(t,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){w("MemoryPersistence","Starting transaction:",e);let s=new hh(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,t){return m.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,t)))}},hh=class extends jo{constructor(e){super(),this.currentSequenceNumber=e}},ha=class n{constructor(e){this.persistence=e,this.zr=new oi,this.jr=null}static Hr(e){return new n(e)}get Jr(){if(this.jr)return this.jr;throw S()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),m.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),m.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),m.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(s=>this.Jr.add(s.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return m.forEach(this.Jr,r=>{let s=E.fromPath(r);return this.Yr(e,s).next(i=>{i||t.removeEntry(s,k.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return m.or([()=>m.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}};var dh=class{constructor(e){this.serializer=e}N(e,t,r,s){let i=new zo("createOrUpgrade",t);r<1&&s>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ap,{unique:!0}),c.createObjectStore("documentMutations")}(e),cg(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=m.resolve();return r<3&&s>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),cg(e)),o=o.next(()=>function(c){let u=c.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:k.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",l)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(c,u){return u.store("mutations").W().next(l=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ap,{unique:!0});let h=u.store("mutations"),d=l.map(f=>h.put(f));return m.waitFor(d)})}(e,i))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.Xr(i))),r<6&&s>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i)))),r<7&&s>=7&&(o=o.next(()=>this.ti(i))),r<8&&s>=8&&(o=o.next(()=>this.ni(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.ri(i))),r<11&&s>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(c){let u=c.createObjectStore("documentOverlays",{keyPath:dT});u.createIndex("collectionPathOverlayIndex",fT,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",mT,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(c){let u=c.createObjectStore("remoteDocumentsV14",{keyPath:tT});u.createIndex("documentKeyIndex",nT),u.createIndex("collectionGroupIndex",rT)}(e)).next(()=>this.ii(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.si(e,i))),r<15&&s>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:cT}).createIndex("sequenceNumberIndex",uT,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:lT}).createIndex("documentKeyIndex",hT,{unique:!1})}(e))),o}ei(e){let t=0;return e.store("remoteDocuments").Y((r,s)=>{t+=oa(s)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>m.forEach(s,i=>{let o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>m.forEach(a,c=>{R(c.userId===i.userId);let u=Ln(this.serializer,c);return l_(e,i.userId,u).next(()=>{})}))}))}ti(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{let i=[];return r.Y((o,a)=>{let c=new B(o),u=function(h){return[0,xe(h)]}(c);i.push(t.get(u).next(l=>l?m.resolve():(h=>t.put({targetId:0,path:xe(h),sequenceNumber:s.highestListenSequenceNumber}))(c)))}).next(()=>m.waitFor(i))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:aT});let r=t.store("collectionParents"),s=new ii,i=o=>{if(s.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:xe(c)})}};return t.store("remoteDocuments").Y({J:!0},(o,a)=>{let c=new B(o);return i(c.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([o,a,c],u)=>{let l=ht(a);return i(l.popLast())}))}ri(e){let t=e.store("targets");return t.Y((r,s)=>{let i=js(s),o=o_(this.serializer,i);return t.put(o)})}ii(e,t){let r=t.store("remoteDocuments"),s=[];return r.Y((i,o)=>{let a=t.store("remoteDocumentsV14"),c=function(h){return h.document?new E(B.fromString(h.document.name).popFirst(5)):h.noDocument?E.fromSegments(h.noDocument.path):h.unknownDocument?E.fromSegments(h.unknownDocument.path):S()}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(u))}).next(()=>m.waitFor(s))}si(e,t){let r=t.store("mutations"),s=f_(this.serializer),i=new la(ha.Hr,this.serializer.ct);return r.W().next(o=>{let a=new Map;return o.forEach(c=>{var u;let l=(u=a.get(c.userId))!==null&&u!==void 0?u:V();Ln(this.serializer,c).keys().forEach(h=>l=l.add(h)),a.set(c.userId,l)}),m.forEach(a,(c,u)=>{let l=new oe(u),h=ra.lt(this.serializer,l),d=i.getIndexManager(l),f=aa.lt(l,this.serializer,d,i.referenceDelegate);return new ua(s,f,h,d).recalculateAndSaveOverlaysForDocumentKeys(new Ws(t,Ve._e),c).next()})})}};function cg(n){n.createObjectStore("targetDocuments",{keyPath:iT}).createIndex("documentTargetsIndex",oT,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",sT,{unique:!0}),n.createObjectStore("targetGlobal")}var nl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",fh=class n{constructor(e,t,r,s,i,o,a,c,u,l,h=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=i,this.window=o,this.document=a,this._i=u,this.ai=l,this.ui=h,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=d=>Promise.resolve(),!n.D())throw new I(p.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new th(this,s),this.Ti=t+"main",this.serializer=new ta(c),this.Ei=new Bn(this.Ti,this.ui,new dh(this.serializer)),this.Qr=new Jl(this.referenceDelegate,this.serializer),this.remoteDocumentCache=f_(this.serializer),this.$r=new jl,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,l===!1&&Ne("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new I(p.FAILED_PRECONDITION,nl);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Ve(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(async()=>{this.started&&await this.Ai()}))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>No(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(un(e))return w("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return w("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Fs(e).get("owner").next(t=>m.resolve(this.Si(t)))}bi(e){return No(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=fe(t,"clientMetadata");return r.W().next(s=>{let i=this.vi(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return m.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(let t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?m.resolve(!0):Fs(e).get("owner").next(t=>{if(t!==null&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new I(p.FAILED_PRECONDITION,nl);return!1}}return!(!this.networkEnabled||!this.inForeground)||No(e).W().next(r=>this.vi(r,5e3).find(s=>{if(this.clientId!==s.clientId){let i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&w("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Ws(e,Ve._e);return this.yi(t).next(()=>this.bi(t))}),this.Ei.close(),this.Bi()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>No(e).W().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return aa.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Yl(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return ra.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){w("IndexedDbPersistence","Starting transaction:",e);let s=t==="readonly"?"readonly":"readwrite",i=function(c){return c===15?gT:c===14?bg:c===13?Ag:c===12?pT:c===11?Tg:void S()}(this.ui),o;return this.Ei.runTransaction(e,s,i,a=>(o=new Ws(a,this.kr?this.kr.next():Ve._e),t==="readwrite-primary"?this.gi(o).next(c=>!!c||this.pi(o)).next(c=>{if(!c)throw Ne(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new I(p.FAILED_PRECONDITION,vg);return r(o)}).next(c=>this.wi(o).next(()=>c)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return Fs(e).get("owner").next(t=>{if(t!==null&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new I(p.FAILED_PRECONDITION,nl)})}wi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fs(e).put("owner",t)}static D(){return Bn.D()}yi(e){let t=Fs(e);return t.get("owner").next(r=>this.Si(r)?(w("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):m.resolve())}Ci(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Ne(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let t=/(?:Version|Mobile)\/1[456]/;Qc()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{let r=((t=this.di)===null||t===void 0?void 0:t.getItem(this.Fi(e)))!==null;return w("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ne("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Ne("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Fs(n){return fe(n,"owner")}function No(n){return fe(n,"clientMetadata")}function eA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var mh=class n{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=s}static Ki(e,t){let r=V(),s=V();for(let i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new n(e,t.fromCache,r,s)}};var ph=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var da=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Qc()?8:Bn.v(Y())>0?6:4}()}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,s){let i={result:null};return this.ji(e,t).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(e,t,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;let o=new ph;return this.Ji(e,t,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>i.result)}Yi(e,t,r,s){return r.documentReadCount<this.Wi?(Cr()<=U.DEBUG&&w("QueryEngine","SDK will not create cache indexes for query:",Pr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),m.resolve()):(Cr()<=U.DEBUG&&w("QueryEngine","Query:",Pr(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(Cr()<=U.DEBUG&&w("QueryEngine","The SDK decides to create cache indexes for query:",Pr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ke(t))):m.resolve())}ji(e,t){if(Lp(t))return m.resolve(null);let r=Ke(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Yo(t,null,"F"),r=Ke(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{let o=V(...i);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Zi(t,a);return this.Xi(t,u,o,c.readTime)?this.ji(e,Yo(t,null,"F")):this.es(e,u,t,c)}))})))}Hi(e,t,r,s){return Lp(t)||s.isEqual(k.min())?m.resolve(null):this.zi.getDocuments(e,r).next(i=>{let o=this.Zi(t,i);return this.Xi(t,o,r,s)?m.resolve(null):(Cr()<=U.DEBUG&&w("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Pr(t)),this.es(e,o,t,JE(s,-1)).next(a=>a))})}Zi(e,t){let r=new $(Vg(e));return t.forEach((s,i)=>{mi(e,i)&&(r=r.add(i))}),r}Xi(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(e,t,r){return Cr()<=U.DEBUG&&w("QueryEngine","Using full collection scan to execute query:",Pr(t)),this.zi.getDocumentsMatchingQuery(e,t,He.min(),r)}es(e,t,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(i=>(t.forEach(o=>{i=i.insert(o.key,o)}),i))}};var gh=class{constructor(e,t,r,s){this.persistence=e,this.ts=t,this.serializer=s,this.ns=new Q(x),this.rs=new gt(i=>$n(i),fi),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ua(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}};function m_(n,e,t,r){return new gh(n,e,t,r)}async function p_(n,e){let t=D(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(i=>{let o=[],a=[],c=V();for(let u of s){o.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of i){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return t.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})}function tA(n,e){let t=D(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let s=e.batch.keys(),i=t.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let h=u.batch,d=h.keys(),f=m.resolve();return d.forEach(_=>{f=f.next(()=>l.getEntry(c,_)).next(y=>{let g=u.docVersions.get(_);R(g!==null),y.version.compareTo(g)<0&&(h.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),l.addEntry(y)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(t,r,e,i).next(()=>i.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=V();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function g_(n){let e=D(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function nA(n,e){let t=D(n),r=e.snapshotVersion,s=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{let o=t.os.newChangeBuffer({trackRemovals:!0});s=t.ns;let a=[];e.targetChanges.forEach((l,h)=>{let d=s.get(h);if(!d)return;a.push(t.Qr.removeMatchingKeys(i,l.removedDocuments,h).next(()=>t.Qr.addMatchingKeys(i,l.addedDocuments,h)));let f=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(Ce.EMPTY_BYTE_STRING,k.min()).withLastLimboFreeSnapshotVersion(k.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),s=s.insert(h,f),function(y,g,T){return y.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(d,f,l)&&a.push(t.Qr.updateTargetData(i,f))});let c=qe(),u=V();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,l))}),a.push(rA(i,o,e.documentUpdates).next(l=>{c=l.cs,u=l.ls})),!r.isEqual(k.min())){let l=t.Qr.getLastRemoteSnapshotVersion(i).next(h=>t.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(l)}return m.waitFor(a).next(()=>o.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(t.ns=s,i))}function rA(n,e,t){let r=V(),s=V();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let o=qe();return t.forEach((a,c)=>{let u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(k.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):w("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:o,ls:s}})}function sA(n,e){let t=D(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function iA(n,e){let t=D(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Qr.getTargetData(r,e).next(i=>i?(s=i,m.resolve(s)):t.Qr.allocateTargetId(r).next(o=>(s=new Hr(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{let s=t.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}async function _h(n,e,t){let r=D(n),s=r.ns.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!un(o))throw o;w("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)}function ug(n,e,t){let r=D(n),s=k.min(),i=V();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,l){let h=D(c),d=h.rs.get(l);return d!==void 0?m.resolve(h.ns.get(d)):h.Qr.getTargetData(u,l)}(r,o,Ke(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?s:k.min(),t?i:V())).next(a=>(oA(r,ET(e),a),{documents:a,hs:i})))}function oA(n,e,t){let r=n.ss.get(e)||k.min();t.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),n.ss.set(e,r)}var fa=class{constructor(){this.activeTargetIds=CT()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var ma=class{constructor(){this.no=new fa,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new fa,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var yh=class{io(e){}shutdown(){}};var pa=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){w("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){w("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var xo=null;function rl(){return xo===null?xo=function(){return 268435456+Math.round(2147483648*Math.random())}():xo++,"0x"+xo.toString(16)}var aA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var wh=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var be="WebChannelConnection",Ih=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+t.host,this.po=`projects/${s}/databases/${i}`,this.yo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get wo(){return!1}So(t,r,s,i,o){let a=rl(),c=this.bo(t,r.toUriEncodedString());w("RestConnection",`Sending RPC '${t}' ${a}:`,c,s);let u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,i,o),this.Co(t,c,u,s).then(l=>(w("RestConnection",`Received RPC '${t}' ${a}: `,l),l),l=>{throw Mr("RestConnection",`RPC '${t}' ${a} failed with error: `,l,"url: ",c,"request:",s),l})}vo(t,r,s,i,o,a){return this.So(t,r,s,i,o)}Do(t,r,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+es}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>t[o]=i),s&&s.headers.forEach((i,o)=>t[o]=i)}bo(t,r){let s=aA[t];return`${this.fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,r,s){let i=rl();return new Promise((o,a)=>{let c=new wp;c.setWithCredentials(!0),c.listenOnce(_p.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Po.NO_ERROR:let l=c.getResponseJson();w(be,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(l)),o(l);break;case Po.TIMEOUT:w(be,`RPC '${e}' ${i} timed out`),a(new I(p.DEADLINE_EXCEEDED,"Request time out"));break;case Po.HTTP_ERROR:let h=c.getStatus();if(w(be,`RPC '${e}' ${i} failed with status:`,h,"response text:",c.getResponseText()),h>0){let d=c.getResponseJson();Array.isArray(d)&&(d=d[0]);let f=d?.error;if(f&&f.status&&f.message){let _=function(g){let T=g.toLowerCase().replace(/_/g,"-");return Object.values(p).indexOf(T)>=0?T:p.UNKNOWN}(f.status);a(new I(_,f.message))}else a(new I(p.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new I(p.UNAVAILABLE,"Connection failed."));break;default:S()}}finally{w(be,`RPC '${e}' ${i} completed.`)}});let u=JSON.stringify(s);w(be,`RPC '${e}' ${i} sending request:`,s),c.send(t,"POST",u,r,15)})}Fo(e,t,r){let s=rl(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pp(),a=gp(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let l=i.join("");w(be,`Creating RPC '${e}' stream ${s}: ${l}`,c);let h=o.createWebChannel(l,c),d=!1,f=!1,_=new wh({lo:g=>{f?w(be,`Not sending because RPC '${e}' stream ${s} is closed:`,g):(d||(w(be,`Opening RPC '${e}' stream ${s} transport.`),h.open(),d=!0),w(be,`RPC '${e}' stream ${s} sending:`,g),h.send(g))},ho:()=>h.close()}),y=(g,T,C)=>{g.listen(T,b=>{try{C(b)}catch(A){setTimeout(()=>{throw A},0)}})};return y(h,Ls.EventType.OPEN,()=>{f||w(be,`RPC '${e}' stream ${s} transport opened.`)}),y(h,Ls.EventType.CLOSE,()=>{f||(f=!0,w(be,`RPC '${e}' stream ${s} transport closed`),_.Vo())}),y(h,Ls.EventType.ERROR,g=>{f||(f=!0,Mr(be,`RPC '${e}' stream ${s} transport errored:`,g),_.Vo(new I(p.UNAVAILABLE,"The operation could not be completed")))}),y(h,Ls.EventType.MESSAGE,g=>{var T;if(!f){let C=g.data[0];R(!!C);let b=C,A=b.error||((T=b[0])===null||T===void 0?void 0:T.error);if(A){w(be,`RPC '${e}' stream ${s} received error:`,A);let L=A.status,O=function(st){let An=ne[st];if(An!==void 0)return Qg(An)}(L),K=A.message;O===void 0&&(O=p.INTERNAL,K="Unknown error status: "+L+" with message "+A.message),f=!0,_.Vo(new I(O,K)),h.close()}else w(be,`RPC '${e}' stream ${s} received:`,C),_.mo(C)}}),y(a,yp.STAT_EVENT,g=>{g.stat===el.PROXY?w(be,`RPC '${e}' stream ${s} detected buffering proxy`):g.stat===el.NOPROXY&&w(be,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.Ro()},0),_}};function cA(){return typeof window<"u"?window:null}function Uo(){return typeof document<"u"?document:null}function La(n){return new Ml(n,!0)}var ai=class{constructor(e,t,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=t,this.Mo=r,this.xo=s,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let t=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),s=Math.max(0,t-r);s>0&&w("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var ga=class{constructor(e,t,r,s,i,o,a,c){this.oi=e,this.$o=r,this.Uo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new ai(e,t)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():t&&t.code===p.RESOURCE_EXHAUSTED?(Ne(t.toString()),Ne("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===p.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===t&&this.o_(r,s)},r=>{e(()=>{let s=new I(p.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(e,t){let r=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return w("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget(()=>this.Wo===e?t():(w("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},vh=class extends ga{constructor(e,t,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();let t=zT(this.serializer,e),r=function(i){if(!("targetChange"in i))return k.min();let o=i.targetChange;return o.targetIds&&o.targetIds.length?k.min():o.readTime?de(o.readTime):k.min()}(e);return this.listener.u_(t,r)}c_(e){let t={};t.database=ql(this.serializer),t.addTarget=function(i,o){let a,c=o.target;if(a=Wo(c)?{documents:t_(i,c)}:{query:ud(i,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Yg(i,o.resumeToken);let u=Ul(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(k.min())>0){a.readTime=Kr(i,o.snapshotVersion.toTimestamp());let u=Ul(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=$T(this.serializer,e);r&&(t.labels=r),this.t_(t)}l_(e){let t={};t.database=ql(this.serializer),t.removeTarget=e,this.t_(t)}},Eh=class extends ga{constructor(e,t,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(R(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let t=GT(e.writeResults,e.commitTime),r=de(e.commitTime);return this.listener.T_(r,t)}return R(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=ql(this.serializer),this.t_(e)}I_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>si(this.serializer,r))};this.t_(t)}};var Th=class extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new I(p.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,Fl(t,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===p.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new I(p.UNKNOWN,i.toString())})}vo(e,t,r,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,Fl(t,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===p.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new I(p.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};async function uA(n,e,t){var r;let s=D(n),{request:i,V_:o,parent:a}=function(h,d,f){let{ut:_,parent:y}=ud(h,d),g={},T=[],C=0;return f.forEach(b=>{let A="aggregate_"+C++;g[A]=b.alias,b.aggregateType==="count"?T.push({alias:A,count:{}}):b.aggregateType==="avg"?T.push({alias:A,avg:{field:Qt(b.fieldPath)}}):b.aggregateType==="sum"&&T.push({alias:A,sum:{field:Qt(b.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:T,structuredQuery:_.structuredQuery},parent:_.parent},V_:g,parent:y}}(s.serializer,function(h){let d=D(h);return d.Pe||(d.Pe=Og(d,h.explicitOrderBy)),d.Pe}(e),t);s.connection.wo||delete i.parent;let c=(await s.vo("RunAggregationQuery",s.serializer.databaseId,a,i,1)).filter(l=>!!l.result);R(c.length===1);let u=(r=c[0].result)===null||r===void 0?void 0:r.aggregateFields;return Object.keys(u).reduce((l,h)=>(l[o[h]]=u[h],l),{})}var Ah=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Ne(t),this.g_=!1):w("OnlineStateTracker",t)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var bh=class{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io(o=>{r.enqueueAndForget(async()=>{er(this)&&(w("RemoteStore","Restarting streams for network reachability change."),await async function(c){let u=D(c);u.v_.add(4),await pi(u),u.x_.set("Unknown"),u.v_.delete(4),await Va(u)}(this))})}),this.x_=new Ah(r,s)}};async function Va(n){if(er(n))for(let e of n.F_)await e(!0)}async function pi(n){for(let e of n.F_)await e(!1)}function __(n,e){let t=D(n);t.C_.has(e.targetId)||(t.C_.set(e.targetId,e),fd(t)?dd(t):ts(t).Jo()&&hd(t,e))}function y_(n,e){let t=D(n),r=ts(t);t.C_.delete(e),r.Jo()&&w_(t,e),t.C_.size===0&&(r.Jo()?r.Xo():er(t)&&t.x_.set("Unknown"))}function hd(n,e){if(n.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(k.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ts(n).c_(e)}function w_(n,e){n.O_.Oe(e),ts(n).l_(e)}function dd(n){n.O_=new Vl({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.C_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),ts(n).start(),n.x_.p_()}function fd(n){return er(n)&&!ts(n).Ho()&&n.C_.size>0}function er(n){return D(n).v_.size===0}function I_(n){n.O_=void 0}async function lA(n){n.C_.forEach((e,t)=>{hd(n,e)})}async function hA(n,e){I_(n),fd(n)?(n.x_.S_(e),dd(n)):n.x_.set("Unknown")}async function dA(n,e,t){if(n.x_.set("Online"),e instanceof Zo&&e.state===2&&e.cause)try{await async function(s,i){let o=i.cause;for(let a of i.targetIds)s.C_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.C_.delete(a),s.O_.removeTarget(a))}(n,e)}catch(r){w("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _a(n,r)}else if(e instanceof Lr?n.O_.$e(e):e instanceof Xo?n.O_.Je(e):n.O_.Ge(e),!t.isEqual(k.min()))try{let r=await g_(n.localStore);t.compareTo(r)>=0&&await function(i,o){let a=i.O_.it(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=i.C_.get(u);l&&i.C_.set(u,l.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let l=i.C_.get(c);if(!l)return;i.C_.set(c,l.withResumeToken(Ce.EMPTY_BYTE_STRING,l.snapshotVersion)),w_(i,c);let h=new Hr(l.target,c,u,l.sequenceNumber);hd(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){w("RemoteStore","Failed to raise snapshot:",r),await _a(n,r)}}async function _a(n,e,t){if(!un(e))throw e;n.v_.add(1),await pi(n),n.x_.set("Offline"),t||(t=()=>g_(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{w("RemoteStore","Retrying IndexedDB access"),await t(),n.v_.delete(1),await Va(n)})}function v_(n,e){return e().catch(t=>_a(n,t,e))}async function gi(n){let e=D(n),t=an(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;fA(e);)try{let s=await sA(e.localStore,r);if(s===null){e.D_.length===0&&t.Xo();break}r=s.batchId,mA(e,s)}catch(s){await _a(e,s)}E_(e)&&T_(e)}function fA(n){return er(n)&&n.D_.length<10}function mA(n,e){n.D_.push(e);let t=an(n);t.Jo()&&t.P_&&t.I_(e.mutations)}function E_(n){return er(n)&&!an(n).Ho()&&n.D_.length>0}function T_(n){an(n).start()}async function pA(n){an(n).d_()}async function gA(n){let e=an(n);for(let t of n.D_)e.I_(t.mutations)}async function _A(n,e,t){let r=n.D_.shift(),s=Nl.from(r,e,t);await v_(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await gi(n)}async function yA(n,e){e&&an(n).P_&&await async function(r,s){if(function(o){return Wg(o)&&o!==p.ABORTED}(s.code)){let i=r.D_.shift();an(r).Zo(),await v_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await gi(r)}}(n,e),E_(n)&&T_(n)}async function lg(n,e){let t=D(n);t.asyncQueue.verifyOperationInProgress(),w("RemoteStore","RemoteStore received new credentials");let r=er(t);t.v_.add(3),await pi(t),r&&t.x_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.v_.delete(3),await Va(t)}async function wA(n,e){let t=D(n);e?(t.v_.delete(2),await Va(t)):e||(t.v_.add(2),await pi(t),t.x_.set("Unknown"))}function ts(n){return n.N_||(n.N_=function(t,r,s){let i=D(t);return i.R_(),new vh(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{Po:lA.bind(null,n),To:hA.bind(null,n),u_:dA.bind(null,n)}),n.F_.push(async e=>{e?(n.N_.Zo(),fd(n)?dd(n):n.x_.set("Unknown")):(await n.N_.stop(),I_(n))})),n.N_}function an(n){return n.B_||(n.B_=function(t,r,s){let i=D(t);return i.R_(),new Eh(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{Po:pA.bind(null,n),To:yA.bind(null,n),E_:gA.bind(null,n),T_:_A.bind(null,n)}),n.F_.push(async e=>{e?(n.B_.Zo(),await gi(n)):(await n.B_.stop(),n.D_.length>0&&(w("RemoteStore",`Stopping write stream with ${n.D_.length} pending writes`),n.D_=[]))})),n.B_}var Sh=class n{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Me,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){let o=Date.now()+r,a=new n(e,t,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new I(p.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function md(n,e){if(Ne("AsyncQueue",`${e}: ${n}`),un(n))return new I(p.UNAVAILABLE,`${e}: ${n}`);throw n}var ya=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||E.comparator(t.key,r.key):(t,r)=>E.comparator(t.key,r.key),this.keyedMap=Bs(),this.sortedSet=new Q(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var wa=class{constructor(){this.L_=new Q(E.comparator)}track(e){let t=e.doc.key,r=this.L_.get(t);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(t,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(t):e.type===1&&r.type===2?this.L_=this.L_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):S():this.L_=this.L_.insert(t,e)}k_(){let e=[];return this.L_.inorderTraversal((t,r)=>{e.push(r)}),e}},Qr=class n{constructor(e,t,r,s,i,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,s,i){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,ya.emptySet(t),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Oa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}};var Rh=class{constructor(){this.q_=void 0,this.Q_=[]}},Ch=class{constructor(){this.queries=new gt(e=>Lg(e),Oa),this.onlineState="Unknown",this.K_=new Set}};async function A_(n,e){let t=D(n),r=e.query,s=!1,i=t.queries.get(r);if(i||(s=!0,i=new Rh),s)try{i.q_=await t.onListen(r)}catch(o){let a=md(o,`Initialization of query '${Pr(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,i),i.Q_.push(e),e.U_(t.onlineState),i.q_&&e.W_(i.q_)&&pd(t)}async function b_(n,e){let t=D(n),r=e.query,s=!1,i=t.queries.get(r);if(i){let o=i.Q_.indexOf(e);o>=0&&(i.Q_.splice(o,1),s=i.Q_.length===0)}if(s)return t.queries.delete(r),t.onUnlisten(r)}function IA(n,e){let t=D(n),r=!1;for(let s of e){let i=s.query,o=t.queries.get(i);if(o){for(let a of o.Q_)a.W_(s)&&(r=!0);o.q_=s}}r&&pd(t)}function vA(n,e,t){let r=D(n),s=r.queries.get(e);if(s)for(let i of s.Q_)i.onError(t);r.queries.delete(e)}function pd(n){n.K_.forEach(e=>{e.next()})}var Ia=class{constructor(e,t,r){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){let r=[];for(let s of e.docChanges)s.type!==3&&r.push(s);e=new Qr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;let r=t!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}H_(e){if(e.docChanges.length>0)return!0;let t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Y_(e){e=Qr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}};var va=class{constructor(e){this.key=e}},Ea=class{constructor(e){this.key=e}},Ph=class{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=V(),this.mutatedKeys=V(),this.ua=Vg(e),this.ca=new ya(this.ua)}get la(){return this.oa}ha(e,t){let r=t?t.Pa:new wa,s=t?t.ca:this.ca,i=t?t.mutatedKeys:this.mutatedKeys,o=s,a=!1,c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((l,h)=>{let d=s.get(l),f=mi(this.query,h)?h:null,_=!!d&&this.mutatedKeys.has(d.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),g=!1;d&&f?d.data.isEqual(f.data)?_!==y&&(r.track({type:3,doc:f}),g=!0):this.Ia(d,f)||(r.track({type:2,doc:f}),g=!0,(c&&this.ua(f,c)>0||u&&this.ua(f,u)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),g=!0):d&&!f&&(r.track({type:1,doc:d}),g=!0,(c||u)&&(a=!0)),g&&(f?(o=o.add(f),i=y?i.add(l):i.delete(l)):(o=o.delete(l),i=i.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),i=i.delete(l.key),r.track({type:1,doc:l})}return{ca:o,Pa:r,Xi:a,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){let i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;let o=e.Pa.k_();o.sort((l,h)=>function(f,_){let y=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return S()}};return y(f)-y(_)}(l.type,h.type)||this.ua(l.doc,h.doc)),this.Ta(r),s=s!=null&&s;let a=t&&!s?this.Ea():[],c=this.aa.size===0&&this.current&&!s?1:0,u=c!==this._a;return this._a=c,o.length!==0||u?{snapshot:new Qr(this.query,e.ca,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new wa,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(t=>this.oa=this.oa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.oa=this.oa.delete(t)),this.current=e.current)}Ea(){if(!this.current)return[];let e=this.aa;this.aa=V(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});let t=[];return e.forEach(r=>{this.aa.has(r)||t.push(new Ea(r))}),this.aa.forEach(r=>{e.has(r)||t.push(new va(r))}),t}Ra(e){this.oa=e.hs,this.aa=V();let t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return Qr.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},kh=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Dh=class{constructor(e){this.key=e,this.ma=!1}},Nh=class{constructor(e,t,r,s,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new gt(a=>Lg(a),Oa),this.pa=new Map,this.ya=new Set,this.wa=new Q(E.comparator),this.Sa=new Map,this.ba=new oi,this.Da={},this.Ca=new Map,this.va=Wr.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};async function EA(n,e){let t=NA(n),r,s,i=t.ga.get(e);if(i)r=i.targetId,t.sharedClientState.addLocalQueryTarget(r),s=i.view.Va();else{let o=await iA(t.localStore,Ke(e)),a=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await TA(t,e,r,a==="current",o.resumeToken),t.isPrimaryClient&&__(t.remoteStore,o)}return s}async function TA(n,e,t,r,s){n.Ma=(h,d,f)=>async function(y,g,T,C){let b=g.view.ha(T);b.Xi&&(b=await ug(y.localStore,g.query,!1).then(({documents:K})=>g.view.ha(K,b)));let A=C&&C.targetChanges.get(g.targetId),L=C&&C.targetMismatches.get(g.targetId)!=null,O=g.view.applyChanges(b,y.isPrimaryClient,A,L);return dg(y,g.targetId,O.da),O.snapshot}(n,h,d,f);let i=await ug(n.localStore,e,!0),o=new Ph(e,i.hs),a=o.ha(i.documents),c=ni.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),u=o.applyChanges(a,n.isPrimaryClient,c);dg(n,t,u.da);let l=new kh(e,t,o);return n.ga.set(e,l),n.pa.has(t)?n.pa.get(t).push(e):n.pa.set(t,[e]),u.snapshot}async function AA(n,e){let t=D(n),r=t.ga.get(e),s=t.pa.get(r.targetId);if(s.length>1)return t.pa.set(r.targetId,s.filter(i=>!Oa(i,e))),void t.ga.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||await _h(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),y_(t.remoteStore,r.targetId),xh(t,r.targetId)}).catch(Xn)):(xh(t,r.targetId),await _h(t.localStore,r.targetId,!0))}async function bA(n,e,t){let r=k_(n);try{let s=await function(o,a){let c=D(o),u=te.now(),l=a.reduce((f,_)=>f.add(_.key),V()),h,d;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let _=qe(),y=V();return c.os.getEntries(f,l).next(g=>{_=g,_.forEach((T,C)=>{C.isValidDocument()||(y=y.add(T))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,_)).next(g=>{h=g;let T=[];for(let C of a){let b=OT(C,h.get(C.key).overlayedDocument);b!=null&&T.push(new Xe(C.key,b,Cg(b.value.mapValue),Re.exists(!0)))}return c.mutationQueue.addMutationBatch(f,u,T,a)}).next(g=>{d=g;let T=g.applyToLocalDocumentSet(h,y);return c.documentOverlayCache.saveOverlays(f,g.batchId,T)})}).then(()=>({batchId:d.batchId,changes:Ug(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let u=o.Da[o.currentUser.toKey()];u||(u=new Q(x)),u=u.insert(a,c),o.Da[o.currentUser.toKey()]=u}(r,s.batchId,t),await _i(r,s.changes),await gi(r.remoteStore)}catch(s){let i=md(s,"Failed to persist write");t.reject(i)}}async function S_(n,e){let t=D(n);try{let r=await nA(t.localStore,e);e.targetChanges.forEach((s,i)=>{let o=t.Sa.get(i);o&&(R(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.ma=!0:s.modifiedDocuments.size>0?R(o.ma):s.removedDocuments.size>0&&(R(o.ma),o.ma=!1))}),await _i(t,r,e)}catch(r){await Xn(r)}}function hg(n,e,t){let r=D(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let s=[];r.ga.forEach((i,o)=>{let a=o.view.U_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){let c=D(o);c.onlineState=a;let u=!1;c.queries.forEach((l,h)=>{for(let d of h.Q_)d.U_(a)&&(u=!0)}),u&&pd(c)}(r.eventManager,e),s.length&&r.fa.u_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SA(n,e,t){let r=D(n);r.sharedClientState.updateQueryState(e,"rejected",t);let s=r.Sa.get(e),i=s&&s.key;if(i){let o=new Q(E.comparator);o=o.insert(i,ce.newNoDocument(i,k.min()));let a=V().add(i),c=new Jo(k.min(),new Map,new Q(x),o,a);await S_(r,c),r.wa=r.wa.remove(i),r.Sa.delete(e),gd(r)}else await _h(r.localStore,e,!1).then(()=>xh(r,e,t)).catch(Xn)}async function RA(n,e){let t=D(n),r=e.batch.batchId;try{let s=await tA(t.localStore,e);C_(t,r,null),R_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await _i(t,s)}catch(s){await Xn(s)}}async function CA(n,e,t){let r=D(n);try{let s=await function(o,a){let c=D(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(h=>(R(h!==null),l=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);C_(r,e,t),R_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await _i(r,s)}catch(s){await Xn(s)}}function R_(n,e){(n.Ca.get(e)||[]).forEach(t=>{t.resolve()}),n.Ca.delete(e)}function C_(n,e,t){let r=D(n),s=r.Da[r.currentUser.toKey()];if(s){let i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),r.Da[r.currentUser.toKey()]=s}}function xh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.pa.get(e))n.ga.delete(r),t&&n.fa.xa(r,t);n.pa.delete(e),n.isPrimaryClient&&n.ba.Vr(e).forEach(r=>{n.ba.containsKey(r)||P_(n,r)})}function P_(n,e){n.ya.delete(e.path.canonicalString());let t=n.wa.get(e);t!==null&&(y_(n.remoteStore,t),n.wa=n.wa.remove(e),n.Sa.delete(t),gd(n))}function dg(n,e,t){for(let r of t)r instanceof va?(n.ba.addReference(r.key,e),PA(n,r)):r instanceof Ea?(w("SyncEngine","Document no longer in limbo: "+r.key),n.ba.removeReference(r.key,e),n.ba.containsKey(r.key)||P_(n,r.key)):S()}function PA(n,e){let t=e.key,r=t.path.canonicalString();n.wa.get(t)||n.ya.has(r)||(w("SyncEngine","New document in limbo: "+t),n.ya.add(r),gd(n))}function gd(n){for(;n.ya.size>0&&n.wa.size<n.maxConcurrentLimboResolutions;){let e=n.ya.values().next().value;n.ya.delete(e);let t=new E(B.fromString(e)),r=n.va.next();n.Sa.set(r,new Dh(t)),n.wa=n.wa.insert(t,r),__(n.remoteStore,new Hr(Ke(xa(t.path)),r,"TargetPurposeLimboResolution",Ve._e))}}async function _i(n,e,t){let r=D(n),s=[],i=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,c)=>{o.push(r.Ma(c,e,t).then(u=>{if((u||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){s.push(u);let l=mh.Ki(c.targetId,u);i.push(l)}}))}),await Promise.all(o),r.fa.u_(s),await async function(c,u){let l=D(c);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>m.forEach(u,d=>m.forEach(d.qi,f=>l.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>m.forEach(d.Qi,f=>l.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!un(h))throw h;w("LocalStore","Failed to update sequence numbers: "+h)}for(let h of u){let d=h.targetId;if(!h.fromCache){let f=l.ns.get(d),_=f.snapshotVersion,y=f.withLastLimboFreeSnapshotVersion(_);l.ns=l.ns.insert(d,y)}}}(r.localStore,i))}async function kA(n,e){let t=D(n);if(!t.currentUser.isEqual(e)){w("SyncEngine","User change. New user:",e.toKey());let r=await p_(t.localStore,e);t.currentUser=e,function(i,o){i.Ca.forEach(a=>{a.forEach(c=>{c.reject(new I(p.CANCELLED,o))})}),i.Ca.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _i(t,r.us)}}function DA(n,e){let t=D(n),r=t.Sa.get(e);if(r&&r.ma)return V().add(r.key);{let s=V(),i=t.pa.get(e);if(!i)return s;for(let o of i){let a=t.ga.get(o);s=s.unionWith(a.view.la)}return s}}function NA(n){let e=D(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=S_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SA.bind(null,e),e.fa.u_=IA.bind(null,e.eventManager),e.fa.xa=vA.bind(null,e.eventManager),e}function k_(n){let e=D(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CA.bind(null,e),e}var ci=class{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=La(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return m_(this.persistence,new da,e.initialUser,this.serializer)}createPersistence(e){return new la(ha.Hr,this.serializer)}createSharedClientState(e){return new ma}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};var Oh=class extends ci{constructor(e,t,r){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await k_(this.Na.syncEngine),await gi(this.Na.remoteStore),await this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return m_(this.persistence,new da,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Zl(r,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){let r=new gl(t,this.persistence);return new pl(e.asyncQueue,r)}createPersistence(e){let t=eA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?$e.withCacheSize(this.cacheSizeBytes):$e.DEFAULT;return new fh(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,cA(),Uo(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new ma}};var Ta=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kA.bind(null,this.syncEngine),await wA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Ch}()}createDatastore(e){let t=La(e.databaseInfo.databaseId),r=function(i){return new Ih(i)}(e.databaseInfo);return function(i,o,a,c){return new Th(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,i,o,a){return new bh(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>hg(this.syncEngine,t,0),function(){return pa.D()?new pa:new yh}())}createSyncEngine(e,t){return function(s,i,o,a,c,u,l){let h=new Nh(s,i,o,a,c,u);return l&&(h.Fa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(r){let s=D(r);w("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await pi(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}};var Aa=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Ne("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var Lh=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new I(p.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=await async function(s,i){let o=D(s),a={documents:i.map(h=>ri(o.serializer,h))},c=await o.vo("BatchGetDocuments",o.serializer.databaseId,B.emptyPath(),a,i.length),u=new Map;c.forEach(h=>{let d=jT(o.serializer,h);u.set(d.key.toString(),d)});let l=[];return i.forEach(h=>{let d=u.get(h.toString());R(!!d),l.push(d)}),l}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new $r(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let s=E.fromPath(r);this.mutations.push(new Zs(s,this.precondition(s)))}),await async function(r,s){let i=D(r),o={writes:s.map(a=>si(i.serializer,a))};await i.So("Commit",i.serializer.databaseId,B.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw S();t=k.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new I(p.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(k.min())?Re.exists(!1):Re.updateTime(t):Re.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(k.min()))throw new I(p.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Re.updateTime(t)}return Re.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Vh=class{constructor(e,t,r,s,i){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=i,this.za=r.maxAttempts,this.jo=new ai(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo(async()=>{let e=new Lh(this.datastore),t=this.Ja(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.Ya(s)}))}).catch(r=>{this.Ya(r)})})}Ja(e){try{let t=this.updateFunction(e);return!di(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Wg(t)}return!1}};var Mh=class{constructor(e,t,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=oe.UNAUTHENTICATED,this.clientId=qo.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{w("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(w("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new I(p.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Me;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=md(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function sl(n,e){n.asyncQueue.verifyOperationInProgress(),w("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await p_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function fg(n,e){n.asyncQueue.verifyOperationInProgress();let t=await OA(n);w("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>lg(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>lg(e.remoteStore,s)),n._onlineComponents=e}function xA(n){return n.name==="FirebaseError"?n.code===p.FAILED_PRECONDITION||n.code===p.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}async function OA(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){w("FirestoreClient","Using user provided OfflineComponentProvider");try{await sl(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!xA(t))throw t;Mr("Error using user provided cache. Falling back to memory cache: "+t),await sl(n,new ci)}}else w("FirestoreClient","Using default OfflineComponentProvider"),await sl(n,new ci);return n._offlineComponents}async function _d(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(w("FirestoreClient","Using user provided OnlineComponentProvider"),await fg(n,n._uninitializedComponentsProvider._online)):(w("FirestoreClient","Using default OnlineComponentProvider"),await fg(n,new Ta))),n._onlineComponents}function LA(n){return _d(n).then(e=>e.syncEngine)}function D_(n){return _d(n).then(e=>e.datastore)}async function N_(n){let e=await _d(n),t=e.eventManager;return t.onListen=EA.bind(null,e.syncEngine),t.onUnlisten=AA.bind(null,e.syncEngine),t}function VA(n,e,t={}){let r=new Me;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){let l=new Aa({next:d=>{o.enqueueAndForget(()=>b_(i,h));let f=d.docs.has(a);!f&&d.fromCache?u.reject(new I(p.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&c&&c.source==="server"?u.reject(new I(p.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new Ia(xa(a.path),l,{includeMetadataChanges:!0,Z_:!0});return A_(i,h)}(await N_(n),n.asyncQueue,e,t,r)),r.promise}function MA(n,e,t={}){let r=new Me;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){let l=new Aa({next:d=>{o.enqueueAndForget(()=>b_(i,h)),d.fromCache&&c.source==="server"?u.reject(new I(p.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new Ia(a,l,{includeMetadataChanges:!0,Z_:!0});return A_(i,h)}(await N_(n),n.asyncQueue,e,t,r)),r.promise}function x_(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var mg=new Map;function O_(n,e,t){if(!t)throw new I(p.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function UA(n,e,t,r){if(e===!0&&r===!0)throw new I(p.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function pg(n){if(!E.isDocumentKey(n))throw new I(p.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gg(n){if(E.isDocumentKey(n))throw new I(p.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ma(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":S()}function Ot(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new I(p.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Ma(n);throw new I(p.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function FA(n,e){if(e<=0)throw new I(p.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var ba=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new I(p.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new I(p.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new I(p.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new I(p.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new I(p.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Yr=class{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ba({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new I(p.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new I(p.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ba(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new il;switch(r.type){case"firstParty":return new ul(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new I(p.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=mg.get(t);r&&(w("ComponentProvider","Removing Datastore"),mg.delete(t),r.terminate())}(this),Promise.resolve()}};function qA(n,e,t,r={}){var s;let i=(n=Ot(n,Yr))._getSettings(),o=`${e}:${t}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Mr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=oe.MOCK_USER;else{a=Qi(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new I(p.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new oe(u)}n._authCredentials=new ol(new Fo(a,c))}}var Lt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Oe=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Zt=class n extends Lt{constructor(e,t,r){super(e,t,xa(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Oe(this.firestore,null,new E(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function ns(n,e,...t){if(n=M(n),O_("collection","path",e),n instanceof Yr){let r=B.fromString(e,...t);return gg(r),new Zt(n,null,r)}{if(!(n instanceof Oe||n instanceof Zt))throw new I(p.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(B.fromString(e,...t));return gg(r),new Zt(n.firestore,null,r)}}function ln(n,e,...t){if(n=M(n),arguments.length===1&&(e=qo.newId()),O_("doc","path",e),n instanceof Yr){let r=B.fromString(e,...t);return pg(r),new Oe(n,null,new E(r))}{if(!(n instanceof Oe||n instanceof Zt))throw new I(p.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(B.fromString(e,...t));return pg(r),new Oe(n.firestore,n instanceof Zt?n.converter:null,new E(r))}}var Uh=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new ai(this,"async_queue_retry"),this._u=()=>{let t=Uo();t&&w("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};let e=Uo();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;let t=Uo();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});let t=new Me;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!un(e))throw e;w("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(e){let t=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;let s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ne("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.iu=!1,r))));return this.Xa=t,t}enqueueAfterDelay(e,t,r){this.au(),this.ou.indexOf(e)>-1&&(t=0);let s=Sh.createAndSchedule(this,e,t,r,i=>this.lu(i));return this.nu.push(s),s}au(){this.ru&&S()}verifyOperationInProgress(){}async hu(){let e;do e=this.Xa,await e;while(e!==this.Xa)}Pu(e){for(let t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.nu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){let t=this.nu.indexOf(e);this.nu.splice(t,1)}};var cn=class extends Yr{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=function(){return new Uh}(),this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||V_(this),this._firestoreClient.terminate()}};function Ua(n,e,t){t||(t="(default)");let r=ot(n,"firestore");if(r.isInitialized(t)){let s=r.getImmediate({identifier:t}),i=r.getOptions(t);if(Rt(i,e))return s;throw new I(p.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new I(p.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new I(p.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:t})}function L_(n,e){let t=typeof n=="object"?n:Gt(),r=typeof n=="string"?n:e||"(default)",s=ot(t,"firestore").getImmediate({identifier:r});if(!s._initialized){let i=mr("firestore");i&&qA(s,...i)}return s}function yi(n){return n._firestoreClient||V_(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function V_(n){var e,t,r;let s=n._freezeSettings(),i=function(a,c,u,l){return new _l(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,x_(l.experimentalLongPollingOptions),l.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._firestoreClient=new Mh(n._authCredentials,n._appCheckCredentials,n._queue,i),!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}var Fh=class{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}},qh=class{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}};var Jr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ce.fromBase64String(e))}catch(t){throw new I(p.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ce.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Qn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new I(p.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ae(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Yn=class{constructor(e){this._methodName=e}};var ui=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new I(p.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new I(p.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return x(this._lat,e._lat)||x(this._long,e._long)}};var BA=/^__.*__$/,Bh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Xe(e,this.data,this.fieldMask,t,this.fieldTransforms):new on(e,this.data,t,this.fieldTransforms)}},Sa=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xe(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function M_(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw S()}}var Ra=class n{constructor(e,t,r,s,i,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Au({path:r,Vu:!1});return s.mu(e),s}fu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Au({path:r,Vu:!1});return s.Eu(),s}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Pa(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(M_(this.du)&&BA.test(e))throw this.pu('Document fields cannot begin and end with "__"')}},jh=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||La(e)}Su(e,t,r,s=!1){return new Ra({du:e,methodName:t,wu:r,path:ae.emptyPath(),Vu:!1,yu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Fa(n){let e=n._freezeSettings(),t=La(n._databaseId);return new jh(n._databaseId,!!e.ignoreUndefinedProperties,t)}function jA(n,e,t,r,s,i={}){let o=n.Su(i.merge||i.mergeFields?2:0,e,t,s);yd("Data must be an object, but it was:",o,r);let a=B_(r,o),c,u;if(i.merge)c=new Fe(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){let l=[];for(let h of i.mergeFields){let d=$h(e,h,t);if(!o.contains(d))throw new I(p.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);z_(l,d)||l.push(d)}c=new Fe(l),u=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=o.fieldTransforms;return new Bh(new Se(a),c,u)}var Ca=class n extends Yn{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function zA(n,e,t){return new Ra({du:3,wu:e.settings.wu,methodName:n._methodName,Vu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var zh=class n extends Yn{_toFieldTransform(e){return new Xs(e.path,new rn)}isEqual(e){return e instanceof n}},Gh=class n extends Yn{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){let t=zA(this,e,!0),r=this.bu.map(i=>rs(i,t)),s=new xt(r);return new Xs(e.path,s)}isEqual(e){return e instanceof n&&Rt(this.bu,e.bu)}};function U_(n,e,t,r){let s=n.Su(1,e,t);yd("Data must be an object, but it was:",s,r);let i=[],o=Se.empty();Zn(r,(c,u)=>{let l=wd(e,c,t);u=M(u);let h=s.fu(l);if(u instanceof Ca)i.push(l);else{let d=rs(u,h);d!=null&&(i.push(l),o.set(l,d))}});let a=new Fe(i);return new Sa(o,a,s.fieldTransforms)}function F_(n,e,t,r,s,i){let o=n.Su(1,e,t),a=[$h(e,r,t)],c=[s];if(i.length%2!=0)throw new I(p.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push($h(e,i[d])),c.push(i[d+1]);let u=[],l=Se.empty();for(let d=a.length-1;d>=0;--d)if(!z_(u,a[d])){let f=a[d],_=c[d];_=M(_);let y=o.fu(f);if(_ instanceof Ca)u.push(f);else{let g=rs(_,y);g!=null&&(u.push(f),l.set(f,g))}}let h=new Fe(u);return new Sa(l,h,o.fieldTransforms)}function q_(n,e,t,r=!1){return rs(t,n.Su(r?4:3,e))}function rs(n,e){if(j_(n=M(n)))return yd("Unsupported field value:",e,n),B_(n,e);if(n instanceof Yn)return function(r,s){if(!M_(s.du))throw s.pu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.pu(`${r._methodName}() is not currently supported inside arrays`);let i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,s){let i=[],o=0;for(let a of r){let c=rs(a,s.gu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(n,e)}return function(r,s){if((r=M(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return PT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let i=te.fromDate(r);return{timestampValue:Kr(s.serializer,i)}}if(r instanceof te){let i=new te(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kr(s.serializer,i)}}if(r instanceof ui)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jr)return{bytesValue:Yg(s.serializer,r._byteString)};if(r instanceof Oe){let i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:cd(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.pu(`Unsupported field value: ${Ma(r)}`)}(n,e)}function B_(n,e){let t={};return Sg(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zn(n,(r,s)=>{let i=rs(s,e.Ru(r));i!=null&&(t[r]=i)}),{mapValue:{fields:t}}}function j_(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof te||n instanceof ui||n instanceof Jr||n instanceof Oe||n instanceof Yn)}function yd(n,e,t){if(!j_(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){let r=Ma(t);throw r==="an object"?e.pu(n+" a custom object"):e.pu(n+" "+r)}}function $h(n,e,t){if((e=M(e))instanceof Qn)return e._internalPath;if(typeof e=="string")return wd(n,e);throw Pa("Field path arguments must be of type string or ",n,!1,void 0,t)}var GA=new RegExp("[~\\*/\\[\\]]");function wd(n,e,t){if(e.search(GA)>=0)throw Pa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qn(...e.split("."))._internalPath}catch{throw Pa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Pa(n,e,t,r,s){let i=r&&!r.isEmpty(),o=s!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new I(p.INVALID_ARGUMENT,a+n+c)}function z_(n,e){return n.some(t=>t.isEqual(e))}var Jn=class{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Oe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Kh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(qa("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Kh=class extends Jn{data(){return super.data()}};function qa(n,e){return typeof e=="string"?wd(n,e):e instanceof Qn?e._internalPath:e._delegate._internalPath}function $A(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new I(p.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var li=class{},Xr=class extends li{};function _t(n,e,...t){let r=[];e instanceof li&&r.push(e),r=r.concat(t),function(i){let o=i.filter(c=>c instanceof Hh).length,a=i.filter(c=>c instanceof ka).length;if(o>1||o>0&&a>0)throw new I(p.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let s of r)n=s._apply(n);return n}var ka=class n extends Xr{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return G_(e._query,t),new Lt(e.firestore,e.converter,kl(e._query,t))}_parse(e){let t=Fa(e.firestore);return function(i,o,a,c,u,l,h){let d;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new I(p.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){yg(h,l);let f=[];for(let _ of h)f.push(_g(c,i,_));d={arrayValue:{values:f}}}else d=_g(c,i,h)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||yg(h,l),d=q_(a,o,h,l==="in"||l==="not-in");return F.create(u,l,d)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function yt(n,e,t){let r=e,s=qa("where",n);return ka._create(s,r,t)}var Hh=class n extends li{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:z.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(s,i){let o=s,a=i.getFlattenedFilters();for(let c of a)G_(o,c),o=kl(o,c)}(e._query,t),new Lt(e.firestore,e.converter,kl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Wh=class n extends Xr{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(s,i,o){if(s.startAt!==null)throw new I(p.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new I(p.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gn(i,o)}(e._query,this._field,this._direction);return new Lt(e.firestore,e.converter,function(s,i){let o=s.explicitOrderBy.concat([i]);return new Nt(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}};function ss(n,e="asc"){let t=e,r=qa("orderBy",n);return Wh._create(r,t)}var Qh=class n extends Xr{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Lt(e.firestore,e.converter,Yo(e._query,this._limit,this._limitType))}};function is(n){return FA("limit",n),Qh._create("limit",n,"F")}var Yh=class n extends Xr{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=KA(e,this.type,this._docOrFields,this._inclusive);return new Lt(e.firestore,e.converter,function(s,i){return new Nt(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,t))}};function Ba(...n){return Yh._create("startAfter",n,!1)}function KA(n,e,t,r){if(t[0]=M(t[0]),t[0]instanceof Jn)return function(i,o,a,c,u){if(!c)throw new I(p.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let l=[];for(let h of Or(i))if(h.field.isKeyField())l.push(zn(o,c.key));else{let d=c.data.field(h.field);if(Na(d))throw new I(p.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(d===null){let f=h.field.canonicalString();throw new I(p.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}l.push(d)}return new pt(l,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let s=Fa(n.firestore);return function(o,a,c,u,l,h){let d=o.explicitOrderBy;if(l.length>d.length)throw new I(p.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let _=0;_<l.length;_++){let y=l[_];if(d[_].field.isKeyField()){if(typeof y!="string")throw new I(p.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof y}`);if(!ad(o)&&y.indexOf("/")!==-1)throw new I(p.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${y}' contains a slash.`);let g=o.path.child(B.fromString(y));if(!E.isDocumentKey(g))throw new I(p.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${g}' is not because it contains an odd number of segments.`);let T=new E(g);f.push(zn(a,T))}else{let g=q_(c,u,y);f.push(g)}}return new pt(f,h)}(n._query,n.firestore._databaseId,s,e,t,r)}}function _g(n,e,t){if(typeof(t=M(t))=="string"){if(t==="")throw new I(p.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ad(e)&&t.indexOf("/")!==-1)throw new I(p.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(B.fromString(t));if(!E.isDocumentKey(r))throw new I(p.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zn(n,new E(r))}if(t instanceof Oe)return zn(n,t._key);throw new I(p.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ma(t)}.`)}function yg(n,e){if(!Array.isArray(n)||n.length===0)throw new I(p.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function G_(n,e){let t=function(s,i){for(let o of s)for(let a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new I(p.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new I(p.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Da=class{convertValue(e,t="none"){switch(jn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return X(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(tn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw S()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Zn(e,(s,i)=>{r[s]=this.convertValue(i,t)}),r}convertGeoPoint(e){return new ui(X(e.latitude),X(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=id(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Qs(e));default:return null}}convertTimestamp(e){let t=en(e);return new te(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=B.fromString(e);R(i_(r));let s=new qr(r.get(1),r.get(3)),i=new E(r.popFirst(5));return s.isEqual(t)||Ne(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}};function HA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Jh=class extends Da{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Oe(this.firestore,null,t)}};function WA(){return new Fh("count")}var Xt=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},hi=class extends Jn{constructor(e,t,r,s,i,o){super(e,t,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Vr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(qa("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Vr=class extends hi{data(e={}){return super.data(e)}},Xh=class{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Xt(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Vr(this._firestore,this._userDataWriter,r.key,r,new Xt(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new I(p.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{let c=new Vr(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Xt(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{let c=new Vr(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Xt(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter),u=-1,l=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:QA(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function QA(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return S()}}function We(n){n=Ot(n,Oe);let e=Ot(n.firestore,cn);return VA(yi(e),n._key).then(t=>JA(e,n,t))}var Zr=class extends Da{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Oe(this.firestore,null,t)}};function ja(n){n=Ot(n,Lt);let e=Ot(n.firestore,cn),t=yi(e),r=new Zr(e);return $A(n._query),MA(t,n._query).then(s=>new Xh(e,r,n,s))}function wt(n,e,t,...r){n=Ot(n,Oe);let s=Ot(n.firestore,cn),i=Fa(s),o;return o=typeof(e=M(e))=="string"||e instanceof Qn?F_(i,"updateDoc",n._key,e,t,r):U_(i,"updateDoc",n._key,e),YA(s,[o.toMutation(n._key,Re.exists(!0))])}function YA(n,e){return function(r,s){let i=new Me;return r.asyncQueue.enqueueAndForget(async()=>bA(await LA(r),s,i)),i.promise}(yi(n),e)}function JA(n,e,t){let r=t.docs.get(e._key),s=new Zr(n);return new hi(n,s,e._key,r,new Xt(t.hasPendingWrites,t.fromCache),e.converter)}function $_(n){return XA(n,{count:WA()})}function XA(n,e){let t=Ot(n.firestore,cn),r=yi(t),s=function(o,a){let c=[];for(let u in o)Object.prototype.hasOwnProperty.call(o,u)&&c.push(a(o[u],u,o));return c}(e,(i,o)=>new xl(o,i.aggregateType,i._internalFieldPath));return function(o,a,c){let u=new Me;return o.asyncQueue.enqueueAndForget(async()=>{try{let l=await D_(o);u.resolve(uA(l,a,c))}catch(l){u.reject(l)}}),u.promise}(r,n._query,s).then(i=>function(a,c,u){let l=new Zr(a);return new qh(c,l,u)}(t,n,i))}var Zh=class{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=ZA(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}};function za(n){return new Zh(n)}var ed=class{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new Ta,this._offlineComponentProvider=new Oh(this._onlineComponentProvider,e?.cacheSizeBytes,this.forceOwnership)}};function ZA(n){return new ed(n?.forceOwnership)}var eb={maxAttempts:5};function qs(n,e){if((n=M(n)).firestore!==e)throw new I(p.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var td=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Fa(t)}get(t){let r=qs(t,this._firestore),s=new Jh(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return S();let o=i[0];if(o.isFoundDocument())return new Jn(this._firestore,s,o.key,o,r.converter);if(o.isNoDocument())return new Jn(this._firestore,s,r._key,null,r.converter);throw S()})}set(t,r,s){let i=qs(t,this._firestore),o=HA(i.converter,r,s),a=jA(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,s);return this._transaction.set(i._key,a),this}update(t,r,s,...i){let o=qs(t,this._firestore),a;return a=typeof(r=M(r))=="string"||r instanceof Qn?F_(this._dataReader,"Transaction.update",o._key,r,s,i):U_(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){let r=qs(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=qs(e,this._firestore),r=new Zr(this._firestore);return super.get(e).then(s=>new hi(this._firestore,r,t._key,s._document,new Xt(!1,!1),t.converter))}};function K_(n,e,t){n=Ot(n,cn);let r=Object.assign(Object.assign({},eb),t);return function(i){if(i.maxAttempts<1)throw new I(p.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){let c=new Me;return i.asyncQueue.enqueueAndForget(async()=>{let u=await D_(i);new Vh(i.asyncQueue,u,a,o,c).ja()}),c.promise}(yi(n),s=>e(new td(n,s)),r)}function H_(){return new zh("serverTimestamp")}function W_(...n){return new Gh("arrayUnion",n)}(function(e,t=!0){(function(s){es=s})(at),ze(new Ee("firestore",(r,{instanceIdentifier:s,options:i})=>{let o=r.getProvider("app").getImmediate(),a=new cn(new al(r.getProvider("auth-internal")),new hl(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new I(p.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qr(u.options.projectId,l)}(o,s),o);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),pe(vp,"4.4.1",e),pe(vp,"4.4.1","esm2017")})();var Q_=null,Y_=null;var tb=null,J_=null,X_=null,Pe=()=>Q_,Ga=n=>Q_=n,os=()=>Y_,$a=n=>Y_=n;var Ka=n=>tb=n,Vt=()=>J_,hn=n=>J_=n,Qe=()=>X_,Ha=n=>X_=n;var Be=n=>document.querySelector(`[data-pfc-form="${n}"]`),Z_="",ye=(n,e)=>{let t=n.querySelector("[data-pfc-loader]");t.style.display="flex";let r=n.firstChild;Z_=r.textContent,e&&(r.textContent=e)},we=n=>{let e=n.querySelector("[data-pfc-loader]");e.style.display="none";let t=n.firstChild;t.textContent=Z_},nb=(n,e=null)=>{if(e)return e;switch(n){case"auth/user-not-found":return"User not found. Please check your email or register for an account.";case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/invalid-email":return"Invalid email address. Please enter a valid email.";case"auth/email-already-in-use":return"Email already in use. Please use a different email or sign in.";case"auth/weak-password":return"Weak password. Please choose a stronger password.";case"auth/too-many-requests":return"Too many unsuccessful login attempts. Try again later.";case"auth/operation-not-allowed":return"This operation is not allowed. Please contact support.";case"auth/user-disabled":return"Your account has been disabled. Please contact support.";case"firestore/permission-denied":return"You have missing or insufficient permissions.";default:return`Firebase error: ${n}`}},Wa=(n,e)=>{let t=document.querySelector(n),r=t.children[1],s=t.children[2];r.innerText=e,t.style.display="flex",setTimeout(()=>{t.classList.add("is-visible")},100),setTimeout(()=>{t.classList.remove("is-visible"),setTimeout(()=>{t.style.display="none"},300)},5e3),s.addEventListener("click",()=>{t.classList.remove("is-visible"),setTimeout(()=>{t.style.display="none"},300)})},W=n=>{if(!n){console.error("Invalid or missing error object:",n),Wa("[data-pfc-error]","An unexpected error occurred.");return}if(n.code){let e=n.code,t=nb(e);Wa("[data-pfc-error]",t)}else Wa("[data-pfc-error]",n)},ke=n=>{Wa("[data-pfc-success]",n)},G=(n,e)=>{we(n),W(e)};var rb="firebase",sb="10.7.2";pe(rb,sb,"app");function Qa(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function py(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var gy=py,_y=new St("auth","Firebase",py());var tc=new jt("@firebase/auth");function ib(n,...e){tc.logLevel<=U.WARN&&tc.warn(`Auth (${at}): ${n}`,...e)}function Ja(n,...e){tc.logLevel<=U.ERROR&&tc.error(`Auth (${at}): ${n}`,...e)}function Ze(n,...e){throw Bd(n,...e)}function vt(n,...e){return Bd(n,...e)}function ob(n,e,t){let r=Object.assign(Object.assign({},gy()),{[e]:t});return new St("auth","Firebase",r).create(e,{appName:n.name})}function Bd(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return _y.create(n,...e)}function P(n,e,...t){if(!n)throw Bd(e,...t)}function It(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Ja(e),new Error(e)}function Ut(n,e){n||It(e)}function Ed(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function ab(){return ey()==="http:"||ey()==="https:"}function ey(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function cb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ab()||Lf()||"connection"in navigator)?navigator.onLine:!0}function ub(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var tr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ut(t>e,"Short delay should be less than long delay!"),this.isMobile=Of()||Vf()}get(){return cb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function jd(n,e){Ut(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var nc=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;It("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;It("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;It("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var lb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var hb=new tr(3e4,6e4);function se(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ie(n,e,t,r,s={}){return yy(n,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});let a=pr(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode),nc.fetch()(wy(n,n.config.apiHost,t,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},i))})}async function yy(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},lb),e);try{let s=new Td(n),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();let o=await i.json();if("needConfirmation"in o)throw wi(n,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{let a=i.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw wi(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw wi(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw wi(n,"user-disabled",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw ob(n,l,u);Ze(n,l)}}catch(s){if(s instanceof me)throw s;Ze(n,"network-request-failed",{message:String(s)})}}async function ar(n,e,t,r,s={}){let i=await ie(n,e,t,r,s);return"mfaPendingCredential"in i&&Ze(n,"multi-factor-auth-required",{_serverResponse:i}),i}function wy(n,e,t,r){let s=`${e}${t}?${r}`;return n.config.emulator?jd(n.config,s):`${n.config.apiScheme}://${s}`}function db(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Td=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(vt(this.auth,"network-request-failed")),hb.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function wi(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let s=vt(n,e,r);return s.customData._tokenResponse=t,s}function ty(n){return n!==void 0&&n.enterprise!==void 0}var Ad=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return db(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};async function fb(n,e){return ie(n,"GET","/v2/recaptchaConfig",se(n,e))}async function mb(n,e){return ie(n,"POST","/v1/accounts:delete",e)}async function pb(n,e){return ie(n,"POST","/v1/accounts:lookup",e)}function Ii(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Iy(n,e=!1){let t=M(n),r=await t.getIdToken(e),s=zd(r);P(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");let i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:Ii(Id(s.auth_time)),issuedAtTime:Ii(Id(s.iat)),expirationTime:Ii(Id(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Id(n){return Number(n)*1e3}function zd(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ja("JWT malformed, contained fewer than 3 sections"),null;try{let s=$c(t);return s?JSON.parse(s):(Ja("Failed to decode base64 JWT payload"),null)}catch(s){return Ja("Caught error parsing JWT payload as JSON",s?.toString()),null}}function gb(n){let e=zd(n);return P(e,"internal-error"),P(typeof e.exp<"u","internal-error"),P(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function nr(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof me&&_b(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function _b({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var bd=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var rc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ii(this.lastLoginAt),this.creationTime=Ii(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function sc(n){var e;let t=n.auth,r=await n.getIdToken(),s=await nr(n,pb(t,{idToken:r}));P(s?.users.length,t,"internal-error");let i=s.users[0];n._notifyReloadListener(i);let o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?wb(i.providerUserInfo):[],a=yb(n.providerData,o),c=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!a?.length,l=c?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new rc(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(n,h)}async function vy(n){let e=M(n);await sc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yb(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function wb(n){return n.map(e=>{var{providerId:t}=e,r=Qa(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function Ib(n,e){let t=await yy(n,{},async()=>{let r=pr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=n.config,o=wy(n,s,"/v1/token",`key=${i}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",nc.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function vb(n,e){return ie(n,"POST","/v2/accounts:revokeToken",se(n,e))}var ic=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){P(e.idToken,"internal-error"),P(typeof e.idToken<"u","internal-error"),P(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return P(!this.accessToken||this.refreshToken,e,"user-token-expired"),!t&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:s,expiresIn:i}=await Ib(e,t);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:s,expirationTime:i}=t,o=new n;return r&&(P(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(P(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(P(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return It("not implemented")}};function dn(n,e){P(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var vi=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,i=Qa(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new rc(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await nr(this,this.stsTokenManager.getToken(this.auth,e));return P(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Iy(this,e)}reload(){return vy(this)}_assign(e){this!==e&&(P(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){P(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await sc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){let e=await this.getIdToken();return await nr(this,mb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,i,o,a,c,u,l;let h=(r=t.displayName)!==null&&r!==void 0?r:void 0,d=(s=t.email)!==null&&s!==void 0?s:void 0,f=(i=t.phoneNumber)!==null&&i!==void 0?i:void 0,_=(o=t.photoURL)!==null&&o!==void 0?o:void 0,y=(a=t.tenantId)!==null&&a!==void 0?a:void 0,g=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,T=(u=t.createdAt)!==null&&u!==void 0?u:void 0,C=(l=t.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:b,emailVerified:A,isAnonymous:L,providerData:O,stsTokenManager:K}=t;P(b&&K,e,"internal-error");let ue=ic.fromJSON(this.name,K);P(typeof b=="string",e,"internal-error"),dn(h,e.name),dn(d,e.name),P(typeof A=="boolean",e,"internal-error"),P(typeof L=="boolean",e,"internal-error"),dn(f,e.name),dn(_,e.name),dn(y,e.name),dn(g,e.name),dn(T,e.name),dn(C,e.name);let st=new n({uid:b,auth:e,email:d,emailVerified:A,displayName:h,isAnonymous:L,photoURL:_,phoneNumber:f,tenantId:y,stsTokenManager:ue,createdAt:T,lastLoginAt:C});return O&&Array.isArray(O)&&(st.providerData=O.map(An=>Object.assign({},An))),g&&(st._redirectEventId=g),st}static async _fromIdTokenResponse(e,t,r=!1){let s=new ic;s.updateFromServerResponse(t);let i=new n({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await sc(i),i}};var ny=new Map;function Mt(n){Ut(n instanceof Function,"Expected a class definition");let e=ny.get(n);return e?(Ut(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ny.set(n,e),e)}var oc=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};oc.type="NONE";var Sd=oc;function Xa(n,e,t){return`firebase:${n}:${e}:${t}`}var ac=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:s,name:i}=this.auth;this.fullUserKey=Xa(this.userKey,s.apiKey,i),this.fullPersistenceKey=Xa("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?vi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Mt(Sd),e,r);let s=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u),i=s[0]||Mt(Sd),o=Xa(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let l=await u._get(o);if(l){let h=vi._fromJSON(e,l);u!==i&&(a=h),i=u;break}}catch{}let c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new n(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new n(i,e,r))}};function ry(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ay(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ey(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Sy(e))return"Blackberry";if(Ry(e))return"Webos";if(Gd(e))return"Safari";if((e.includes("chrome/")||Ty(e))&&!e.includes("edge/"))return"Chrome";if(by(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Ey(n=Y()){return/firefox\//i.test(n)}function Gd(n=Y()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ty(n=Y()){return/crios\//i.test(n)}function Ay(n=Y()){return/iemobile/i.test(n)}function by(n=Y()){return/android/i.test(n)}function Sy(n=Y()){return/blackberry/i.test(n)}function Ry(n=Y()){return/webos/i.test(n)}function bc(n=Y()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Eb(n=Y()){var e;return bc(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Tb(){return Mf()&&document.documentMode===10}function Cy(n=Y()){return bc(n)||by(n)||Ry(n)||Sy(n)||/windows phone/i.test(n)||Ay(n)}function Ab(){try{return!!(window&&window!==window.top)}catch{return!1}}function Py(n,e=[]){let t;switch(n){case"Browser":t=ry(Y());break;case"Worker":t=`${ry(Y())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${at}/${r}`}var Rd=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=i=>new Promise((o,a)=>{try{let c=e(i);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function bb(n,e={}){return ie(n,"GET","/v2/passwordPolicy",se(n,e))}var Sb=6,Cd=class{constructor(e){var t,r,s,i;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:Sb,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,i,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}};var Pd=class{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cc(this),this.idTokenSubscription=new cc(this),this.beforeStateQueue=new Rd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_y,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Mt(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ac.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var t;let r=await this.assertedPersistence.getCurrentUser(),s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=s?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return P(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await sc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ub()}async _delete(){this._deleted=!0}async updateCurrentUser(e){let t=e?M(e):null;return t&&P(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&P(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Mt(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await bb(this),t=new Cd(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new St("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await vb(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Mt(e)||this._popupRedirectResolver;P(t,this,"argument-error"),this.redirectPersistenceManager=await ac.create(this,[Mt(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};let i=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(P(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,s);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return P(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Py(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&ib(`Error while retrieving App Check token: ${t.error}`),t?.token}};function fn(n){return M(n)}var cc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=qf(t=>this.observer=t)}get next(){return P(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};function Rb(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}function ky(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{let i=vt("internal-error");i.customData=s,t(i)},r.type="text/javascript",r.charset="UTF-8",Rb().appendChild(r)})}function Dy(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Cb="https://www.google.com/recaptcha/enterprise.js?render=",Pb="recaptcha-enterprise",kb="NO_RECAPTCHA",kd=class{constructor(e){this.type=Pb,this.auth=fn(e)}async verify(e="verify",t=!1){async function r(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{fb(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new Ad(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})})}function s(i,o,a){let c=window.grecaptcha;ty(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(kb)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!t&&ty(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}ky(Cb+a).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}};async function sy(n,e,t,r=!1){let s=new kd(n),i;try{i=await s.verify(t)}catch{i=await s.verify(t,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Dd(n,e,t,r){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let i=await sy(n,e,t,t==="getOobCode");return r(n,i)}else return r(n,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=await sy(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(i)})}function Ny(n,e){let t=ot(n,"auth");if(t.isInitialized()){let s=t.getImmediate(),i=t.getOptions();if(Rt(i,e??{}))return s;Ze(s,"already-initialized")}return t.initialize({options:e})}function Db(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Mt);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function xy(n,e,t){let r=fn(n);P(r._canInitEmulator,r,"emulator-config-failed"),P(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let s=!!t?.disableWarnings,i=Oy(e),{host:o,port:a}=Nb(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||xb()}function Oy(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Nb(n){let e=Oy(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){let i=s[1];return{host:i,port:iy(r.substr(i.length+1))}}else{let[i,o]=r.split(":");return{host:i,port:iy(o)}}}function iy(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function xb(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var rr=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return It("not implemented")}_getIdTokenResponse(e){return It("not implemented")}_linkToIdToken(e,t){return It("not implemented")}_getReauthenticationResolver(e){return It("not implemented")}};async function Ob(n,e){return ie(n,"POST","/v1/accounts:resetPassword",se(n,e))}async function Lb(n,e){return ie(n,"POST","/v1/accounts:update",e)}async function Vb(n,e){return ie(n,"POST","/v1/accounts:signUp",e)}async function Mb(n,e){return ar(n,"POST","/v1/accounts:signInWithPassword",se(n,e))}async function Ub(n,e){return ie(n,"POST","/v1/accounts:sendOobCode",se(n,e))}async function Fb(n,e){return Ub(n,e)}async function qb(n,e){return ar(n,"POST","/v1/accounts:signInWithEmailLink",se(n,e))}async function Bb(n,e){return ar(n,"POST","/v1/accounts:signInWithEmailLink",se(n,e))}var Ei=class n extends rr{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dd(e,t,"signInWithPassword",Mb);case"emailLink":return qb(e,{email:this._email,oobCode:this._password});default:Ze(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dd(e,r,"signUpPassword",Vb);case"emailLink":return Bb(e,{idToken:t,email:this._email,oobCode:this._password});default:Ze(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function as(n,e){return ar(n,"POST","/v1/accounts:signInWithIdp",se(n,e))}var jb="http://localhost",sr=class n extends rr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ze("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,i=Qa(t,["providerId","signInMethod"]);if(!r||!s)return null;let o=new n(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return as(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,as(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,as(e,t)}buildRequest(){let e={requestUri:jb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pr(t)}return e}};async function zb(n,e){return ie(n,"POST","/v1/accounts:sendVerificationCode",se(n,e))}async function Gb(n,e){return ar(n,"POST","/v1/accounts:signInWithPhoneNumber",se(n,e))}async function $b(n,e){let t=await ar(n,"POST","/v1/accounts:signInWithPhoneNumber",se(n,e));if(t.temporaryProof)throw wi(n,"account-exists-with-different-credential",t);return t}var Kb={USER_NOT_FOUND:"user-not-found"};async function Hb(n,e){let t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return ar(n,"POST","/v1/accounts:signInWithPhoneNumber",se(n,t),Kb)}var Ti=class n extends rr{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new n({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new n({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return Gb(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return $b(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return Hb(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:s}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:s}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));let{verificationId:t,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!t&&!s&&!i?null:new n({verificationId:t,verificationCode:r,phoneNumber:s,temporaryProof:i})}};function Wb(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Qb(n){let e=gr(_r(n)).link,t=e?gr(_r(e)).deep_link_id:null,r=gr(_r(n)).deep_link_id;return(r?gr(_r(r)).link:null)||r||t||e||n}var uc=class n{constructor(e){var t,r,s,i,o,a;let c=gr(_r(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,l=(r=c.oobCode)!==null&&r!==void 0?r:null,h=Wb((s=c.mode)!==null&&s!==void 0?s:null);P(u&&l&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=l,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=Qb(e);try{return new n(t)}catch{return null}}};var Ft=class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(e,t){return Ei._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let r=uc.parseLink(t);return P(r,"argument-error"),Ei._fromEmailAndCode(e,r.code,r.tenantId)}};Ft.PROVIDER_ID="password";Ft.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ft.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var lc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ir=class extends lc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Ai=class n extends ir{constructor(){super("facebook.com")}static credential(e){return sr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return n.credential(e.oauthAccessToken)}catch{return null}}};Ai.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ai.PROVIDER_ID="facebook.com";var bi=class n extends ir{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return sr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return n.credential(t,r)}catch{return null}}};bi.GOOGLE_SIGN_IN_METHOD="google.com";bi.PROVIDER_ID="google.com";var Si=class n extends ir{constructor(){super("github.com")}static credential(e){return sr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return n.credential(e.oauthAccessToken)}catch{return null}}};Si.GITHUB_SIGN_IN_METHOD="github.com";Si.PROVIDER_ID="github.com";var Ri=class n extends ir{constructor(){super("twitter.com")}static credential(e,t){return sr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return n.credential(t,r)}catch{return null}}};Ri.TWITTER_SIGN_IN_METHOD="twitter.com";Ri.PROVIDER_ID="twitter.com";var Ci=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){let i=await vi._fromIdTokenResponse(e,r,s),o=oy(r);return new n({user:i,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let s=oy(r);return new n({user:e,providerId:s,_tokenResponse:r,operationType:t})}};function oy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Nd=class n extends me{constructor(e,t,r,s){var i;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new n(e,t,r,s)}};function Ly(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Nd._fromErrorAndOperation(n,i,e,r):i})}async function Yb(n,e,t=!1){let r=await nr(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ci._forOperation(n,"link",r)}async function Vy(n,e,t=!1){let{auth:r}=n,s="reauthenticate";try{let i=await nr(n,Ly(r,s,e,n),t);P(i.idToken,r,"internal-error");let o=zd(i.idToken);P(o,r,"internal-error");let{sub:a}=o;return P(n.uid===a,r,"user-mismatch"),Ci._forOperation(n,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&Ze(r,"user-mismatch"),i}}async function My(n,e,t=!1){let r="signIn",s=await Ly(n,r,e),i=await Ci._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(i.user),i}async function Uy(n,e){return My(fn(n),e)}async function $d(n,e){return Vy(M(n),e)}function Jb(n,e,t){var r;P(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),P(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(P(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(P(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}async function Fy(n){let e=fn(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Kd(n,e,t){let r=fn(n),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Jb(r,s,t),await Dd(r,s,"getOobCode",Fb)}async function Hd(n,e,t){await Ob(M(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Fy(n),r})}function Wd(n,e,t){return Uy(M(n),Ft.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Fy(n),r})}async function Xb(n,e){return ie(n,"POST","/v1/accounts:update",e)}async function Di(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let r=M(n),i={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await nr(r,Xb(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;let a=r.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Qd(n,e){return qy(M(n),e,null)}function Yd(n,e){return qy(M(n),null,e)}async function qy(n,e,t){let{auth:r}=n,i={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(i.email=e),t&&(i.password=t);let o=await nr(n,Lb(r,i));await n._updateTokensIfNecessary(o,!0)}function By(n,e,t,r){return M(n).onIdTokenChanged(e,t,r)}function jy(n,e,t){return M(n).beforeAuthStateChanged(e,t)}function Jd(n,e,t,r){return M(n).onAuthStateChanged(e,t,r)}function Xd(n){return M(n).signOut()}function Zb(n,e){return ie(n,"POST","/v2/accounts/mfaEnrollment:start",se(n,e))}function eS(n,e){return ie(n,"POST","/v2/accounts/mfaEnrollment:finalize",se(n,e))}function tS(n,e){return ie(n,"POST","/v2/accounts/mfaEnrollment:start",se(n,e))}function nS(n,e){return ie(n,"POST","/v2/accounts/mfaEnrollment:finalize",se(n,e))}var hc="__sak";var dc=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hc,"1"),this.storage.removeItem(hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function rS(){let n=Y();return Gd(n)||bc(n)}var sS=1e3,iS=10,fc=class extends dc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=rS()&&Ab(),this.fallbackToPolling=Cy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}let r=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!t)return}let s=()=>{let o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Tb()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,iS):s()}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},sS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};fc.type="LOCAL";var zy=fc;var mc=class extends dc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}};mc.type="SESSION";var Zd=mc;function oS(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var pc=class n{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;let r=new n(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:r,eventType:s,data:i}=t.data,o=this.handlersMap[s];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let a=Array.from(o).map(async u=>u(t.origin,i)),c=await oS(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};pc.receivers=[];function ef(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var xd=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{let u=ef("",20);s.port1.start();let l=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){let d=h;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(l),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(d.data.response);break;default:clearTimeout(l),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function Et(){return window}function aS(n){Et().location.href=n}function Gy(){return typeof Et().WorkerGlobalScope<"u"&&typeof Et().importScripts=="function"}async function cS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uS(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function lS(){return Gy()?self:null}var $y="firebaseLocalStorageDb",hS=1,gc="firebaseLocalStorage",Ky="fbase_key",or=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Sc(n,e){return n.transaction([gc],e?"readwrite":"readonly").objectStore(gc)}function dS(){let n=indexedDB.deleteDatabase($y);return new or(n).toPromise()}function Od(){let n=indexedDB.open($y,hS);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(gc,{keyPath:Ky})}catch(s){t(s)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(gc)?e(r):(r.close(),await dS(),e(await Od()))})})}async function ay(n,e,t){let r=Sc(n,!0).put({[Ky]:e,value:t});return new or(r).toPromise()}async function fS(n,e){let t=Sc(n,!1).get(e),r=await new or(t).toPromise();return r===void 0?null:r.value}function cy(n,e){let t=Sc(n,!0).delete(e);return new or(t).toPromise()}var mS=800,pS=3,_c=class{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Od(),this.db)}async _withRetries(e){let t=0;for(;;)try{let r=await this._openDb();return await e(r)}catch(r){if(t++>pS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Gy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pc._getInstance(lS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await cS(),!this.activeServiceWorker)return;this.sender=new xd(this.activeServiceWorker);let r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await Od();return await ay(e,hc,"1"),await cy(e,hc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ay(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(r=>fS(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(s=>{let i=Sc(s,!1).getAll();return new or(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let t=[],r=new Set;if(e.length!==0)for(let{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};_c.type="LOCAL";var Hy=_c;function gS(n,e){return ie(n,"POST","/v2/accounts/mfaSignIn:start",se(n,e))}function _S(n,e){return ie(n,"POST","/v2/accounts/mfaSignIn:finalize",se(n,e))}function yS(n,e){return ie(n,"POST","/v2/accounts/mfaSignIn:finalize",se(n,e))}var PC=Dy("rcb"),kC=new tr(3e4,6e4);var wS="recaptcha";async function IS(n,e,t){var r;let s=await t.verify();try{P(typeof s=="string",n,"argument-error"),P(t.type===wS,n,"argument-error");let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){let o=i.session;if("phoneNumber"in i)return P(o.type==="enroll",n,"internal-error"),(await Zb(n,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{P(o.type==="signin",n,"internal-error");let a=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;return P(a,n,"missing-multi-factor-info"),(await gS(n,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{let{sessionInfo:o}=await zb(n,{phoneNumber:i.phoneNumber,recaptchaToken:s});return o}}finally{t._reset()}}var Pi=class n{constructor(e){this.providerId=n.PROVIDER_ID,this.auth=fn(e)}verifyPhoneNumber(e,t){return IS(this.auth,e,M(t))}static credential(e,t){return Ti._fromVerification(e,t)}static credentialFromResult(e){let t=e;return n.credentialFromTaggedObject(t)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:r}=e;return t&&r?Ti._fromTokenResponse(t,r):null}};Pi.PROVIDER_ID="phone";Pi.PHONE_SIGN_IN_METHOD="phone";function vS(n,e){return e?Mt(e):(P(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var ki=class extends rr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return as(e,this._buildIdpRequest())}_linkToIdToken(e,t){return as(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return as(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function ES(n){return My(n.auth,new ki(n),n.bypassAuthState)}function TS(n){let{auth:e,user:t}=n;return P(t,e,"internal-error"),Vy(t,new ki(n),n.bypassAuthState)}async function AS(n){let{auth:e,user:t}=n;return P(t,e,"internal-error"),Yb(t,new ki(n),n.bypassAuthState)}var yc=class{constructor(e,t,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ES;case"linkViaPopup":case"linkViaRedirect":return AS;case"reauthViaPopup":case"reauthViaRedirect":return TS;default:Ze(this.auth,"internal-error")}}resolve(e){Ut(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ut(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var bS=new tr(2e3,1e4);var Ld=class n extends yc{constructor(e,t,r,s,i){super(e,t,s,i),this.provider=r,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return P(e,this.auth,"internal-error"),e}async onExecution(){Ut(this.filter.length===1,"Popup operations only handle one event");let e=ef();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(vt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(vt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bS.get())};e()}};Ld.currentPopupAction=null;var SS="pendingRedirect",Za=new Map,Vd=class extends yc{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Za.get(this.auth._key());if(!e){try{let r=await RS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Za.set(this.auth._key(),e)}return this.bypassAuthState||Za.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function RS(n,e){let t=kS(e),r=PS(n);if(!await r._isAvailable())return!1;let s=await r._get(t)==="true";return await r._remove(t),s}function CS(n,e){Za.set(n._key(),e)}function PS(n){return Mt(n._redirectPersistence)}function kS(n){return Xa(SS,n.config.apiKey,n.name)}async function DS(n,e,t=!1){let r=fn(n),s=vS(r,e),o=await new Vd(r,s,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var NS=10*60*1e3,Md=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Wy(e)){let s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(vt(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NS&&this.cachedEventUids.clear(),this.cachedEventUids.has(uy(e))}saveEventToCache(e){this.cachedEventUids.add(uy(e)),this.lastProcessedEventTime=Date.now()}};function uy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Wy({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function xS(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wy(n);default:return!1}}async function OS(n,e={}){return ie(n,"GET","/v1/projects",e)}var LS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VS=/^https?/;async function MS(n){if(n.config.emulator)return;let{authorizedDomains:e}=await OS(n);for(let t of e)try{if(US(t))return}catch{}Ze(n,"unauthorized-domain")}function US(n){let e=Ed(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!VS.test(t))return!1;if(LS.test(n))return r===n;let s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}var FS=new tr(3e4,6e4);function ly(){let n=Et().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function qS(n){return new Promise((e,t)=>{var r,s,i;function o(){ly(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ly(),t(vt(n,"network-request-failed"))},timeout:FS.get()})}if(!((s=(r=Et().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Et().gapi)===null||i===void 0)&&i.load)o();else{let a=Dy("iframefcb");return Et()[a]=()=>{gapi.load?o():t(vt(n,"network-request-failed"))},ky(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw ec=null,e})}var ec=null;function BS(n){return ec=ec||qS(n),ec}var jS=new tr(5e3,15e3),zS="__/auth/iframe",GS="emulator/auth/iframe",$S={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HS(n){let e=n.config;P(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?jd(e,GS):`https://${n.config.authDomain}/${zS}`,r={apiKey:e.apiKey,appName:n.name,v:at},s=KS.get(n.config.apiHost);s&&(r.eid=s);let i=n._getFrameworks();return i.length&&(r.fw=i.join(",")),`${t}?${pr(r).slice(1)}`}async function WS(n){let e=await BS(n),t=Et().gapi;return P(t,n,"internal-error"),e.open({where:document.body,url:HS(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$S,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});let o=vt(n,"network-request-failed"),a=Et().setTimeout(()=>{i(o)},jS.get());function c(){Et().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}var QS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},YS=500,JS=600,XS="_blank",ZS="http://localhost",wc=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function e0(n,e,t,r=YS,s=JS){let i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},QS),{width:r.toString(),height:s.toString(),top:i,left:o}),u=Y().toLowerCase();t&&(a=Ty(u)?XS:t),Ey(u)&&(e=e||ZS,c.scrollbars="yes");let l=Object.entries(c).reduce((d,[f,_])=>`${d}${f}=${_},`,"");if(Eb(u)&&a!=="_self")return t0(e||"",a),new wc(null);let h=window.open(e||"",a,l);P(h,n,"popup-blocked");try{h.focus()}catch{}return new wc(h)}function t0(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var n0="__/auth/handler",r0="emulator/auth/handler",s0=encodeURIComponent("fac");async function hy(n,e,t,r,s,i){P(n.config.authDomain,n,"auth-domain-config-required"),P(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:at,eventId:s};if(e instanceof lc){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Ff(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[l,h]of Object.entries(i||{}))o[l]=h}if(e instanceof ir){let l=e.getScopes().filter(h=>h!=="");l.length>0&&(o.scopes=l.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let l of Object.keys(a))a[l]===void 0&&delete a[l];let c=await n._getAppCheckToken(),u=c?`#${s0}=${encodeURIComponent(c)}`:"";return`${i0(n)}?${pr(a).slice(1)}${u}`}function i0({config:n}){return n.emulator?jd(n,r0):`https://${n.authDomain}/${n0}`}var vd="webStorageSupport",Ud=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zd,this._completeRedirectFn=DS,this._overrideRedirectResult=CS}async _openPopup(e,t,r,s){var i;Ut((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");let o=await hy(e,t,r,Ed(),s);return e0(e,o,ef())}async _openRedirect(e,t,r,s){await this._originValidation(e);let i=await hy(e,t,r,Ed(),s);return aS(i),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(Ut(i,"If manager is not set, promise should be"),i)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await WS(e),r=new Md(e);return t.register("authEvent",s=>(P(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(vd,{type:vd},s=>{var i;let o=(i=s?.[0])===null||i===void 0?void 0:i[vd];o!==void 0&&t(!!o),Ze(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=MS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Cy()||Gd()||bc()}},Qy=Ud,Ic=class{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return It("unexpected MultiFactorSessionType")}}},Fd=class n extends Ic{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new n(e)}_finalizeEnroll(e,t,r){return eS(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return _S(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},vc=class{constructor(){}static assertion(e){return Fd._fromCredential(e)}};vc.FACTOR_ID="phone";var Ec=class{static assertionForEnrollment(e,t){return Tc._fromSecret(e,t)}static assertionForSignIn(e,t){return Tc._fromEnrollmentId(e,t)}static async generateSecret(e){var t;let r=e;P(typeof((t=r.user)===null||t===void 0?void 0:t.auth)<"u","internal-error");let s=await tS(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});return Ac._fromStartTotpMfaEnrollmentResponse(s,r.user.auth)}};Ec.FACTOR_ID="totp";var Tc=class n extends Ic{constructor(e,t,r){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=r}static _fromSecret(e,t){return new n(t,void 0,e)}static _fromEnrollmentId(e,t){return new n(t,e)}async _finalizeEnroll(e,t,r){return P(typeof this.secret<"u",e,"argument-error"),nS(e,{idToken:t,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){P(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");let r={verificationCode:this.otp};return yS(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}},Ac=class n{constructor(e,t,r,s,i,o,a){this.sessionInfo=o,this.auth=a,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=r,this.codeIntervalSeconds=s,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(e,t){return new n(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var r;let s=!1;return(Ya(e)||Ya(t))&&(s=!0),s&&(Ya(e)&&(e=((r=this.auth.currentUser)===null||r===void 0?void 0:r.email)||"unknownuser"),Ya(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function Ya(n){return typeof n>"u"||n?.length===0}var dy="@firebase/auth",fy="1.5.1";var qd=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){P(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function o0(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function a0(n){ze(new Ee("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;P(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Py(n)},u=new Pd(r,s,i,c);return Db(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ze(new Ee("auth-internal",e=>{let t=fn(e.getProvider("auth").getImmediate());return(r=>new qd(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),pe(dy,fy,o0(n)),pe(dy,fy,"esm2017")}var c0=5*60,u0=Wc("authIdTokenMaxAge")||c0,my=null,l0=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>u0)return;let s=t?.token;my!==s&&(my=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function tf(n=Gt()){let e=ot(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Ny(n,{popupRedirectResolver:Qy,persistence:[Hy,zy,Zd]}),r=Wc("authTokenSyncURL");if(r){let i=l0(r);jy(t,i,()=>i(t.currentUser)),By(t,o=>i(o))}let s=Kc("auth");return s&&xy(t,`http://${s}`),t}a0("Browser");var h0="type.googleapis.com/google.protobuf.Int64Value",d0="type.googleapis.com/google.protobuf.UInt64Value";function Zy(n,e){let t={};for(let r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function nf(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>nf(e));if(typeof n=="function"||typeof n=="object")return Zy(n,e=>nf(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Rc(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case h0:case d0:{let e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Rc(e)):typeof n=="function"||typeof n=="object"?Zy(n,e=>Rc(e)):n}var af="functions";var Yy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},mn=class extends me{constructor(e,t,r){super(`${af}/${e}`,t||""),this.details=r}};function f0(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function m0(n,e){let t=f0(n),r=t,s;try{let i=e&&e.error;if(i){let o=i.status;if(typeof o=="string"){if(!Yy[o])return new mn("internal","internal");t=Yy[o],r=o}let a=i.message;typeof a=="string"&&(r=a),s=i.details,s!==void 0&&(s=Rc(s))}}catch{}return t==="ok"?null:new mn(t,r,s)}var rf=class{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||t.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{let e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){let t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){let t=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:s}}};var sf="us-central1";function p0(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new mn("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}var of=class{constructor(e,t,r,s,i=sf,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new rf(t,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(i);this.customDomain=a.origin,this.region=sf}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function g0(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}function _0(n,e,t){return r=>w0(n,e,r,t||{})}async function y0(n,e,t,r){t["Content-Type"]="application/json";let s;try{s=await r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let i=null;try{i=await s.json()}catch{}return{status:s.status,json:i}}function w0(n,e,t,r){let s=n._url(e);return I0(n,s,t,r)}async function I0(n,e,t,r){t=nf(t);let s={data:t},i={},o=await n.contextProvider.getContext(r.limitedUseAppCheckTokens);o.authToken&&(i.Authorization="Bearer "+o.authToken),o.messagingToken&&(i["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=o.appCheckToken);let a=r.timeout||7e4,c=p0(a),u=await Promise.race([y0(e,s,i,n.fetchImpl),c.promise,n.cancelAllRequests]);if(c.cancel(),!u)throw new mn("cancelled","Firebase Functions instance was deleted.");let l=m0(u.status,u.json);if(l)throw l;if(!u.json)throw new mn("internal","Response is not valid JSON object.");let h=u.json.data;if(typeof h>"u"&&(h=u.json.result),typeof h>"u")throw new mn("internal","Response is missing data field.");return{data:Rc(h)}}var Jy="@firebase/functions",Xy="0.11.0";var v0="auth-internal",E0="app-check-internal",T0="messaging-internal";function A0(n,e){let t=(r,{instanceIdentifier:s})=>{let i=r.getProvider("app").getImmediate(),o=r.getProvider(v0),a=r.getProvider(T0),c=r.getProvider(E0);return new of(i,o,a,c,s,n)};ze(new Ee(af,t,"PUBLIC").setMultipleInstances(!0)),pe(Jy,Xy,e),pe(Jy,Xy,"esm2017")}function ew(n=Gt(),e=sf){let r=ot(M(n),af).getImmediate({identifier:e}),s=mr("functions");return s&&b0(r,...s),r}function b0(n,e,t){g0(M(n),e,t)}function pn(n,e,t){return _0(M(n),e,t)}A0(fetch.bind(self));var S0={apiKey:"AIzaSyCuzMDALA6IDegRI8-suNTEgm1ZJLwDHhI",authDomain:"performance-food-1566579119507.firebaseapp.com",databaseURL:"https://performance-food-1566579119507.firebaseio.com",projectId:"performance-food-1566579119507",storageBucket:"performance-food-1566579119507.appspot.com",messagingSenderId:"386651551755",appId:"1:386651551755:web:b127ed813e78bf80112f0e",measurementId:"G-P0HSJ7KDYL"},Ni=lu(S0),Tt=tf(Ni),gn=ew(Ni);Ua(Ni,{localCache:za({synchronizeTabs:!0,maxAge:60*60*1e3})});var Le=L_(Ni);var tw=Ni;var Cc=[],Pc=[],cf=[];var uf=[],kc=0,lf=0,nw=1,rw=null,_n=()=>uf,et=n=>{Array.isArray(n)?uf=n:uf=[n],kc=n.length};var qt=()=>kc,xi=(n=kc)=>{kc=n},cr=()=>lf,Oi=(n=lf)=>{lf=n},sw=()=>nw,hf=n=>{nw=n},df=()=>rw,ff=n=>{rw=n},iw=()=>Cc,ow=n=>{Array.isArray(n)?Cc=n:Cc=[n]},aw=n=>{Cc.push(n)},Li=()=>Pc,Dc=n=>{Array.isArray(n)?Pc=n:Pc=[n]},cw=n=>{Pc.push(n)},mf=()=>cf,Nc=n=>{Array.isArray(n)?cf=n:cf=[n]};var uw=()=>{let n=document.querySelectorAll("[data-element='combo-box-component']");n.length&&n.forEach(e=>{let t=e.querySelectorAll("input")[0],r=e.firstElementChild.nextElementSibling.firstElementChild,s=r.firstElementChild,i=r.nextElementSibling,o=i.nextElementSibling,a=e.parentElement.parentElement.nextElementSibling,c=document.querySelector("[data-element='combo-box-pill']"),{userRole:u}=Qe(),l,h=async()=>{let y=t.value;clearTimeout(l),l=setTimeout(async()=>{if(r.innerHTML="",y.length===0){r.parentElement.style.display="none";return}i.style.display="block",o.style.display="none";let g=await d(y);Nc(f(g)),mf().length===0?(i.style.display="none",o.style.display="block"):(o.style.display="none",i.style.display="none",_(mf())),r.parentElement.style.display="block"},300)},d=async y=>{if(u==="multiLocationAdmin")return iw();if(u==="corporateAdmin"){let g=ns(Le,"locations"),T=_t(g,yt("name",">=",y),yt("name","<=",y+"\uF8FF"),ss("name"),is(5)),b=(await ja(T)).docs.map(A=>({id:A.id,locationId:A.data().locationId,name:A.data().name}));return ow(b),console.log(b),b}},f=y=>{let g=Li();return y.filter(T=>!g.some(C=>C.id===T.id))},_=y=>{r.innerHTML="",y.forEach(g=>{let T=s.cloneNode(!0);T.textContent=g.name,T.addEventListener("click",()=>pf(g,c,r,t,a)),r.appendChild(T)})};t.addEventListener("input",h)})},pf=(n,e,t,r,s)=>{let i=e.cloneNode(!0);i.firstChild.textContent=n.name,i.firstElementChild.nextElementSibling.addEventListener("click",()=>{R0(n,i,s)}),r.parentNode.insertBefore(i,r),cw(n),i.style.display="flex",r.value="",t.innerHTML="";let o=[];Li().forEach(a=>{o.push(a.id)}),console.log(o),s.value=o.join(","),console.log(s.value)},R0=(n,e,t)=>{e.remove(),Dc(Li().filter(s=>s.id!==n.id));let r=[];Li().forEach(s=>{r.push(s.id)}),t.value=r.join(",")},lw=n=>{let e=n.firstElementChild.nextElementSibling.firstElementChild,t=n.querySelectorAll("[data-element='combo-box-pill']");t&&t.forEach(r=>{r.remove()}),e.innerHTML="",n.parentElement.parentElement.nextElementSibling.value="",e.parentElement.style.display="none"};var yn=n=>{let e=document.querySelector(`[data-modal=${n}]`);e.classList.add("is-open"),e.querySelectorAll("[data-pfc-action='close-modal']").forEach(s=>{s.addEventListener("click",()=>{r(s)})});let r=s=>{Vi(n),s.removeEventListener("click",r)}},Vi=n=>{let e=document.querySelector(`[data-modal=${n}]`),t=e.querySelector("form"),r=t.getAttribute("data-pfc-form")==="update-email";if(t&&!r){t.reset();let s=t.querySelector("[data-element='combo-box-component']");s&&(n==="update-user"||n==="create-user")&&(Dc([]),Nc([]),lw(s))}e.classList.remove("is-open")};var xc=n=>{switch(n){case"corporateAdmin":return"PFC";case"multiLocationAdmin":return"Multi-Location Admin";case"locationManager":return"Manager";case"fitnessStaff":return"Fitness Staff";case"barStaff":return"Shake/Smoothie Bar Staff";case"other":return"Other";default:return"An unknown error occurred."}},wn=async n=>(await Promise.all(n.map(async t=>{let r=ln(Le,t),s=await We(r);if(s.exists()){let i=s.data();return i.id=s.id,i.locationPath=t,i}return console.error(`Location document not found for reference: ${r.id}`),null}))).filter(Boolean),In=()=>{let e=Qe().userRole;if(!["corporateAdmin","multiLocationAdmin","locationManager"].includes(e))throw new Error("User does not have appropriate permissions")};var _w="firebasestorage.googleapis.com",yw="storageBucket",C0=2*60*1e3,P0=10*60*1e3;var Z=class n extends me{constructor(e,t,r=0){super(gf(e),`Firebase Storage: ${t} (${gf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},ee;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ee||(ee={}));function gf(n){return"storage/"+n}function Ef(){let n="An unknown error occurred, please check the error payload for server response.";return new Z(ee.UNKNOWN,n)}function k0(n){return new Z(ee.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function D0(n){return new Z(ee.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function N0(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Z(ee.UNAUTHENTICATED,n)}function x0(){return new Z(ee.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function O0(n){return new Z(ee.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function L0(){return new Z(ee.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function V0(){return new Z(ee.CANCELED,"User canceled the upload/download.")}function M0(n){return new Z(ee.INVALID_URL,"Invalid URL '"+n+"'.")}function U0(n){return new Z(ee.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function F0(){return new Z(ee.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+yw+"' property when initializing the app?")}function q0(){return new Z(ee.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function B0(){return new Z(ee.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function j0(n){return new Z(ee.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function _f(n){return new Z(ee.INVALID_ARGUMENT,n)}function ww(){return new Z(ee.APP_DELETED,"The Firebase app was deleted.")}function z0(n){return new Z(ee.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ui(n,e){return new Z(ee.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Mi(n){throw new Z(ee.INTERNAL_ERROR,"Internal error: "+n)}var tt=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw U0(e)}static makeFromUrl(e,t){let r=null,s="([A-Za-z0-9.\\-_]+)";function i(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(A){A.path_=decodeURIComponent(A.path)}let l="v[A-Za-z0-9_]+",h=t.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${l}/b/${s}/o${d}`,"i"),_={bucket:1,path:3},y=t===_w?"(?:storage.googleapis.com|storage.cloud.google.com)":t,g="([^?#]*)",T=new RegExp(`^https?://${y}/${s}/${g}`,"i"),b=[{regex:a,indices:c,postModify:i},{regex:f,indices:_,postModify:u},{regex:T,indices:{bucket:1,path:2},postModify:u}];for(let A=0;A<b.length;A++){let L=b[A],O=L.regex.exec(e);if(O){let K=O[L.indices.bucket],ue=O[L.indices.path];ue||(ue=""),r=new n(K,ue),L.postModify(r);break}}if(r==null)throw M0(e);return r}},yf=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function G0(n,e,t){let r=1,s=null,i=null,o=!1,a=0;function c(){return a===2}let u=!1;function l(...g){u||(u=!0,e.apply(null,g))}function h(g){s=setTimeout(()=>{s=null,n(f,c())},g)}function d(){i&&clearTimeout(i)}function f(g,...T){if(u){d();return}if(g){d(),l.call(null,g,...T);return}if(c()||o){d(),l.call(null,g,...T);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,h(b)}let _=!1;function y(g){_||(_=!0,d(),!u&&(s!==null?(g||(a=2),clearTimeout(s),h(0)):g||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,y(!0)},t),y}function $0(n){n(!1)}function K0(n){return n!==void 0}function H0(n){return typeof n=="object"&&!Array.isArray(n)}function Tf(n){return typeof n=="string"||n instanceof String}function hw(n){return Af()&&n instanceof Blob}function Af(){return typeof Blob<"u"}function dw(n,e,t,r){if(r<e)throw _f(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw _f(`Invalid value for '${n}'. Expected ${t} or less.`)}function bf(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Iw(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var ur;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ur||(ur={}));function W0(n,e){let t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,i=e.indexOf(n)!==-1;return t||s||i}var wf=class{constructor(e,t,r,s,i,o,a,c,u,l,h,d=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=l,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,_)=>{this.resolve_=f,this.reject_=_,this.start_()})}start_(){let e=(r,s)=>{if(s){r(!1,new cs(!1,null,!0));return}let i=this.connectionFactory_();this.pendingConnection_=i;let o=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;let a=i.getErrorCode()===ur.NO_ERROR,c=i.getStatus();if(!a||W0(c,this.additionalRetryCodes_)&&this.retry){let l=i.getErrorCode()===ur.ABORT;r(!1,new cs(!1,null,l));return}let u=this.successCodes_.indexOf(c)!==-1;r(!0,new cs(u,i))})},t=(r,s)=>{let i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());K0(c)?i(c):i()}catch(c){o(c)}else if(a!==null){let c=Ef();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(s.canceled){let c=this.appDelete_?ww():V0();o(c)}else{let c=L0();o(c)}};this.canceled_?t(!1,new cs(!1,null,!0)):this.backoffId_=G0(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$0(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},cs=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function Q0(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Y0(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function J0(n,e){e&&(n["X-Firebase-GMPID"]=e)}function X0(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Z0(n,e,t,r,s,i,o=!0){let a=Iw(n.urlParams),c=n.url+a,u=Object.assign({},n.headers);return J0(u,e),Q0(u,t),Y0(u,i),X0(u,r),new wf(c,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,o)}function eR(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function tR(...n){let e=eR();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Af())return new Blob(n);throw new Z(ee.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function nR(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function rR(n){if(typeof atob>"u")throw j0("base-64");return atob(n)}var At={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Fi=class{constructor(e,t){this.data=e,this.contentType=t||null}};function sR(n,e){switch(n){case At.RAW:return new Fi(vw(e));case At.BASE64:case At.BASE64URL:return new Fi(Ew(n,e));case At.DATA_URL:return new Fi(oR(e),aR(e))}throw Ef()}function vw(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let i=r,o=n.charCodeAt(++t);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function iR(n){let e;try{e=decodeURIComponent(n)}catch{throw Ui(At.DATA_URL,"Malformed data URL.")}return vw(e)}function Ew(n,e){switch(n){case At.BASE64:{let s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Ui(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case At.BASE64URL:{let s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Ui(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=rR(e)}catch(s){throw s.message.includes("polyfill")?s:Ui(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}var Lc=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw Ui(At.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=cR(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function oR(n){let e=new Lc(n);return e.base64?Ew(At.BASE64,e.rest):iR(e.rest)}function aR(n){return new Lc(n).contentType}function cR(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var Vc=class n{constructor(e,t){let r=0,s="";hw(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(hw(this.data_)){let r=this.data_,s=nR(r,e,t);return s===null?null:new n(s)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(Af()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(tR.apply(null,t))}else{let t=e.map(o=>Tf(o)?sR(At.RAW,o).data:o.data_),r=0;t.forEach(o=>{r+=o.byteLength});let s=new Uint8Array(r),i=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new n(s,!0)}}uploadData(){return this.data_}};function Tw(n){let e;try{e=JSON.parse(n)}catch{return null}return H0(e)?e:null}function uR(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function lR(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function Aw(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function hR(n,e){return e}var Ie=class{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||hR}},Oc=null;function dR(n){return!Tf(n)||n.length<2?n:Aw(n)}function bw(){if(Oc)return Oc;let n=[];n.push(new Ie("bucket")),n.push(new Ie("generation")),n.push(new Ie("metageneration")),n.push(new Ie("name","fullPath",!0));function e(i,o){return dR(o)}let t=new Ie("name");t.xform=e,n.push(t);function r(i,o){return o!==void 0?Number(o):o}let s=new Ie("size");return s.xform=r,n.push(s),n.push(new Ie("timeCreated")),n.push(new Ie("updated")),n.push(new Ie("md5Hash",null,!0)),n.push(new Ie("cacheControl",null,!0)),n.push(new Ie("contentDisposition",null,!0)),n.push(new Ie("contentEncoding",null,!0)),n.push(new Ie("contentLanguage",null,!0)),n.push(new Ie("contentType",null,!0)),n.push(new Ie("metadata","customMetadata",!0)),Oc=n,Oc}function fR(n,e){function t(){let r=n.bucket,s=n.fullPath,i=new tt(r,s);return e._makeStorageReference(i)}Object.defineProperty(n,"ref",{get:t})}function mR(n,e,t){let r={};r.type="file";let s=t.length;for(let i=0;i<s;i++){let o=t[i];r[o.local]=o.xform(r,e[o.server])}return fR(r,n),r}function Sw(n,e,t){let r=Tw(e);return r===null?null:mR(n,r,t)}function pR(n,e,t,r){let s=Tw(e);if(s===null||!Tf(s.downloadTokens))return null;let i=s.downloadTokens;if(i.length===0)return null;let o=encodeURIComponent;return i.split(",").map(u=>{let l=n.bucket,h=n.fullPath,d="/b/"+o(l)+"/o/"+o(h),f=bf(d,t,r),_=Iw({alt:"media",token:u});return f+_})[0]}function gR(n,e){let t={},r=e.length;for(let s=0;s<r;s++){let i=e[s];i.writable&&(t[i.server]=n[i.local])}return JSON.stringify(t)}var Mc=class{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function Rw(n){if(!n)throw Ef()}function _R(n,e){function t(r,s){let i=Sw(n,s,e);return Rw(i!==null),i}return t}function yR(n,e){function t(r,s){let i=Sw(n,s,e);return Rw(i!==null),pR(i,s,n.host,n._protocol)}return t}function Cw(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=x0():s=N0():t.getStatus()===402?s=D0(n.bucket):t.getStatus()===403?s=O0(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function wR(n){let e=Cw(n);function t(r,s){let i=e(r,s);return r.getStatus()===404&&(i=k0(n.path)),i.serverResponse=s.serverResponse,i}return t}function IR(n,e,t){let r=e.fullServerUrl(),s=bf(r,n.host,n._protocol),i="GET",o=n.maxOperationRetryTime,a=new Mc(s,i,yR(n,t),o);return a.errorHandler=wR(e),a}function vR(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function ER(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=vR(null,e)),r}function TR(n,e,t,r,s){let i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let A=0;A<2;A++)b=b+Math.random().toString().slice(2);return b}let c=a();o["Content-Type"]="multipart/related; boundary="+c;let u=ER(e,r,s),l=gR(u,t),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+l+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,d=`\r
--`+c+"--",f=Vc.getBlob(h,r,d);if(f===null)throw q0();let _={name:u.fullPath},y=bf(i,n.host,n._protocol),g="POST",T=n.maxUploadRetryTime,C=new Mc(y,g,_R(n,t),T);return C.urlParams=_,C.headers=o,C.body=f.uploadData(),C.errorHandler=Cw(e),C}var ok=256*1024;var fw=null,If=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ur.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ur.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ur.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw Mi("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),s!==void 0)for(let i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Mi("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Mi("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Mi("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Mi("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},vf=class extends If{initXhr(){this.xhr_.responseType="text"}};function Pw(){return fw?fw():new vf}var us=class n{constructor(e,t){this._service=e,t instanceof tt?this._location=t:this._location=tt.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new tt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Aw(this._location.path)}get storage(){return this._service}get parent(){let e=uR(this._location.path);if(e===null)return null;let t=new tt(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw z0(e)}};function AR(n,e,t){n._throwIfRoot("uploadBytes");let r=TR(n.storage,n._location,bw(),new Vc(e,!0),t);return n.storage.makeRequestWithTokens(r,Pw).then(s=>({metadata:s,ref:n}))}function bR(n){n._throwIfRoot("getDownloadURL");let e=IR(n.storage,n._location,bw());return n.storage.makeRequestWithTokens(e,Pw).then(t=>{if(t===null)throw B0();return t})}function SR(n,e){let t=lR(n._location.path,e),r=new tt(n._location.bucket,t);return new us(n.storage,r)}function RR(n){return/^[A-Za-z]+:\/\//.test(n)}function CR(n,e){return new us(n,e)}function kw(n,e){if(n instanceof qi){let t=n;if(t._bucket==null)throw F0();let r=new us(t,t._bucket);return e!=null?kw(r,e):r}else return e!==void 0?SR(n,e):n}function PR(n,e){if(e&&RR(e)){if(n instanceof qi)return CR(n,e);throw _f("To use ref(service, url), the first argument must be a Storage instance.")}else return kw(n,e)}function mw(n,e){let t=e?.[yw];return t==null?null:tt.makeFromBucketSpec(t,n)}function kR(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:Qi(s,n.app.options.projectId))}var qi=class{constructor(e,t,r,s,i){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=_w,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=C0,this._maxUploadRetryTime=P0,this._requests=new Set,s!=null?this._bucket=tt.makeFromBucketSpec(s,this._host):this._bucket=mw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=tt.makeFromBucketSpec(this._url,e):this._bucket=mw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new us(this,e)}_makeRequest(e,t,r,s,i=!0){if(this._deleted)return new yf(ww());{let o=Z0(e,this._appId,r,s,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){let[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}},pw="@firebase/storage",gw="0.12.0";var Dw="storage";function Nw(n,e,t){return n=M(n),AR(n,e,t)}function xw(n){return n=M(n),bR(n)}function Ow(n,e){return n=M(n),PR(n,e)}function Lw(n=Gt(),e){n=M(n);let r=ot(n,Dw).getImmediate({identifier:e}),s=mr("storage");return s&&DR(r,...s),r}function DR(n,e,t,r={}){kR(n,e,t,r)}function NR(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new qi(t,r,s,e,at)}function xR(){ze(new Ee(Dw,NR,"PUBLIC").setMultipleInstances(!0)),pe(pw,gw,""),pe(pw,gw,"esm2017")}xR();var Vw=async n=>{let e=Pe();if(!e)return{success:!1,message:"User is not authenticated"};try{let t=Lw(),r=Ow(t,`profile-pictures/${e.uid}`);await Nw(r,n);let s=await xw(r);return await Di(e,{photoURL:s}),{success:!0,message:"Profile pic added successfully"}}catch(t){return{success:!1,message:t.message||"Error saving profile pic"}}};var Uc=()=>new Promise(async(n,e)=>{let t=Jd(Tt,async r=>{try{if(r){let s=await r.getIdTokenResult(),i=s.claims;if(r.uid){let o=await Uw(r.uid),a=o.userDocument.data();if(a.photoURL=r.photoURL,o.success){lr("userId",r.uid),lr("userToken",s.token),lr("userData",a),Ga(r),$a(r.uid),Ka(s.token),hn(a),Ha(i),n({authUser:r,userData:a});return}return n({authUser:r}),r}}else{let s=localStorage.getItem("userToken");OR(),n(s?{authUser:null,storedToken:s}:null)}}catch(s){e(s)}finally{t()}},r=>{e(r)})});var OR=()=>{window.location.pathname.startsWith("/members/")&&window.location.pathname!=="/login"&&(window.location.href="/login"),localStorage.clear()},Mw=()=>{let n=document.querySelectorAll("[data-pfc-content]"),e=os(),t=e?Qe():null;n&&n.length&&n.forEach(r=>{let s=r.getAttribute("data-pfc-content");if(e){let i=t.userRole;!LR(i,s)&&s!=="members"?r.remove():r.style.display="block"}else s.startsWith("!members")?r.style.display="block":r.remove()})},LR=(n,e)=>e==="corporateAdmin"&&n==="corporateAdmin"||e==="multiLocationAdmin"&&(n==="multiLocationAdmin"||n==="corporateAdmin")||e==="locationManager"&&(n==="locationManager"||n==="multiLocationAdmin"||n==="corporateAdmin")||e==="staff",Uw=async n=>{try{let e=Bt(n),t=await We(e);return t.exists()?{success:!0,userDocument:t}:{success:!1,message:"Couldn't find the users document"}}catch(e){return{success:!1,message:e.message}}};var Fw=async n=>{try{let e=await Uw(n);return e.success?{success:!0,courses:e.userDocument.data().courses||[],userDocRef:e.userDocument.ref}:{success:!1,message:"There is no courses array"}}catch(e){return{success:!1,message:e.message}}},hr=n=>{try{let e=localStorage.getItem(n);return e?JSON.parse(e):null}catch(e){return console.error(`Error fetching from localStorage (${n}):`,e),null}},lr=(n,e)=>{try{localStorage.setItem(n,JSON.stringify(e))}catch(t){console.error(`Error setting to localStorage (${n}):`,t)}},Bt=n=>n?ln(Le,"users",n):(W("Couldn't get the user document."),null);var vn=()=>JSON.parse(localStorage.getItem("userData"));var qw=async n=>{let e=Pe();if(!e)return{success:!1,message:"User is not authenticated"};try{let t=e.email;if(n!==t){await Qd(e,n);let s=Bt().data();return await wt(e.uid,{...s,email:n,lastUpdated:Le.FieldValue.serverTimestamp()}),{success:!0,message:"Email updated successfully"}}}catch(t){return{success:!1,message:t}}};var Bw=async(n,e)=>{let t=Pe();if(!t)return{success:!1,message:"User is not authenticated"};try{let r=Ft.credential(t.email,n);return await $d(t,r),await Yd(t,e),{success:!0,message:"Password updated successfully"}}catch(r){return{success:!1,message:r}}};var jw=async(n,e,t)=>{let r=Pe();if(!r)return{success:!1,message:"User is not authenticated"};try{let s=os(),i=Bt(s);return await K_(Le,async o=>{let a=await o.get(i);if(!a.exists())return{success:!1,error:"User's document not found in Firestore"};let c=a.data(),u=n||"",l=e||"",h=t||"",d={firstName:u,lastName:l,phone:h,lastUpdated:H_()};o.update(i,{...c,...d}),await Di(r,{displayName:`${u} ${l}`,phoneNumber:h}),localStorage.setItem("userData",JSON.stringify({...c,...d}))}),{success:!0,message:"Profile updated successfully"}}catch(s){return{success:!1,message:s}}};var Fc=n=>{let e=Be(n);if(!e)return null;let t=e.querySelector('[data-pfc-member="firstName"]'),r=e.querySelector('[data-pfc-member="lastName"]'),s=e.querySelector('[data-pfc-member="email"]')||null,i=e.querySelector('[data-pfc-member="phone"]'),o=e.querySelector('[type="submit"]');return{form:e,firstNameField:t,lastNameField:r,emailField:s,phoneField:i,submitButton:o}},zw=()=>{let n=document.querySelector('[data-pfc-action="upload-profile-image"]');if(n){let e=n.nextElementSibling;e&&(n.addEventListener("click",()=>{e.click()}),e.addEventListener("change",async t=>{let r=t.target.files[0];try{ye(n,"Uploading...");let s=await Vw(r);s.success?(we(n),ke(s.message)):G(n,s.message)}catch(s){G(n,s.message)}}))}},Gw=async()=>{let{form:n,firstNameField:e,lastNameField:t,phoneField:r}=Fc("profile")||{};if(!n)return;let s=document.querySelector('[data-pfc-member="userRole"]'),i=document.querySelectorAll('[data-pfc-member="email"]'),o=document.querySelector('[data-pfc-member="profile-image"]'),a=document.querySelector("[data-pfc-member='locations']");try{let c=Vt();if(!c){W("No user found");return}e&&(e.value=c.firstName),t&&(t.value=c.lastName),r&&(r.value=c.phone?c.phone:"");let{locations:u}=c;u&&u.length?(await wn(u)).forEach(d=>{let f=document.createElement("div");f.classList.add("user-table_pill"),f.textContent=d.name,a.appendChild(f)}):a.textContent="No locations set.",s?s.textContent=xc(c.userRole):s.textContent="User does not have a role.",i.length&&i.forEach(h=>{h instanceof HTMLInputElement?h.value=c.email:h.textContent=c.email});let l=c.photoURL!==null;o&&(o.src=l?c.photoURL:"https://uploads-ssl.webflow.com/650ef33ce788a656013c96da/6524c70660697f8ca2c9a15d_profile-icon.svg")}catch(c){W(c.message)}},$w=()=>{let{form:n,firstNameField:e,lastNameField:t,phoneField:r,submitButton:s}=Fc("profile")||{};n&&n.addEventListener("submit",async i=>{i.preventDefault();try{ye(s,"Saving...");let o=await jw(e.value,t.value,r.value);o.success?(we(s),ke(o.message)):G(s,o.message)}catch(o){G(s,o.message)}})},Kw=()=>{let{form:n,emailField:e,submitButton:t}=Fc("update-email")||{};n&&n.addEventListener("submit",async r=>{r.preventDefault();try{ye(t,"Confirming...");let s=await qw(e.value);s.success?(we(t),ke(s.message)):G(t,s.message)}catch(s){G(t,s.message)}})},Hw=()=>{let{form:n,submitButton:e}=Fc("update-password")||{};if(!n)return;let t=n.querySelector('[data-pfc-member="current-password"]'),r=n.querySelector('[data-pfc-member="new-password"]');n.addEventListener("submit",async s=>{s.preventDefault();try{ye(e,"Updating...");let i=await Bw(t.value,r.value);i.success?(we(e),ke(i.message)):G(e,i.message)}catch(i){G(e,i.message)}})},Ww=()=>{let n=document.querySelector("[data-pfc-action='change-email']");n&&n.addEventListener("click",()=>{yn("change-email")})},Qw=()=>{let n=document.querySelector("[data-pfc-action='update-password']");n&&n.addEventListener("click",()=>{yn("update-password")})};var dr=async(n,e,t,r="create")=>{let s=t.cloneNode(!0),i=s.querySelector("[data-pfc-member='firstName']"),o=s.querySelector("[data-pfc-member='lastName']"),a=s.querySelector("[data-pfc-member='email']"),c=s.querySelector("[data-pfc-member='location']"),u=s.querySelector("[data-pfc-member='userRole']"),l=s.querySelector("[data-toggle]"),h=s.querySelector("[data-pfc-action='view-user']"),d=s.querySelector("[data-pfc-action='update-user']"),f=s.querySelector("[data-pfc-action='delete-user']"),_=l.parentElement,y=Qe().userRole;s.setAttribute("data-id",n.userId),(n.userRole==="corporateAdmin"&&y!=="corporateAdmin"||n.userRole==="multiLocationAdmin"&&(y!=="multiLocationAdmin"||y!=="corporateAdmin"))&&_.remove(),i.textContent=n.firstName||"--",o.textContent=n.lastName||"--",a.textContent=n.email||"--";let{locations:g}=n;g&&(g.length>1?(g.forEach(A=>{let L=c.cloneNode(!0);L.textContent=A.name,c.parentElement.appendChild(L)}),c.remove()):g.length===1?c.textContent=g[0].name:c.remove()),u.textContent=n.userRole?xc(n.userRole):"--";let T=()=>{l.nextElementSibling.classList.toggle("is-open")};h.href=`/members/user?userId=${n.userId}`;let C=()=>{let A=Be("update-user"),L=A.querySelector("[data-pfc-member='firstName']"),O=A.querySelector("[data-pfc-member='lastName']"),K=A.querySelector("[data-pfc-member='email']"),ue=A.querySelector("[data-pfc-member='phone']"),st=A.querySelector("[data-pfc-member='locations']"),An=st.previousElementSibling.querySelector(".combo-box_dropdown-list")||null,UI=document.querySelector("[data-element='combo-box-pill']")||null,FI=A.querySelector(".combo-box_input")||null,qI=A.querySelector("[data-pfc-member='userRole']"),BI=A.querySelector("[data-pfc-member='id']");if(L.value=n.firstName,O.value=n.lastName,K.value=n.email,ue.value=n.phone||"",g&&An)g.length?g.forEach(Ki=>{pf(Ki,UI,An.firstChild,FI,st)}):st.value="";else if(g){let Ki=[];g.forEach(jI=>{let zI=jI.id.replace("locations/","");Ki.push(zI)}),st.value=Ki.join(",")}qI.value=n.userRole,BI.value=n.userId,yn("update-user")},b=()=>{let L=Be("delete-user").querySelector("[data-pfc-member='id']");L.value=n.userId,yn("delete-user")};return h.addEventListener("click",()=>{handleViewUserClick()}),d.addEventListener("click",A=>{A.target.parentElement.classList.remove("is-open"),C()}),f.addEventListener("click",A=>{A.target.parentElement.classList.remove("is-open"),b()}),l.addEventListener("click",()=>{T()}),r==="create"?e.prepend(s):r==="add"&&e.appendChild(s),s};var Yw=async(n,e,t,r,s,i,o)=>{try{In();let u=await pn(gn,"createOrgUser")({firstName:n,lastName:e,email:t,phone:r,password:s,locations:i,userRole:o});if(!u.data.success)return{success:!1,message:u.data.message};let l=u.data.userData,h=l.locations,d=await wn(h);l.locations=d;let f=_n();return et(f.concat(l)),{success:!0,message:u.data.message,userData:l}}catch(a){return{success:!1,message:a.message}}};var Jw=async n=>{try{In();let r=await pn(gn,"deleteOrgUser")({userId:n});if(!r.data.success)return{success:!1,message:r.data.message};let i=_n().filter(o=>o.userId!==n);return et(i),{success:!0,message:r.data.message}}catch(e){return{success:!1,message:e.message}}};var Sf=async(n,e,t)=>{let r=n(),s=await ja(r),i=[];for(let h of s.docs)if(h.id!==os()){let d={userId:h.id,...h.data()},f=d.locations,_=f?await wn(f):[];d.locations=_,i.push(d)}let o=_n(),c=df()?o.concat(i):o=i;et(c);let u=s.docs[s.docs.length-1]||null;ff(u);let l=t>e&&!!u;return hf(sw()+1),{success:!0,usersData:i,totalSize:t,visibleSize:qt(),hasMore:l,lastDocument:u}},Rf=10,Bi=async(n=null,e="render")=>{try{let t=Qe(),{userRole:r}=t,s=ns(Le,"users"),i,o;e==="search"&&(Oi(0),xi(0),hf(1),ff(null),et([]));let a=df(),c=f=>f?_t(s,yt("email",">=",f),yt("email","<=",f+"\uF8FF")):s,u=async()=>{let f=Vt().locations[0];o=()=>_t(c(n),yt("locations","array-contains",f),ss("email"),Ba(a),is(Rf)),i=()=>_t(c(n),yt("locations","array-contains",f));let _=qt(),y=cr();return a||(_=await d(o),y=await d(i),xi(_),Oi(y)),Sf(o,_,y)},l=async()=>{let f=Vt().locations,_=f.map(T=>ln(Le,T));if(_.length>0)for(let T of _){let C=await We(T);if(C.exists()){let b=C.data(),A=C.id;aw({id:A,...b})}else console.error(`Location document not found for reference: ${T.path}`)}o=()=>_t(c(n),yt("locations","array-contains-any",f),ss("email"),Ba(a),is(Rf)),i=()=>_t(c(n),yt("locations","array-contains-any",f));let y=qt(),g=cr();return a||(y=await d(o),g=await d(i),xi(y),Oi(g)),Sf(o,y,g)},h=async()=>{o=()=>_t(c(n),ss("email"),Ba(a),is(Rf)),i=()=>_t(c(n));let f=qt(),_=cr();return a||(f=await d(o),_=await d(i),xi(f),Oi(_)),Sf(o,f,_)},d=async f=>{let _=f();return(await $_(_)).data().count};switch(r){case"locationManager":return u();case"multiLocationAdmin":return l();case"corporateAdmin":return h();default:return{success:!1,message:"Unsupported user type"}}}catch(t){return{success:!1,message:`Error loading users: ${t}`}}};var Xw=async(n,e,t)=>{let r=e.querySelector(`[data-id='${n.userId}']`),s=await dr(n,e,t,"update");e.replaceChild(s,r)};var Zw=async(n,e,t,r,s,i,o)=>{try{In();try{let u=await pn(gn,"updateOrgUser")({userId:n,firstName:e,lastName:t,email:r,phone:s,locations:i,userRole:o});if(!u.data.success)return{success:!1,message:u.data.message};let l=u.data.userData,h=l.locations,d=await wn(h);l.locations=d;let f=_n(),_=f.findIndex(y=>y.userId===n);if(_!==-1){let y={...f[_],firstName:e,lastName:t,email:r,phone:s,locations:d,userRole:o};return f[_]=y,et([...f]),{success:!0,message:u.data.message,userData:l}}return{success:!1,message:"User not found in the array"}}catch{return{success:!1,message:"Couldn't successfully call the update org user function"}}}catch(a){return{success:!1,message:a.message}}};var eI=()=>{let n=Be("create-user"),e=document.querySelector("[data-pfc-item='users-list']");if(n&&e){let t=n.querySelector('[data-pfc-member="firstName"]'),r=n.querySelector('[data-pfc-member="lastName"]'),s=n.querySelector('[data-pfc-member="email"]'),i=n.querySelector('[data-pfc-member="phone"]'),o=n.querySelector('[data-pfc-member="password"]'),a=n.querySelector('[data-pfc-member="locations"]'),c=n.querySelector('[data-pfc-member="userRole"]'),u=n.querySelector('[type="submit"]'),l=n.querySelector("[data-pfc-action='reset-form']"),h=document.querySelector("[data-pfc-action='create-user']:is(button)"),d=e.firstElementChild,f=d.firstElementChild,_=Vt().locations[0];Qe().userRole==="locationManager"&&_&&(a.value=_.replace("locations/","")),n.addEventListener("submit",async g=>{g.preventDefault();try{ye(u,"Creating...");let T=await Yw(t.value,r.value,s.value,i.value,o.value,a.value,c.value);T.success?(Vi("create-user"),dr(T.userData,d,f),we(u),ke(T.message),n.reset()):G(u,T.message)}catch(T){G(u,T.message)}}),h.addEventListener("click",()=>{yn("create-user")}),l.addEventListener("click",()=>{n.reset()})}},tI=()=>{let n=Be("update-user"),e=document.querySelector("[data-pfc-item='users-list']");if(n&&e){let t=n.querySelector('[data-pfc-member="firstName"]'),r=n.querySelector('[data-pfc-member="lastName"]'),s=n.querySelector('[data-pfc-member="email"]'),i=n.querySelector('[data-pfc-member="phone"]'),o=n.querySelector('[data-pfc-member="locations"]'),a=n.querySelector('[data-pfc-member="userRole"]'),c=n.querySelector('[data-pfc-member="id"]'),u=n.querySelector('[type="submit"]'),l=e.firstElementChild,h=l.firstElementChild;n.addEventListener("submit",async d=>{d.preventDefault();try{ye(u,"Updating...");let f=await Zw(c.value,t.value,r.value,s.value,i.value,o.value,a.value);f.success?(Vi("update-user"),Xw(f.userData,l,h),we(u),ke(f.message)):G(u,f.message)}catch(f){G(u,f.message)}})}},nI=()=>{let n=Be("delete-user"),e=document.querySelector("[data-pfc-item='users-list']");if(n&&e){let t=n.querySelector('[data-pfc-member="id"]'),r=n.querySelector('[type="submit"]');n.addEventListener("submit",async s=>{s.preventDefault();try{ye(r,"Deleting...");let i=await Jw(t.value);i.success?(Vi("delete-user"),e.querySelector(`[data-id='${t.value}']`).remove(),we(r),ke("User successfully deleted")):G(r,i.message)}catch(i){G(r,i.message)}})}},rI=async()=>{let n=document.querySelector("[data-pfc-item='users-list']"),e=document.querySelector("[data-element='total-count']"),t=document.querySelector("[data-element='result-count']"),r=document.querySelector("[data-element='pagination']");if(n){let s=n.firstElementChild,i=s.firstElementChild,o=s.nextElementSibling,a=o.nextElementSibling;try{let c=await Bi();if(c.success){let{usersData:u}=c;u.length&&(s.innerHTML="",u.forEach(l=>{dr(l,s,i,"add")}),et(u),s.style.display="block",a.style.display="none",c.hasMore&&(r.style.display="flex")),t.textContent=qt(),e.textContent=cr()}else o.style.display="block",a.style.display="none"}catch(c){W(c.message)}}},sI=async()=>{let n=document.querySelector("[data-pfc-item='users-list']"),e=document.querySelector("[data-element='result-count']"),t=document.querySelector("[data-element='pagination']");if(n&&t){let r=t.firstChild,s=n.firstElementChild,i=s.firstElementChild,o=s.nextElementSibling,a=o.nextElementSibling;r.addEventListener("click",async()=>{try{ye(r,"Loading...");let c=await Bi();if(c.success){let{usersData:u}=c;u.length&&(u.forEach(l=>{dr(l,s,i,"add")}),s.style.display="block",a.style.display="none"),c.hasMore?t.style.display="flex":t.style.display="none",e.textContent=qt(),we(r)}else o.style.display="block",a.style.display="none"}catch(c){W(c.message)}})}},iI=async()=>{let n=document.querySelector("[data-pfc-item='users-list']");if(n){let e=n.firstElementChild,t=e.firstElementChild,r=e.nextElementSibling,s=r.nextElementSibling,i=document.querySelector("[data-pfc-action='search-users']"),o=document.querySelector("[data-element='total-count']"),a=document.querySelector("[data-element='result-count']"),c=document.querySelector("[data-element='pagination']"),u;i.addEventListener("input",async()=>{clearTimeout(u),u=setTimeout(async()=>{try{e.innerHTML="",s.style.display="block",r.style.display="none",c.style.display="none";let l;if(i.value.length>0?l=await Bi(i.value,"search"):l=await Bi(null,"search"),l.success){let{usersData:h}=l;h.length?(h.forEach(d=>{dr(d,e,t)}),e.style.display="block",s.style.display="none"):(e.style.display="none",r.style.display="block",s.style.display="none"),l.hasMore?c.style.display="flex":c.style.display="none",o.textContent=cr(),a.textContent=qt()}else W(l.message)}catch(l){W(l.message)}},1e3)})}};var oI=()=>{let n=document.querySelector("[data-group='tag-category']"),e=document.querySelector("[data-group='tags']");if(n&&e){let i=function(o,a){return o.filter(c=>c.getAttribute("data-category")===a)};var t=i;let r=Array.from(n.querySelectorAll(".w-dyn-item")),s=Array.from(e.querySelectorAll(".w-dyn-item"));r.forEach(o=>{let a=o.getAttribute("data-category"),c=i(s,a),u=document.createElement("div");u.classList.add("w-dyn-list","jetboost-filter-5813");let l=document.createElement("div");l.classList.add("w-dyn-items"),u.appendChild(l),o.append(u);let h=c.map(d=>d.cloneNode(!0));l.append(...h)}),e.remove()}};var En=n=>{let e,t=Vt();t?e=t.savedItems:e=n,e&&e.length&&document.querySelectorAll("[data-save-count]").forEach(s=>{s.textContent=e.length})};var aI=async()=>{try{let n=vn();if(n){let e=n.savedItems||[];return En(e),e.length?(window.fsAttributes=window.fsAttributes||[],window.fsAttributes.push(["cmsload",t=>{let[r]=t;n&&(r.list.innerHTML="",r.items.forEach(s=>{let i=s.element.getAttribute("data-id");e.some(o=>o.id===i)&&r.list.appendChild(s.element)}))}]),{success:!0,message:"Successfully rendered saved items"}):{empty:!0}}return{success:!1,message:"User is not authenticated"}}catch(n){return{success:!1,message:n.message}}};var cI=async n=>{let e=Pe();if(!e)return{success:!1,message:"User is not authenticated"};try{let t=Bt(e.uid),r=await We(t);if(r.exists()){if(!(r.data().savedItems||[]).find(i=>i.id===n)){await wt(t,{savedItems:W_({id:n})});let i=vn()||{savedItems:[]},o=[...i.savedItems||[],{id:n}],a={...i,savedItems:o};return localStorage.setItem("userData",JSON.stringify(a)),hn(a),En(o),{success:!0,message:"Item saved successfully"}}return{success:!1,message:"Item is already saved"}}return{success:!1,message:"Couldn't find the users document"}}catch(t){return{success:!1,message:t.message}}};var uI=async n=>{let e=Pe();if(!e)return{success:!1,message:"User is not authenticated"};try{let t=Bt(e.uid),r=await We(t);if(r.exists()){let s=r.data().savedItems||[],i=s.findIndex(o=>o.id===n);if(i!==-1){s.splice(i,1),await wt(t,{savedItems:s});let o=vn()||{savedItems:[]},a=o.savedItems.filter(u=>u.id!==n),c={...o,savedItems:a};return localStorage.setItem("userData",JSON.stringify(c)),hn(c),En(a),{success:!0,message:"Item unsaved successfully"}}return{success:!1,message:"This item is already unsaved"}}return{success:!1,message:"Couldn't find the users document"}}catch(t){return{success:!1,message:t.message}}};var lI=()=>{document.addEventListener("click",async n=>{let e=n.target;if(e.hasAttribute("data-save")){let r=e.closest(".w-dyn-item").getAttribute("data-id"),s=e.nextElementSibling.nextElementSibling,i=e.nextElementSibling;try{e.style.display="none",s.style.display="block";let o=await cI(r);o.success?(i.style.display="block",s.style.display="none",ke(o.message)):(e.style.display="block",s.style.display="none",W(o.message))}catch(o){e.style.display="block",s.style.display="none",W(o.message)}}})},hI=()=>{document.addEventListener("click",async n=>{let e=n.target;if(e.hasAttribute("data-unsave")){let t=e.closest(".w-dyn-item"),r=t.getAttribute("data-id"),s=e.nextElementSibling,i=e.previousElementSibling;try{e.style.display="none",s.style.display="block";let o=await uI(r);if(o.success){i.style.display="block",s.style.display="none";let a=t.closest("[data-pfc-item='favorites']");if(a&&(t.remove(),!a.querySelectorAll(".w-dyn-item").length)){let c=a.firstElementChild.nextElementSibling;c.style.display="block"}ke(o.message)}else e.style.display="block",s.style.display="none",W(o.message)}catch(o){e.style.display="block",s.style.display="none",W(o.message)}}})},dI=async()=>{let n=document.querySelector("[data-pfc-item='favorites']");if(n){let e=n.firstElementChild,t=e.nextElementSibling,r=t.nextElementSibling;try{e.style.display="none",r.style.display="block";let s=await aI();if(s.empty){setTimeout(()=>{t.style.display="block",r.style.display="none"},500);return}s.success?setTimeout(()=>{e.style.display="block",r.style.display="none"},500):W(s.message)}catch(s){W(s.message)}}};var fI=()=>{let n=vn();if(!n)return;let{savedItems:e}=n;if(!e)return;function t(o){return e.some(a=>a.id===o)}function r(o){o.forEach(a=>{let c=a.dataset.id;c&&t(c)&&(a.querySelector("[data-unsave]").style.display="block",a.querySelector("[data-save]").style.display="none")})}let s=document.querySelectorAll("[data-items] [data-id]");r(s);let i=document.querySelector("[data-items]");if(i){let o={childList:!0,subtree:!0};new MutationObserver(c=>{c.forEach(u=>{u.addedNodes.length>0&&r(u.addedNodes)})}).observe(i,o)}};var mI=async n=>{try{return await Kd(Tt,n),{success:!0,message:"Reset password email was sent. Check your inbox."}}catch(e){return{success:!1,message:e}}};var pI=async(n,e)=>{try{return await Wd(Tt,n,e),{success:!0,message:"Logged in successfully"}}catch(t){return{success:!1,message:t}}},gI=()=>{let n=document.querySelectorAll('[data-pfc-member*="password"]');n.length&&n.forEach(e=>{let t=e.parentElement.querySelector("[data-toggle-password]"),r=t.children[0],s=t.children[1];t.addEventListener("click",()=>{e.type=e.type==="password"?"text":"password",e.type==="password"?(r.style.display="block",s.style.display="none"):(r.style.display="none",s.style.display="block")})})};var _I=async()=>{if(!Pe())return{success:!1,message:"User is not authenticated"};try{return await Xd(Tt),Ga(null),$a(null),Ka(null),hn(null),Ha(null),localStorage.clear(),{success:!0,message:"Successfully logged out"}}catch(e){return{success:!1,message:e.message}}},yI=()=>{let n=new URLSearchParams(window.location.search);n.get("logout")==="true"&&(ke("You've been successfully logged out."),setTimeout(()=>{n.delete("logout");let t=new URL(window.location.href);t.search=n.toString(),window.history.replaceState({},document.title,t.href)},5400))};var wI=async n=>{try{let e=new URLSearchParams(window.location.search).get("oobCode");return e?(await Hd(Tt,e,n),{success:!0,message:"Successfully reset the password."}):{success:!1,message:"No action code is present."}}catch(e){return{success:!1,message:e}}};var II=async()=>{let n=Be("login");if(!n)return;let e=n.querySelector('[data-pfc-member="email"]'),t=n.querySelector('[data-pfc-member="password"]'),r=n.querySelector('[type="submit"]');n.addEventListener("submit",async s=>{s.preventDefault();try{ye(r,"Loading...");let i=await pI(e.value,t.value);i.success?window.location.href="/members/home":G(r,i.message)}catch(i){G(r,i.message)}})},vI=async()=>{let n=document.querySelector('[data-pfc-action="logout"]');n&&n.addEventListener("click",async e=>{e.preventDefault();try{ye(n,"Logging Out...");let t=await _I();t.success?window.location.href="/?logout=true":G(n,t.message)}catch(t){G(n,t.message)}})},EI=async()=>{let n=Be("forgot-password");if(!n)return;let e=n.querySelector('[data-pfc-member="email"]'),t=n.querySelector('[type="submit"]');n.addEventListener("submit",async r=>{r.preventDefault();try{ye(t,"Sending...");let s=await mI(e.value);s.success?(we(t),e.value="",ke(s.message)):G(t,s.message)}catch(s){G(t,s.message)}})},TI=async()=>{let n=Be("reset-password");if(!n)return;let e=n.querySelector('[data-pfc-member="password"]'),t=n.querySelector('[type="submit"]');n.addEventListener("submit",async r=>{r.preventDefault();try{ye(t,"Resetting...");let s=await wI(e.value);s.success?window.location.href="/password-set":G(t,s.message)}catch(s){G(t,s.message)}})};var AI=async()=>{let n=document.querySelectorAll("[data-shopify-link]");n.length&&n.forEach(e=>{e.addEventListener("click",async t=>{t.preventDefault();try{ye(e,"Authenticating...");let r=Pe();if(!r){we(e),W("The user isn't authenticated");return}let{email:s}=r;if(In(),VR(),!canAccessShopify&&s.endsWith("@chuzefitness.com"))window.open("https://portal.pfcorders.com","_blank");else if(canAccessShopify&&!s.endsWith("@chuzefitness.com")){let o=await pn(gn,"connectToShopify")();if(o){let a=o.data;window.open(a,"_blank"),we(e)}else G(e,"There was an error connecting to PFC Orders")}else!canAccessShopify&&!s.endsWith("@chuzefitness.com")&&(window.open("https://pfcorders.com","_blank"),we(e))}catch(r){G(e,r.message)}})})},VR=async()=>{try{let n=await fetch("https://ipapi.co/8.8.8.8/country/");if(!n.ok)throw new Error("Network response was not ok");(await n.text()).trim()==="CA"&&storeLinks.length&&setAllStoreLinks("https://form.jotform.com/82984034126155")}catch(n){console.error("Error fetching data:",n)}};var nt=Array.from(document.querySelectorAll("[data-element='lesson']")),ls=Array.from(document.querySelectorAll("[data-course]")),ji=document.querySelectorAll("[data-element='module']"),Tn=document.querySelector("[data-element='lesson-button']")||null,je=document.body.getAttribute("data-current-lesson")||null,rt=document.body.getAttribute("data-current-course")||null,bt=document.querySelector("[data-aside='button']"),zi=document.querySelector("[data-aside='title']"),Gi=document.querySelector("[data-aside='tag']");var ve={totalCompletedLessons:0,firstIncompleteLesson:null};var bI=()=>{let n=document.body.getAttribute("data-page"),e=window.location.href;if(bt&&zi&&Gi){let t=!1;for(let r of nt)r.classList.contains("is-complete")?t=!0:!ve.firstIncompleteLesson&&r.querySelector("a").href!==e&&(ve.firstIncompleteLesson=r);n==="course"?t?ve.firstIncompleteLesson&&(Gi.textContent="Continue course:",zi.textContent=ve.firstIncompleteLesson.querySelector("[data-lesson='title']").textContent,bt.href=ve.firstIncompleteLesson.querySelector("a").href,bt.textContent="Go to Lesson"):(Gi.textContent="Start course:",zi.textContent=ve.firstIncompleteLesson.querySelector("[data-lesson='title']").textContent,bt.href=ve.firstIncompleteLesson.querySelector("a").href):n==="lesson"&&(Gi.textContent="Next lesson:",zi.textContent=ve.firstIncompleteLesson.querySelector("[data-lesson='title']").textContent,bt.href=ve.firstIncompleteLesson.querySelector("a").href,bt.textContent="Next Lesson")}};var SI=n=>window.getComputedStyle(n).display==="flex"?"none":"flex",fr=()=>{let n=document.querySelectorAll(`[data-lesson='${je}']`);n.length&&n.forEach(e=>{let t=e.querySelector("[data-element='loader']");t&&(t.style.display=SI(t),t.previousElementSibling.style.display=SI(t))})},qc=(n,e)=>{let t=document.querySelector(`[data-course='${n}'] [data-element='progress-bar']`);t&&(t.style.width=`${e}%`)},Bc=(n,e)=>{let t=document.querySelector(`[data-course='${n}'] [data-element='progress-percentage']`);t&&(t.textContent=`${Math.round(e)}%`)};var MR=async n=>ln(ns(Le,"users"),n),RI=async()=>{let e=new URLSearchParams(window.location.search).get("userId"),t;if(e)try{let r=await MR(e),s=await We(r);s.exists()&&(t=s.data())}catch(r){console.error("Error fetching user document from Firestore:",r)}t||(t=hr("userData")),t&&ls.forEach(r=>{let s=r.getAttribute("data-course"),i=r.getAttribute("data-lesson-count"),o=t?.courses?.find(a=>a.id===s);if(o){let c=(o.completedLessons||[]).length/i*100;qc(s,c),Bc(s,c)}})};var Cf=n=>{if(ls&&ls.length&&ls.find(t=>t.dataset.course===rt)){let t;n==="add"?(ve.totalCompletedLessons+=1,t=ve.totalCompletedLessons):n==="remove"&&(ve.totalCompletedLessons-=1,t=ve.totalCompletedLessons);let r=nt.length,s=t/r*100;qc(rt,s),Bc(rt,s)}};var $i=(n,e)=>{n.firstChild.textContent=e==="add"?"Mark as Incomplete":"Mark as Complete",e==="add"?n.classList.add("is-complete"):n.classList.remove("is-complete")};var CI=()=>{let n=hr("userData");if(!n||!n.courses)return{success:!1,message:"No course data found for the user."};let e=n.courses.find(t=>t.id===rt);if(e){let{completedLessons:t}=e;nt.forEach(r=>{let s=r.getAttribute("data-lesson");t.some(i=>i.id===s)&&(r.classList.add("is-complete"),ve.totalCompletedLessons++,je&&s===je&&$i(Tn,"add"))})}};var Pf=n=>{let e=nt.find(t=>t.dataset.lesson===je);e&&(n==="add"?e.classList.add("is-complete"):n==="remove"&&e.classList.remove("is-complete"))};var kf=async n=>{try{let e=await Uc();if(e){let t=e.uid,r=await Fw(t);if(r.success){let o=r.courses,{userDocRef:a}=r,c=o.find(f=>f.id===rt)||{},u=c.completedLessons||[],l=u;n==="add"&&!u.some(f=>f.id===je)?l=[...u,{id:je}]:n==="remove"&&u.some(f=>f.id===je)&&(l=u.filter(f=>f.id!==je)),c={id:rt,completedLessons:l};let h=o.findIndex(f=>f.id===rt),d=hr("userData");if(h!==-1){await wt(a,{courses:o.map((_,y)=>y===h?c:_)});let f={...d,courses:o.map((_,y)=>y===h?c:_)};lr("userData",f)}else{await wt(a,{courses:[...o,c]});let f={...d,courses:[...o,c]};lr("userData",f)}return{success:!0,message:"This is a test message"}}let s=[{id:rt,completedLessons:[{id:je}]}];await wt(userDocRef,{courses:s});let i=hr("userData");if(i){let o={...i,courses:s};lr("userData",o)}return{success:!0,message:"This is a test message"}}return{success:!1,message:"Couldn't get the user's courses"}}catch(e){return{success:!1,message:e.message}}};var PI=()=>{ji&&nt&&ji.forEach(n=>{let e=n.getAttribute("data-module");nt.filter(r=>r.getAttribute("data-module")===e).forEach(r=>{n.querySelector("[data-element='lessons']").append(r)})})},kI=()=>{ji&&ji.forEach(n=>{let e=n.firstElementChild,t=e.firstElementChild,r=e.querySelectorAll("a");bt&&r.forEach(s=>{if(s.classList.contains("w--current")||s.href===bt.href){e.classList.add("is-active");return}}),t.addEventListener("click",()=>{e.classList.toggle("is-active")})})};var DI=()=>{RI()},NI=()=>{CI()},xI=()=>{PI()},OI=()=>{kI()},LI=()=>{bI()},VI=()=>{Tn&&Tn.addEventListener("click",async()=>{try{fr();let n;Tn.classList.contains("is-complete")?(n=await kf("remove"),n.success?(fr(),$i(Tn,"remove"),Cf("remove"),Pf("remove")):(fr(),W(n.message))):(n=await kf("add"),n.success?(fr(),$i(Tn,"add"),Cf("add"),Pf("add")):(fr(),W(n.message)))}catch(n){fr(),W(n.message)}})};var MI=()=>{let n=document.querySelectorAll(".user-table_dropdown-list"),e=document.querySelectorAll("[data-toggle]");function t(){n.forEach(s=>{s.classList.toggle("is-open")})}function r(s){!Array.from(n).some(o=>o.contains(s.target))&&Array.from(n).some(o=>o.classList.contains("is-open"))&&n.forEach(o=>{o.classList.remove("is-open")})}e.forEach(s=>{s.addEventListener("click",t)}),document.body.addEventListener("click",r),document.body.addEventListener("click",r)};Ua(tw,{localCache:za({synchronizeTabs:!0,maxAge:60*60*1e3})});(async()=>(await Uc(),Mw(),II(),gI(),vI(),yI(),EI(),TI(),oI(),DI(),xI(),OI(),NI(),LI(),VI(),AI(),dI(),fI(),En(),lI(),hI(),Gw(),$w(),zw(),Kw(),Hw(),Ww(),Qw(),rI(),iI(),eI(),tI(),nI(),uw(),sI(),MI()))();})();
/*! Bundled license information:

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/component/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/logger/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

firebase/app/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/functions/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/functions/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
*/
